(()=>{var Xl=Object.defineProperty;var Yl=(he,ue,o)=>ue in he?Xl(he,ue,{enumerable:!0,configurable:!0,writable:!0,value:o}):he[ue]=o;var Wt=(he,ue,o)=>(Yl(he,typeof ue!="symbol"?ue+"":ue,o),o),bt=(he,ue,o)=>{if(!ue.has(he))throw TypeError("Cannot "+o)};var X=(he,ue,o)=>(bt(he,ue,"read from private field"),o?o.call(he):ue.get(he)),we=(he,ue,o)=>{if(ue.has(he))throw TypeError("Cannot add the same private member more than once");ue instanceof WeakSet?ue.add(he):ue.set(he,o)},xe=(he,ue,o,Se)=>(bt(he,ue,"write to private field"),Se?Se.call(he,o):ue.set(he,o),o);var rt=(he,ue,o)=>(bt(he,ue,"access private method"),o);var $e=(()=>{var he=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(ue={}){var o=ue,Se,ke;o.ready=new Promise((e,t)=>{Se=e,ke=t});let Ne=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,Ne.debugModule("globalThis.location =",globalThis.location),o.locateFile=function(e,t){"use strict";let r,i=this.urlParams;return i.has(e)?r=i.get(e):this.sqlite3Dir?r=this.sqlite3Dir+e:this.scriptDir?r=this.scriptDir+e:r=t+e,this.debugModule("locateFile(",arguments[0],",",arguments[1],")","sqlite3InitModuleState.scriptDir =",this.scriptDir,"up.entries() =",Array.from(i.entries()),"result =",r),r}.bind(Ne);var Ke=Object.assign({},o),Qt=[],yt="./this.program",Ht=(e,t)=>{throw t},st=typeof window=="object",je=typeof importScripts=="function",Vt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Zl=!st&&!Vt&&!je,Ae="";function Gt(e){return o.locateFile?o.locateFile(e,Ae):Ae+e}var it,vt,ot;(st||je)&&(je?Ae=self.location.href:typeof document<"u"&&document.currentScript&&(Ae=document.currentScript.src),he&&(Ae=he),Ae.indexOf("blob:")!==0?Ae=Ae.substr(0,Ae.replace(/[?#].*/,"").lastIndexOf("/")+1):Ae="",it=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},je&&(ot=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),vt=(e,t,r)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{if(i.status==200||i.status==0&&i.response){t(i.response);return}r()},i.onerror=r,i.send(null)});var lt=o.print||console.log.bind(console),Pe=o.printErr||console.error.bind(console);Object.assign(o,Ke),Ke=null,o.arguments&&(Qt=o.arguments),o.thisProgram&&(yt=o.thisProgram),o.quit&&(Ht=o.quit);var We;o.wasmBinary&&(We=o.wasmBinary),typeof WebAssembly!="object"&&De("no native wasm support detected");var Le,wt=!1,$t;function ea(e,t){e||De(t)}var ta,be,Be,Ce,Kt,de,qe,at,Ee,Jt,_t;function Et(){var e=Le.buffer;o.HEAP8=be=new Int8Array(e),o.HEAP16=Ce=new Int16Array(e),o.HEAPU8=Be=new Uint8Array(e),o.HEAPU16=Kt=new Uint16Array(e),o.HEAP32=de=new Int32Array(e),o.HEAPU32=qe=new Uint32Array(e),o.HEAPF32=at=new Float32Array(e),o.HEAPF64=_t=new Float64Array(e),o.HEAP64=Ee=new BigInt64Array(e),o.HEAPU64=Jt=new BigUint64Array(e)}var xt=o.INITIAL_MEMORY||16777216;o.wasmMemory?Le=o.wasmMemory:Le=new WebAssembly.Memory({initial:xt/65536,maximum:32768}),Et(),xt=Le.buffer.byteLength;var St=[],At=[],ra=[],It=[],Xt=!1;function Yt(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)tr(o.preRun.shift());ft(St)}function Zt(){Xt=!0,!o.noFSInit&&!l.init.initialized&&l.init(),l.ignorePermissions=!1,Re.init(),ft(At)}function er(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)nr(o.postRun.shift());ft(It)}function tr(e){St.unshift(e)}function rr(e){At.unshift(e)}function na(e){}function nr(e){It.unshift(e)}var Me=0,ct=null,Qe=null;function sa(e){return e}function ut(e){Me++,o.monitorRunDependencies?.(Me)}function Je(e){if(Me--,o.monitorRunDependencies?.(Me),Me==0&&(ct!==null&&(clearInterval(ct),ct=null),Qe)){var t=Qe;Qe=null,t()}}function De(e){o.onAbort?.(e),e="Aborted("+e+")",Pe(e),wt=!0,$t=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw ke(t),t}var sr="data:application/octet-stream;base64,",kt=e=>e.startsWith(sr),ia=e=>e.startsWith("file://"),ze;ze="sqlean.wasm",kt(ze)||(ze=Gt(ze));function Tt(e){if(e==ze&&We)return new Uint8Array(We);if(ot)return ot(e);throw"both async and sync fetching of the wasm failed"}function ir(e){return!We&&(st||je)&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()}).catch(()=>Tt(e)):Promise.resolve().then(()=>Tt(e))}function Ft(e,t,r){return ir(e).then(i=>WebAssembly.instantiate(i,t)).then(i=>i).then(r,i=>{Pe(`failed to asynchronously prepare wasm: ${i}`),De(i)})}function or(e,t,r,i){return!e&&typeof WebAssembly.instantiateStreaming=="function"&&!kt(t)&&typeof fetch=="function"?fetch(t,{credentials:"same-origin"}).then(n=>{var s=WebAssembly.instantiateStreaming(n,r);return s.then(i,function(m){return Pe(`wasm streaming compile failed: ${m}`),Pe("falling back to ArrayBuffer instantiation"),Ft(t,r,i)})}):Ft(t,r,i)}function lr(){var e={env:Mt,wasi_snapshot_preview1:Mt};function t(i,n){return g=i.exports,rr(g.__wasm_call_ctors),Je("wasm-instantiate"),g}ut("wasm-instantiate");function r(i){t(i.instance)}if(o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(i){Pe(`Module.instantiateWasm callback failed with error: ${i}`),ke(i)}return or(We,ze,e,r).catch(ke),{}}function oa(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var ft=e=>{for(;e.length>0;)e.shift()(o)};function la(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return be[e>>0];case"i8":return be[e>>0];case"i16":return Ce[e>>1];case"i32":return de[e>>2];case"i64":return Ee[e>>3];case"float":return at[e>>2];case"double":return _t[e>>3];case"*":return qe[e>>2];default:De(`invalid type for getValue: ${t}`)}}var aa=o.noExitRuntime||!0;function _a(e,t,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":be[e>>0]=t;break;case"i8":be[e>>0]=t;break;case"i16":Ce[e>>1]=t;break;case"i32":de[e>>2]=t;break;case"i64":Ee[e>>3]=BigInt(t);break;case"float":at[e>>2]=t;break;case"double":_t[e>>3]=t;break;case"*":qe[e>>2]=t;break;default:De(`invalid type for setValue: ${r}`)}}var Ot=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ue=(e,t,r)=>{for(var i=t+r,n=t;e[n]&&!(n>=i);)++n;if(n-t>16&&e.buffer&&Ot)return Ot.decode(e.subarray(t,n));for(var s="";t<n;){var m=e[t++];if(!(m&128)){s+=String.fromCharCode(m);continue}var h=e[t++]&63;if((m&224)==192){s+=String.fromCharCode((m&31)<<6|h);continue}var P=e[t++]&63;if((m&240)==224?m=(m&15)<<12|h<<6|P:m=(m&7)<<18|h<<12|P<<6|e[t++]&63,m<65536)s+=String.fromCharCode(m);else{var D=m-65536;s+=String.fromCharCode(55296|D>>10,56320|D&1023)}}return s},Xe=(e,t)=>e?Ue(Be,e,t):"",ar=(e,t,r,i)=>{De(`Assertion failed: ${Xe(e)}, at: `+[t?Xe(t):"unknown filename",r,i?Xe(i):"unknown function"])},me={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];n==="."?e.splice(i,1):n===".."?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=me.isAbs(e),r=e.substr(-1)==="/";return e=me.normalizeArray(e.split("/").filter(i=>!!i),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=me.splitPath(e),r=t[0],i=t[1];return!r&&!i?".":(i&&(i=i.substr(0,i.length-1)),r+i)},basename:e=>{if(e==="/")return"/";e=me.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return me.normalize(e.join("/"))},join2:(e,t)=>me.normalize(e+"/"+t)},_r=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);De("initRandomDevice")},Pt=e=>(Pt=_r())(e),Te={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var i=r>=0?arguments[r]:l.cwd();if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,t=me.isAbs(i)}return e=me.normalizeArray(e.split("/").filter(n=>!!n),!t).join("/"),(t?"/":"")+e||"."},relative:(e,t)=>{e=Te.resolve(e).substr(1),t=Te.resolve(t).substr(1);function r(D){for(var W=0;W<D.length&&D[W]==="";W++);for(var z=D.length-1;z>=0&&D[z]==="";z--);return W>z?[]:D.slice(W,z-W+1)}for(var i=r(e.split("/")),n=r(t.split("/")),s=Math.min(i.length,n.length),m=s,h=0;h<s;h++)if(i[h]!==n[h]){m=h;break}for(var P=[],h=m;h<i.length;h++)P.push("..");return P=P.concat(n.slice(m)),P.join("/")}},dt=[],He=e=>{for(var t=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++r):t+=3}return t},pt=(e,t,r,i)=>{if(!(i>0))return 0;for(var n=r,s=r+i-1,m=0;m<e.length;++m){var h=e.charCodeAt(m);if(h>=55296&&h<=57343){var P=e.charCodeAt(++m);h=65536+((h&1023)<<10)|P&1023}if(h<=127){if(r>=s)break;t[r++]=h}else if(h<=2047){if(r+1>=s)break;t[r++]=192|h>>6,t[r++]=128|h&63}else if(h<=65535){if(r+2>=s)break;t[r++]=224|h>>12,t[r++]=128|h>>6&63,t[r++]=128|h&63}else{if(r+3>=s)break;t[r++]=240|h>>18,t[r++]=128|h>>12&63,t[r++]=128|h>>6&63,t[r++]=128|h&63}}return t[r]=0,r-n};function mt(e,t,r){var i=r>0?r:He(e)+1,n=new Array(i),s=pt(e,n,0,n.length);return t&&(n.length=s),n}var cr=()=>{if(!dt.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;dt=mt(e,!0)}return dt.shift()},Re={ttys:[],init(){},shutdown(){},register(e,t){Re.ttys[e]={input:[],output:[],ops:t},l.registerDevice(e,Re.stream_ops)},stream_ops:{open(e){var t=Re.ttys[e.node.rdev];if(!t)throw new l.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,r,i,n){if(!e.tty||!e.tty.ops.get_char)throw new l.ErrnoError(60);for(var s=0,m=0;m<i;m++){var h;try{h=e.tty.ops.get_char(e.tty)}catch{throw new l.ErrnoError(29)}if(h===void 0&&s===0)throw new l.ErrnoError(6);if(h==null)break;s++,t[r+m]=h}return s&&(e.node.timestamp=Date.now()),s},write(e,t,r,i,n){if(!e.tty||!e.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var s=0;s<i;s++)e.tty.ops.put_char(e.tty,t[r+s])}catch{throw new l.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),s}},default_tty_ops:{get_char(e){return cr()},put_char(e,t){t===null||t===10?(lt(Ue(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(lt(Ue(e.output,0)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,r){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(Pe(Ue(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(Pe(Ue(e.output,0)),e.output=[])}}},ur=(e,t)=>(Be.fill(0,e,e+t),e),fr=(e,t)=>Math.ceil(e/t)*t,Lt=e=>{e=fr(e,65536);var t=Bt(65536,e);return t?ur(t,e):0},ae={ops_table:null,mount(e){return ae.createNode(null,"/",16895,0)},createNode(e,t,r,i){if(l.isBlkdev(r)||l.isFIFO(r))throw new l.ErrnoError(63);ae.ops_table||={dir:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr,lookup:ae.node_ops.lookup,mknod:ae.node_ops.mknod,rename:ae.node_ops.rename,unlink:ae.node_ops.unlink,rmdir:ae.node_ops.rmdir,readdir:ae.node_ops.readdir,symlink:ae.node_ops.symlink},stream:{llseek:ae.stream_ops.llseek}},file:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr},stream:{llseek:ae.stream_ops.llseek,read:ae.stream_ops.read,write:ae.stream_ops.write,allocate:ae.stream_ops.allocate,mmap:ae.stream_ops.mmap,msync:ae.stream_ops.msync}},link:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr,readlink:ae.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ae.node_ops.getattr,setattr:ae.node_ops.setattr},stream:l.chrdev_stream_ops}};var n=l.createNode(e,t,r,i);return l.isDir(n.mode)?(n.node_ops=ae.ops_table.dir.node,n.stream_ops=ae.ops_table.dir.stream,n.contents={}):l.isFile(n.mode)?(n.node_ops=ae.ops_table.file.node,n.stream_ops=ae.ops_table.file.stream,n.usedBytes=0,n.contents=null):l.isLink(n.mode)?(n.node_ops=ae.ops_table.link.node,n.stream_ops=ae.ops_table.link.stream):l.isChrdev(n.mode)&&(n.node_ops=ae.ops_table.chrdev.node,n.stream_ops=ae.ops_table.chrdev.stream),n.timestamp=Date.now(),e&&(e.contents[t]=n,e.timestamp=n.timestamp),n},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){var i=1024*1024;t=Math.max(t,r*(r<i?2:1.125)>>>0),r!=0&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=l.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,l.isDir(e.mode)?t.size=4096:l.isFile(e.mode)?t.size=e.usedBytes:l.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&ae.resizeFileStorage(e,t.size)},lookup(e,t){throw l.genericErrors[44]},mknod(e,t,r,i){return ae.createNode(e,t,r,i)},rename(e,t,r){if(l.isDir(e.mode)){var i;try{i=l.lookupNode(t,r)}catch{}if(i)for(var n in i.contents)throw new l.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var r=l.lookupNode(e,t);for(var i in r.contents)throw new l.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var r of Object.keys(e.contents))t.push(r);return t},symlink(e,t,r){var i=ae.createNode(e,t,41471,0);return i.link=r,i},readlink(e){if(!l.isLink(e.mode))throw new l.ErrnoError(28);return e.link}},stream_ops:{read(e,t,r,i,n){var s=e.node.contents;if(n>=e.node.usedBytes)return 0;var m=Math.min(e.node.usedBytes-n,i);if(m>8&&s.subarray)t.set(s.subarray(n,n+m),r);else for(var h=0;h<m;h++)t[r+h]=s[n+h];return m},write(e,t,r,i,n,s){if(t.buffer===be.buffer&&(s=!1),!i)return 0;var m=e.node;if(m.timestamp=Date.now(),t.subarray&&(!m.contents||m.contents.subarray)){if(s)return m.contents=t.subarray(r,r+i),m.usedBytes=i,i;if(m.usedBytes===0&&n===0)return m.contents=t.slice(r,r+i),m.usedBytes=i,i;if(n+i<=m.usedBytes)return m.contents.set(t.subarray(r,r+i),n),i}if(ae.expandFileStorage(m,n+i),m.contents.subarray&&t.subarray)m.contents.set(t.subarray(r,r+i),n);else for(var h=0;h<i;h++)m.contents[n+h]=t[r+h];return m.usedBytes=Math.max(m.usedBytes,n+i),i},llseek(e,t,r){var i=t;if(r===1?i+=e.position:r===2&&l.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new l.ErrnoError(28);return i},allocate(e,t,r){ae.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap(e,t,r,i,n){if(!l.isFile(e.node.mode))throw new l.ErrnoError(43);var s,m,h=e.node.contents;if(!(n&2)&&h.buffer===be.buffer)m=!1,s=h.byteOffset;else{if((r>0||r+t<h.length)&&(h.subarray?h=h.subarray(r,r+t):h=Array.prototype.slice.call(h,r,r+t)),m=!0,s=Lt(t),!s)throw new l.ErrnoError(48);be.set(h,s)}return{ptr:s,allocated:m}},msync(e,t,r,i,n){return ae.stream_ops.write(e,t,0,i,r,!1),0}}},dr=(e,t,r,i)=>{var n=i?"":`al ${e}`;vt(e,s=>{t(new Uint8Array(s)),n&&Je(n)},s=>{if(r)r();else throw`Loading data file "${e}" failed.`}),n&&ut(n)},pr=(e,t,r,i,n,s)=>{l.createDataFile(e,t,r,i,n,s)},mr=o.preloadPlugins||[],hr=(e,t,r,i)=>{typeof Browser<"u"&&Browser.init();var n=!1;return mr.forEach(s=>{n||s.canHandle(t)&&(s.handle(e,t,r,i),n=!0)}),n},gr=(e,t,r,i,n,s,m,h,P,D)=>{var W=t?Te.resolve(me.join2(e,t)):e,z=`cp ${W}`;function Q(A){function k(F){D?.(),h||pr(e,t,F,i,n,P),s?.(),Je(z)}hr(A,W,k,()=>{m?.(),Je(z)})||k(A)}ut(z),typeof r=="string"?dr(r,Q,m):Q(r)},qr=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},r=t[e];if(typeof r>"u")throw new Error(`Unknown file open mode: ${e}`);return r},ht=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(e,t={}){if(e=Te.resolve(e),!e)return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};if(t=Object.assign(r,t),t.recurse_count>8)throw new l.ErrnoError(32);for(var i=e.split("/").filter(z=>!!z),n=l.root,s="/",m=0;m<i.length;m++){var h=m===i.length-1;if(h&&t.parent)break;if(n=l.lookupNode(n,i[m]),s=me.join2(s,i[m]),l.isMountpoint(n)&&(!h||h&&t.follow_mount)&&(n=n.mounted.root),!h||t.follow)for(var P=0;l.isLink(n.mode);){var D=l.readlink(s);s=Te.resolve(me.dirname(s),D);var W=l.lookupPath(s,{recurse_count:t.recurse_count+1});if(n=W.node,P++>40)throw new l.ErrnoError(32)}}return{path:s,node:n}},getPath(e){for(var t;;){if(l.isRoot(e)){var r=e.mount.mountpoint;return t?r[r.length-1]!=="/"?`${r}/${t}`:r+t:r}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var r=0,i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i)|0;return(e+r>>>0)%l.nameTable.length},hashAddNode(e){var t=l.hashName(e.parent.id,e.name);e.name_next=l.nameTable[t],l.nameTable[t]=e},hashRemoveNode(e){var t=l.hashName(e.parent.id,e.name);if(l.nameTable[t]===e)l.nameTable[t]=e.name_next;else for(var r=l.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode(e,t){var r=l.mayLookup(e);if(r)throw new l.ErrnoError(r,e);for(var i=l.hashName(e.id,t),n=l.nameTable[i];n;n=n.name_next){var s=n.name;if(n.parent.id===e.id&&s===t)return n}return l.lookup(e,t)},createNode(e,t,r,i){var n=new l.FSNode(e,t,r,i);return l.hashAddNode(n),n},destroyNode(e){l.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return l.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){var t=l.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{var r=l.lookupNode(e,t);return 20}catch{}return l.nodePermissions(e,"wx")},mayDelete(e,t,r){var i;try{i=l.lookupNode(e,t)}catch(s){return s.errno}var n=l.nodePermissions(e,"wx");if(n)return n;if(r){if(!l.isDir(i.mode))return 54;if(l.isRoot(i)||l.getPath(i)===l.cwd())return 10}else if(l.isDir(i.mode))return 31;return 0},mayOpen(e,t){return e?l.isLink(e.mode)?32:l.isDir(e.mode)&&(l.flagsToPermissionString(t)!=="r"||t&512)?31:l.nodePermissions(e,l.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=l.MAX_OPEN_FDS;e++)if(!l.streams[e])return e;throw new l.ErrnoError(33)},getStreamChecked(e){var t=l.getStream(e);if(!t)throw new l.ErrnoError(8);return t},getStream:e=>l.streams[e],createStream(e,t=-1){return l.FSStream||(l.FSStream=function(){this.shared={}},l.FSStream.prototype={},Object.defineProperties(l.FSStream.prototype,{object:{get(){return this.node},set(r){this.node=r}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(r){this.shared.flags=r}},position:{get(){return this.shared.position},set(r){this.shared.position=r}}})),e=Object.assign(new l.FSStream,e),t==-1&&(t=l.nextfd()),e.fd=t,l.streams[t]=e,e},closeStream(e){l.streams[e]=null},chrdev_stream_ops:{open(e){var t=l.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new l.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){l.devices[e]={stream_ops:t}},getDevice:e=>l.devices[e],getMounts(e){for(var t=[],r=[e];r.length;){var i=r.pop();t.push(i),r.push.apply(r,i.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),l.syncFSRequests++,l.syncFSRequests>1&&Pe(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var r=l.getMounts(l.root.mount),i=0;function n(m){return l.syncFSRequests--,t(m)}function s(m){if(m)return s.errored?void 0:(s.errored=!0,n(m));++i>=r.length&&n(null)}r.forEach(m=>{if(!m.type.syncfs)return s(null);m.type.syncfs(m,e,s)})},mount(e,t,r){var i=r==="/",n=!r,s;if(i&&l.root)throw new l.ErrnoError(10);if(!i&&!n){var m=l.lookupPath(r,{follow_mount:!1});if(r=m.path,s=m.node,l.isMountpoint(s))throw new l.ErrnoError(10);if(!l.isDir(s.mode))throw new l.ErrnoError(54)}var h={type:e,opts:t,mountpoint:r,mounts:[]},P=e.mount(h);return P.mount=h,h.root=P,i?l.root=P:s&&(s.mounted=h,s.mount&&s.mount.mounts.push(h)),P},unmount(e){var t=l.lookupPath(e,{follow_mount:!1});if(!l.isMountpoint(t.node))throw new l.ErrnoError(28);var r=t.node,i=r.mounted,n=l.getMounts(i);Object.keys(l.nameTable).forEach(m=>{for(var h=l.nameTable[m];h;){var P=h.name_next;n.includes(h.mount)&&l.destroyNode(h),h=P}}),r.mounted=null;var s=r.mount.mounts.indexOf(i);r.mount.mounts.splice(s,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,r){var i=l.lookupPath(e,{parent:!0}),n=i.node,s=me.basename(e);if(!s||s==="."||s==="..")throw new l.ErrnoError(28);var m=l.mayCreate(n,s);if(m)throw new l.ErrnoError(m);if(!n.node_ops.mknod)throw new l.ErrnoError(63);return n.node_ops.mknod(n,s,t,r)},create(e,t){return t=t!==void 0?t:438,t&=4095,t|=32768,l.mknod(e,t,0)},mkdir(e,t){return t=t!==void 0?t:511,t&=1023,t|=16384,l.mknod(e,t,0)},mkdirTree(e,t){for(var r=e.split("/"),i="",n=0;n<r.length;++n)if(r[n]){i+="/"+r[n];try{l.mkdir(i,t)}catch(s){if(s.errno!=20)throw s}}},mkdev(e,t,r){return typeof r>"u"&&(r=t,t=438),t|=8192,l.mknod(e,t,r)},symlink(e,t){if(!Te.resolve(e))throw new l.ErrnoError(44);var r=l.lookupPath(t,{parent:!0}),i=r.node;if(!i)throw new l.ErrnoError(44);var n=me.basename(t),s=l.mayCreate(i,n);if(s)throw new l.ErrnoError(s);if(!i.node_ops.symlink)throw new l.ErrnoError(63);return i.node_ops.symlink(i,n,e)},rename(e,t){var r=me.dirname(e),i=me.dirname(t),n=me.basename(e),s=me.basename(t),m,h,P;if(m=l.lookupPath(e,{parent:!0}),h=m.node,m=l.lookupPath(t,{parent:!0}),P=m.node,!h||!P)throw new l.ErrnoError(44);if(h.mount!==P.mount)throw new l.ErrnoError(75);var D=l.lookupNode(h,n),W=Te.relative(e,i);if(W.charAt(0)!==".")throw new l.ErrnoError(28);if(W=Te.relative(t,r),W.charAt(0)!==".")throw new l.ErrnoError(55);var z;try{z=l.lookupNode(P,s)}catch{}if(D!==z){var Q=l.isDir(D.mode),A=l.mayDelete(h,n,Q);if(A)throw new l.ErrnoError(A);if(A=z?l.mayDelete(P,s,Q):l.mayCreate(P,s),A)throw new l.ErrnoError(A);if(!h.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(D)||z&&l.isMountpoint(z))throw new l.ErrnoError(10);if(P!==h&&(A=l.nodePermissions(h,"w"),A))throw new l.ErrnoError(A);l.hashRemoveNode(D);try{h.node_ops.rename(D,P,s)}catch(k){throw k}finally{l.hashAddNode(D)}}},rmdir(e){var t=l.lookupPath(e,{parent:!0}),r=t.node,i=me.basename(e),n=l.lookupNode(r,i),s=l.mayDelete(r,i,!0);if(s)throw new l.ErrnoError(s);if(!r.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(n))throw new l.ErrnoError(10);r.node_ops.rmdir(r,i),l.destroyNode(n)},readdir(e){var t=l.lookupPath(e,{follow:!0}),r=t.node;if(!r.node_ops.readdir)throw new l.ErrnoError(54);return r.node_ops.readdir(r)},unlink(e){var t=l.lookupPath(e,{parent:!0}),r=t.node;if(!r)throw new l.ErrnoError(44);var i=me.basename(e),n=l.lookupNode(r,i),s=l.mayDelete(r,i,!1);if(s)throw new l.ErrnoError(s);if(!r.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(n))throw new l.ErrnoError(10);r.node_ops.unlink(r,i),l.destroyNode(n)},readlink(e){var t=l.lookupPath(e),r=t.node;if(!r)throw new l.ErrnoError(44);if(!r.node_ops.readlink)throw new l.ErrnoError(28);return Te.resolve(l.getPath(r.parent),r.node_ops.readlink(r))},stat(e,t){var r=l.lookupPath(e,{follow:!t}),i=r.node;if(!i)throw new l.ErrnoError(44);if(!i.node_ops.getattr)throw new l.ErrnoError(63);return i.node_ops.getattr(i)},lstat(e){return l.stat(e,!0)},chmod(e,t,r){var i;if(typeof e=="string"){var n=l.lookupPath(e,{follow:!r});i=n.node}else i=e;if(!i.node_ops.setattr)throw new l.ErrnoError(63);i.node_ops.setattr(i,{mode:t&4095|i.mode&-4096,timestamp:Date.now()})},lchmod(e,t){l.chmod(e,t,!0)},fchmod(e,t){var r=l.getStreamChecked(e);l.chmod(r.node,t)},chown(e,t,r,i){var n;if(typeof e=="string"){var s=l.lookupPath(e,{follow:!i});n=s.node}else n=e;if(!n.node_ops.setattr)throw new l.ErrnoError(63);n.node_ops.setattr(n,{timestamp:Date.now()})},lchown(e,t,r){l.chown(e,t,r,!0)},fchown(e,t,r){var i=l.getStreamChecked(e);l.chown(i.node,t,r)},truncate(e,t){if(t<0)throw new l.ErrnoError(28);var r;if(typeof e=="string"){var i=l.lookupPath(e,{follow:!0});r=i.node}else r=e;if(!r.node_ops.setattr)throw new l.ErrnoError(63);if(l.isDir(r.mode))throw new l.ErrnoError(31);if(!l.isFile(r.mode))throw new l.ErrnoError(28);var n=l.nodePermissions(r,"w");if(n)throw new l.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate(e,t){var r=l.getStreamChecked(e);if(!(r.flags&2097155))throw new l.ErrnoError(28);l.truncate(r.node,t)},utime(e,t,r){var i=l.lookupPath(e,{follow:!0}),n=i.node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open(e,t,r){if(e==="")throw new l.ErrnoError(44);t=typeof t=="string"?qr(t):t,r=typeof r>"u"?438:r,t&64?r=r&4095|32768:r=0;var i;if(typeof e=="object")i=e;else{e=me.normalize(e);try{var n=l.lookupPath(e,{follow:!(t&131072)});i=n.node}catch{}}var s=!1;if(t&64)if(i){if(t&128)throw new l.ErrnoError(20)}else i=l.mknod(e,r,0),s=!0;if(!i)throw new l.ErrnoError(44);if(l.isChrdev(i.mode)&&(t&=-513),t&65536&&!l.isDir(i.mode))throw new l.ErrnoError(54);if(!s){var m=l.mayOpen(i,t);if(m)throw new l.ErrnoError(m)}t&512&&!s&&l.truncate(i,0),t&=-131713;var h=l.createStream({node:i,path:l.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return h.stream_ops.open&&h.stream_ops.open(h),o.logReadFiles&&!(t&1)&&(l.readFiles||(l.readFiles={}),e in l.readFiles||(l.readFiles[e]=1)),h},close(e){if(l.isClosed(e))throw new l.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{l.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,r){if(l.isClosed(e))throw new l.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new l.ErrnoError(70);if(r!=0&&r!=1&&r!=2)throw new l.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read(e,t,r,i,n){if(i<0||n<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.read)throw new l.ErrnoError(28);var s=typeof n<"u";if(!s)n=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var m=e.stream_ops.read(e,t,r,i,n);return s||(e.position+=m),m},write(e,t,r,i,n,s){if(i<0||n<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if(!(e.flags&2097155))throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.write)throw new l.ErrnoError(28);e.seekable&&e.flags&1024&&l.llseek(e,0,2);var m=typeof n<"u";if(!m)n=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var h=e.stream_ops.write(e,t,r,i,n,s);return m||(e.position+=h),h},allocate(e,t,r){if(l.isClosed(e))throw new l.ErrnoError(8);if(t<0||r<=0)throw new l.ErrnoError(28);if(!(e.flags&2097155))throw new l.ErrnoError(8);if(!l.isFile(e.node.mode)&&!l.isDir(e.node.mode))throw new l.ErrnoError(43);if(!e.stream_ops.allocate)throw new l.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap(e,t,r,i,n){if(i&2&&!(n&2)&&(e.flags&2097155)!==2)throw new l.ErrnoError(2);if((e.flags&2097155)===1)throw new l.ErrnoError(2);if(!e.stream_ops.mmap)throw new l.ErrnoError(43);return e.stream_ops.mmap(e,t,r,i,n)},msync(e,t,r,i,n){return e.stream_ops.msync?e.stream_ops.msync(e,t,r,i,n):0},munmap:e=>0,ioctl(e,t,r){if(!e.stream_ops.ioctl)throw new l.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var r,i=l.open(e,t.flags),n=l.stat(e),s=n.size,m=new Uint8Array(s);return l.read(i,m,0,s,0),t.encoding==="utf8"?r=Ue(m,0):t.encoding==="binary"&&(r=m),l.close(i),r},writeFile(e,t,r={}){r.flags=r.flags||577;var i=l.open(e,r.flags,r.mode);if(typeof t=="string"){var n=new Uint8Array(He(t)+1),s=pt(t,n,0,n.length);l.write(i,n,0,s,void 0,r.canOwn)}else if(ArrayBuffer.isView(t))l.write(i,t,0,t.byteLength,void 0,r.canOwn);else throw new Error("Unsupported data type");l.close(i)},cwd:()=>l.currentPath,chdir(e){var t=l.lookupPath(e,{follow:!0});if(t.node===null)throw new l.ErrnoError(44);if(!l.isDir(t.node.mode))throw new l.ErrnoError(54);var r=l.nodePermissions(t.node,"x");if(r)throw new l.ErrnoError(r);l.currentPath=t.path},createDefaultDirectories(){l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices(){l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(i,n,s,m,h)=>m}),l.mkdev("/dev/null",l.makedev(1,3)),Re.register(l.makedev(5,0),Re.default_tty_ops),Re.register(l.makedev(6,0),Re.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(t=Pt(e).byteLength),e[--t]);l.createDevice("/dev","random",r),l.createDevice("/dev","urandom",r),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories(){l.mkdir("/proc");var e=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount(){var t=l.createNode(e,"fd",16895,73);return t.node_ops={lookup(r,i){var n=+i,s=l.getStreamChecked(n),m={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>s.path}};return m.parent=m,m}},t}},{},"/proc/self/fd")},createStandardStreams(){o.stdin?l.createDevice("/dev","stdin",o.stdin):l.symlink("/dev/tty","/dev/stdin"),o.stdout?l.createDevice("/dev","stdout",null,o.stdout):l.symlink("/dev/tty","/dev/stdout"),o.stderr?l.createDevice("/dev","stderr",null,o.stderr):l.symlink("/dev/tty1","/dev/stderr");var e=l.open("/dev/stdin",0),t=l.open("/dev/stdout",1),r=l.open("/dev/stderr",1)},ensureErrnoError(){l.ErrnoError||(l.ErrnoError=function(t,r){this.name="ErrnoError",this.node=r,this.setErrno=function(i){this.errno=i},this.setErrno(t),this.message="FS error"},l.ErrnoError.prototype=new Error,l.ErrnoError.prototype.constructor=l.ErrnoError,[44].forEach(e=>{l.genericErrors[e]=new l.ErrnoError(e),l.genericErrors[e].stack="<generic error, no stack>"}))},staticInit(){l.ensureErrnoError(),l.nameTable=new Array(4096),l.mount(ae,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:ae}},init(e,t,r){l.init.initialized=!0,l.ensureErrnoError(),o.stdin=e||o.stdin,o.stdout=t||o.stdout,o.stderr=r||o.stderr,l.createStandardStreams()},quit(){l.init.initialized=!1;for(var e=0;e<l.streams.length;e++){var t=l.streams[e];t&&l.close(t)}},findObject(e,t){var r=l.analyzePath(e,t);return r.exists?r.object:null},analyzePath(e,t){try{var r=l.lookupPath(e,{follow:!t});e=r.path}catch{}var i={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=l.lookupPath(e,{parent:!0});i.parentExists=!0,i.parentPath=r.path,i.parentObject=r.node,i.name=me.basename(e),r=l.lookupPath(e,{follow:!t}),i.exists=!0,i.path=r.path,i.object=r.node,i.name=r.node.name,i.isRoot=r.path==="/"}catch(n){i.error=n.errno}return i},createPath(e,t,r,i){e=typeof e=="string"?e:l.getPath(e);for(var n=t.split("/").reverse();n.length;){var s=n.pop();if(s){var m=me.join2(e,s);try{l.mkdir(m)}catch{}e=m}}return m},createFile(e,t,r,i,n){var s=me.join2(typeof e=="string"?e:l.getPath(e),t),m=ht(i,n);return l.create(s,m)},createDataFile(e,t,r,i,n,s){var m=t;e&&(e=typeof e=="string"?e:l.getPath(e),m=t?me.join2(e,t):e);var h=ht(i,n),P=l.create(m,h);if(r){if(typeof r=="string"){for(var D=new Array(r.length),W=0,z=r.length;W<z;++W)D[W]=r.charCodeAt(W);r=D}l.chmod(P,h|146);var Q=l.open(P,577);l.write(Q,r,0,r.length,0,s),l.close(Q),l.chmod(P,h)}},createDevice(e,t,r,i){var n=me.join2(typeof e=="string"?e:l.getPath(e),t),s=ht(!!r,!!i);l.createDevice.major||(l.createDevice.major=64);var m=l.makedev(l.createDevice.major++,0);return l.registerDevice(m,{open(h){h.seekable=!1},close(h){i?.buffer?.length&&i(10)},read(h,P,D,W,z){for(var Q=0,A=0;A<W;A++){var k;try{k=r()}catch{throw new l.ErrnoError(29)}if(k===void 0&&Q===0)throw new l.ErrnoError(6);if(k==null)break;Q++,P[D+A]=k}return Q&&(h.node.timestamp=Date.now()),Q},write(h,P,D,W,z){for(var Q=0;Q<W;Q++)try{i(P[D+Q])}catch{throw new l.ErrnoError(29)}return W&&(h.node.timestamp=Date.now()),Q}}),l.mkdev(n,s,m)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(it)try{e.contents=mt(it(e.url),!0),e.usedBytes=e.contents.length}catch{throw new l.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile(e,t,r,i,n){function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(A){if(!(A>this.length-1||A<0)){var k=A%this.chunkSize,F=A/this.chunkSize|0;return this.getter(F)[k]}},s.prototype.setDataGetter=function(A){this.getter=A},s.prototype.cacheLength=function(){var A=new XMLHttpRequest;if(A.open("HEAD",r,!1),A.send(null),!(A.status>=200&&A.status<300||A.status===304))throw new Error("Couldn't load "+r+". Status: "+A.status);var k=Number(A.getResponseHeader("Content-length")),F,E=(F=A.getResponseHeader("Accept-Ranges"))&&F==="bytes",b=(F=A.getResponseHeader("Content-Encoding"))&&F==="gzip",O=1024*1024;E||(O=k);var R=(w,U)=>{if(w>U)throw new Error("invalid range ("+w+", "+U+") or no bytes requested!");if(U>k-1)throw new Error("only "+k+" bytes available! programmer error!");var u=new XMLHttpRequest;if(u.open("GET",r,!1),k!==O&&u.setRequestHeader("Range","bytes="+w+"-"+U),u.responseType="arraybuffer",u.overrideMimeType&&u.overrideMimeType("text/plain; charset=x-user-defined"),u.send(null),!(u.status>=200&&u.status<300||u.status===304))throw new Error("Couldn't load "+r+". Status: "+u.status);return u.response!==void 0?new Uint8Array(u.response||[]):mt(u.responseText||"",!0)},N=this;N.setDataGetter(w=>{var U=w*O,u=(w+1)*O-1;if(u=Math.min(u,k-1),typeof N.chunks[w]>"u"&&(N.chunks[w]=R(U,u)),typeof N.chunks[w]>"u")throw new Error("doXHR failed!");return N.chunks[w]}),(b||!k)&&(O=k=1,k=this.getter(0).length,O=k,lt("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=k,this._chunkSize=O,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!je)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var m=new s;Object.defineProperties(m,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var h={isDevice:!1,contents:m}}else var h={isDevice:!1,url:r};var P=l.createFile(e,t,h,i,n);h.contents?P.contents=h.contents:h.url&&(P.contents=null,P.url=h.url),Object.defineProperties(P,{usedBytes:{get:function(){return this.contents.length}}});var D={},W=Object.keys(P.stream_ops);W.forEach(Q=>{var A=P.stream_ops[Q];D[Q]=function(){return l.forceLoadFile(P),A.apply(null,arguments)}});function z(Q,A,k,F,E){var b=Q.node.contents;if(E>=b.length)return 0;var O=Math.min(b.length-E,F);if(b.slice)for(var R=0;R<O;R++)A[k+R]=b[E+R];else for(var R=0;R<O;R++)A[k+R]=b.get(E+R);return O}return D.read=(Q,A,k,F,E)=>(l.forceLoadFile(P),z(Q,A,k,F,E)),D.mmap=(Q,A,k,F,E)=>{l.forceLoadFile(P);var b=Lt(A);if(!b)throw new l.ErrnoError(48);return z(Q,be,b,A,k),{ptr:b,allocated:!0}},P.stream_ops=D,P}},te={DEFAULT_POLLMASK:5,calculateAt(e,t,r){if(me.isAbs(t))return t;var i;if(e===-100)i=l.cwd();else{var n=te.getStreamFromFD(e);i=n.path}if(t.length==0){if(!r)throw new l.ErrnoError(44);return i}return me.join2(i,t)},doStat(e,t,r){try{var i=e(t)}catch(h){if(h&&h.node&&me.normalize(t)!==me.normalize(l.getPath(h.node)))return-54;throw h}de[r>>2]=i.dev,de[r+4>>2]=i.mode,qe[r+8>>2]=i.nlink,de[r+12>>2]=i.uid,de[r+16>>2]=i.gid,de[r+20>>2]=i.rdev,Ee[r+24>>3]=BigInt(i.size),de[r+32>>2]=4096,de[r+36>>2]=i.blocks;var n=i.atime.getTime(),s=i.mtime.getTime(),m=i.ctime.getTime();return Ee[r+40>>3]=BigInt(Math.floor(n/1e3)),qe[r+48>>2]=n%1e3*1e3,Ee[r+56>>3]=BigInt(Math.floor(s/1e3)),qe[r+64>>2]=s%1e3*1e3,Ee[r+72>>3]=BigInt(Math.floor(m/1e3)),qe[r+80>>2]=m%1e3*1e3,Ee[r+88>>3]=BigInt(i.ino),0},doMsync(e,t,r,i,n){if(!l.isFile(t.node.mode))throw new l.ErrnoError(43);if(i&2)return 0;var s=Be.slice(e,e+r);l.msync(t,s,n,r,i)},varargs:void 0,get(){var e=de[+te.varargs>>2];return te.varargs+=4,e},getp(){return te.get()},getStr(e){var t=Xe(e);return t},getStreamFromFD(e){var t=l.getStreamChecked(e);return t}};function br(e,t){try{return e=te.getStr(e),l.chmod(e,t),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function yr(e,t,r,i){try{if(t=te.getStr(t),t=te.calculateAt(e,t),r&-8)return-28;var n=l.lookupPath(t,{follow:!0}),s=n.node;if(!s)return-44;var m="";return r&4&&(m+="r"),r&2&&(m+="w"),r&1&&(m+="x"),m&&l.nodePermissions(s,m)?-2:0}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function vr(e,t){try{return l.fchmod(e,t),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function wr(e,t,r){try{return l.fchown(e,t,r),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Er(e,t,r){te.varargs=r;try{var i=te.getStreamFromFD(e);switch(t){case 0:{var n=te.get();if(n<0)return-28;for(;l.streams[n];)n++;var s;return s=l.createStream(i,n),s.fd}case 1:case 2:return 0;case 3:return i.flags;case 4:{var n=te.get();return i.flags|=n,0}case 12:{var n=te.getp(),m=0;return Ce[n+m>>1]=2,0}case 13:case 14:return 0}return-28}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function xr(e,t){try{var r=te.getStreamFromFD(e);return te.doStat(l.stat,r.path,t)}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}var Sr=9007199254740992,Ar=-9007199254740992,Ve=e=>e<Ar||e>Sr?NaN:Number(e);function Ir(e,t){t=Ve(t);try{return isNaN(t)?61:(l.ftruncate(e,t),0)}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}var Ye=(e,t,r)=>pt(e,Be,t,r);function kr(e,t){try{if(t===0)return-28;var r=l.cwd(),i=He(r)+1;return t<i?-68:(Ye(r,e,t),i)}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Tr(e,t,r){try{var i=te.getStreamFromFD(e);i.getdents||=l.readdir(i.path);for(var n=280,s=0,m=l.llseek(i,0,1),h=Math.floor(m/n);h<i.getdents.length&&s+n<=r;){var P,D,W=i.getdents[h];if(W===".")P=i.node.id,D=4;else if(W===".."){var z=l.lookupPath(i.path,{parent:!0});P=z.node.id,D=4}else{var Q=l.lookupNode(i.node,W);P=Q.id,D=l.isChrdev(Q.mode)?2:l.isDir(Q.mode)?4:l.isLink(Q.mode)?10:8}Ee[t+s>>3]=BigInt(P),Ee[t+s+8>>3]=BigInt((h+1)*n),Ce[t+s+16>>1]=280,be[t+s+18>>0]=D,Ye(W,t+s+19,256),s+=n,h+=1}return l.llseek(i,h*n,0),s}catch(A){if(typeof l>"u"||A.name!=="ErrnoError")throw A;return-A.errno}}function Fr(e,t,r){te.varargs=r;try{var i=te.getStreamFromFD(e);switch(t){case 21509:return i.tty?0:-59;case 21505:{if(!i.tty)return-59;if(i.tty.ops.ioctl_tcgets){var n=i.tty.ops.ioctl_tcgets(i),s=te.getp();de[s>>2]=n.c_iflag||0,de[s+4>>2]=n.c_oflag||0,de[s+8>>2]=n.c_cflag||0,de[s+12>>2]=n.c_lflag||0;for(var m=0;m<32;m++)be[s+m+17>>0]=n.c_cc[m]||0;return 0}return 0}case 21510:case 21511:case 21512:return i.tty?0:-59;case 21506:case 21507:case 21508:{if(!i.tty)return-59;if(i.tty.ops.ioctl_tcsets){for(var s=te.getp(),h=de[s>>2],P=de[s+4>>2],D=de[s+8>>2],W=de[s+12>>2],z=[],m=0;m<32;m++)z.push(be[s+m+17>>0]);return i.tty.ops.ioctl_tcsets(i.tty,t,{c_iflag:h,c_oflag:P,c_cflag:D,c_lflag:W,c_cc:z})}return 0}case 21519:{if(!i.tty)return-59;var s=te.getp();return de[s>>2]=0,0}case 21520:return i.tty?-28:-59;case 21531:{var s=te.getp();return l.ioctl(i,t,s)}case 21523:{if(!i.tty)return-59;if(i.tty.ops.ioctl_tiocgwinsz){var Q=i.tty.ops.ioctl_tiocgwinsz(i.tty),s=te.getp();Ce[s>>1]=Q[0],Ce[s+2>>1]=Q[1]}return 0}case 21524:return i.tty?0:-59;case 21515:return i.tty?0:-59;default:return-28}}catch(A){if(typeof l>"u"||A.name!=="ErrnoError")throw A;return-A.errno}}function Or(e,t){try{return e=te.getStr(e),te.doStat(l.lstat,e,t)}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Pr(e,t,r){try{return t=te.getStr(t),t=te.calculateAt(e,t),t=me.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),l.mkdir(t,r,0),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Lr(e,t,r,i){try{t=te.getStr(t);var n=i&256,s=i&4096;return i=i&-6401,t=te.calculateAt(e,t,s),te.doStat(n?l.lstat:l.stat,t,r)}catch(m){if(typeof l>"u"||m.name!=="ErrnoError")throw m;return-m.errno}}function Cr(e,t,r,i){te.varargs=i;try{t=te.getStr(t),t=te.calculateAt(e,t);var n=i?te.get():0;return l.open(t,r,n).fd}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return-s.errno}}function Dr(e,t,r,i){try{if(t=te.getStr(t),t=te.calculateAt(e,t),i<=0)return-28;var n=l.readlink(t),s=Math.min(i,He(n)),m=be[r+s];return Ye(n,r,i+1),be[r+s]=m,s}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}function Rr(e){try{return e=te.getStr(e),l.rmdir(e),0}catch(t){if(typeof l>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function Nr(e,t){try{return e=te.getStr(e),te.doStat(l.stat,e,t)}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function Mr(e,t){try{return e=te.getStr(e),t=te.getStr(t),l.symlink(e,t),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function jr(e,t,r){try{return t=te.getStr(t),t=te.calculateAt(e,t),r===0?l.unlink(t):r===512?l.rmdir(t):De("Invalid flags passed to unlinkat"),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}var Ct=e=>qe[e>>2]+de[e+4>>2]*4294967296;function Br(e,t,r,i){try{if(t=te.getStr(t),t=te.calculateAt(e,t,!0),r){var m=Ct(r),h=de[r+8>>2];n=m*1e3+h/1e6,r+=16,m=Ct(r),h=de[r+8>>2],s=m*1e3+h/1e6}else var n=Date.now(),s=n;return l.utime(t,n,s),0}catch(P){if(typeof l>"u"||P.name!=="ErrnoError")throw P;return-P.errno}}var zr=1,Ur=()=>zr,Wr=e=>e%4===0&&(e%100!==0||e%400===0),Qr=[0,31,60,91,121,152,182,213,244,274,305,335],Hr=[0,31,59,90,120,151,181,212,243,273,304,334],Vr=e=>{var t=Wr(e.getFullYear()),r=t?Qr:Hr,i=r[e.getMonth()]+e.getDate()-1;return i};function Gr(e,t){e=Ve(e);var r=new Date(e*1e3);de[t>>2]=r.getSeconds(),de[t+4>>2]=r.getMinutes(),de[t+8>>2]=r.getHours(),de[t+12>>2]=r.getDate(),de[t+16>>2]=r.getMonth(),de[t+20>>2]=r.getFullYear()-1900,de[t+24>>2]=r.getDay();var i=Vr(r)|0;de[t+28>>2]=i,de[t+36>>2]=-(r.getTimezoneOffset()*60);var n=new Date(r.getFullYear(),0,1),s=new Date(r.getFullYear(),6,1).getTimezoneOffset(),m=n.getTimezoneOffset(),h=(s!=m&&r.getTimezoneOffset()==Math.min(m,s))|0;de[t+32>>2]=h}function $r(e,t,r,i,n,s,m){n=Ve(n);try{if(isNaN(n))return 61;var h=te.getStreamFromFD(i),P=l.mmap(h,e,n,t,r),D=P.ptr;return de[s>>2]=P.allocated,qe[m>>2]=D,0}catch(W){if(typeof l>"u"||W.name!=="ErrnoError")throw W;return-W.errno}}function Kr(e,t,r,i,n,s){s=Ve(s);try{if(isNaN(s))return 61;var m=te.getStreamFromFD(n);r&2&&te.doMsync(e,m,t,i,s),l.munmap(m)}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return-h.errno}}var Dt=e=>{var t=He(e)+1,r=jt(t);return r&&Ye(e,r,t),r},Jr=(e,t,r)=>{var i=new Date().getFullYear(),n=new Date(i,0,1),s=new Date(i,6,1),m=n.getTimezoneOffset(),h=s.getTimezoneOffset(),P=Math.max(m,h);qe[e>>2]=P*60,de[t>>2]=Number(m!=h);function D(k){var F=k.toTimeString().match(/\(([A-Za-z ]+)\)$/);return F?F[1]:"GMT"}var W=D(n),z=D(s),Q=Dt(W),A=Dt(z);h<m?(qe[r>>2]=Q,qe[r+4>>2]=A):(qe[r>>2]=A,qe[r+4>>2]=Q)},Xr=()=>Date.now(),Rt;Rt=()=>performance.now();var Yr=()=>2147483648,Zr=e=>{var t=Le.buffer,r=(e-t.byteLength+65535)/65536;try{return Le.grow(r),Et(),1}catch{}},en=e=>{var t=Be.length;e>>>=0;var r=Yr();if(e>r)return!1;for(var i=(P,D)=>P+(D-P%D)%D,n=1;n<=4;n*=2){var s=t*(1+.2/n);s=Math.min(s,e+100663296);var m=Math.min(r,i(Math.max(e,s),65536)),h=Zr(m);if(h)return!0}return!1},gt={},tn=()=>yt||"./this.program",Ge=()=>{if(!Ge.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:tn()};for(var r in gt)gt[r]===void 0?delete t[r]:t[r]=gt[r];var i=[];for(var r in t)i.push(`${r}=${t[r]}`);Ge.strings=i}return Ge.strings},rn=(e,t)=>{for(var r=0;r<e.length;++r)be[t++>>0]=e.charCodeAt(r);be[t>>0]=0},nn=(e,t)=>{var r=0;return Ge().forEach((i,n)=>{var s=t+r;qe[e+n*4>>2]=s,rn(i,s),r+=i.length+1}),0},sn=(e,t)=>{var r=Ge();qe[e>>2]=r.length;var i=0;return r.forEach(n=>i+=n.length+1),qe[t>>2]=i,0};function on(e){try{var t=te.getStreamFromFD(e);return l.close(t),0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return r.errno}}function ln(e,t){try{var r=0,i=0,n=0,s=te.getStreamFromFD(e),m=s.tty?2:l.isDir(s.mode)?3:l.isLink(s.mode)?7:4;return be[t>>0]=m,Ce[t+2>>1]=n,Ee[t+8>>3]=BigInt(r),Ee[t+16>>3]=BigInt(i),0}catch(h){if(typeof l>"u"||h.name!=="ErrnoError")throw h;return h.errno}}var an=(e,t,r,i)=>{for(var n=0,s=0;s<r;s++){var m=qe[t>>2],h=qe[t+4>>2];t+=8;var P=l.read(e,be,m,h,i);if(P<0)return-1;if(n+=P,P<h)break;typeof i<"u"&&(i+=P)}return n};function _n(e,t,r,i){try{var n=te.getStreamFromFD(e),s=an(n,t,r);return qe[i>>2]=s,0}catch(m){if(typeof l>"u"||m.name!=="ErrnoError")throw m;return m.errno}}function cn(e,t,r,i){t=Ve(t);try{if(isNaN(t))return 61;var n=te.getStreamFromFD(e);return l.llseek(n,t,r),Ee[i>>3]=BigInt(n.position),n.getdents&&t===0&&r===0&&(n.getdents=null),0}catch(s){if(typeof l>"u"||s.name!=="ErrnoError")throw s;return s.errno}}function un(e){try{var t=te.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return r.errno}}var fn=(e,t,r,i)=>{for(var n=0,s=0;s<r;s++){var m=qe[t>>2],h=qe[t+4>>2];t+=8;var P=l.write(e,be,m,h,i);if(P<0)return-1;n+=P,typeof i<"u"&&(i+=P)}return n};function dn(e,t,r,i){try{var n=te.getStreamFromFD(e),s=fn(n,t,r);return qe[i>>2]=s,0}catch(m){if(typeof l>"u"||m.name!=="ErrnoError")throw m;return m.errno}}var Nt=function(e,t,r,i){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=l.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=i},Ze=365,et=146;Object.defineProperties(Nt.prototype,{read:{get:function(){return(this.mode&Ze)===Ze},set:function(e){e?this.mode|=Ze:this.mode&=~Ze}},write:{get:function(){return(this.mode&et)===et},set:function(e){e?this.mode|=et:this.mode&=~et}},isFolder:{get:function(){return l.isDir(this.mode)}},isDevice:{get:function(){return l.isChrdev(this.mode)}}}),l.FSNode=Nt,l.createPreloadedFile=gr,l.staticInit();var Mt={__assert_fail:ar,__syscall_chmod:br,__syscall_faccessat:yr,__syscall_fchmod:vr,__syscall_fchown32:wr,__syscall_fcntl64:Er,__syscall_fstat64:xr,__syscall_ftruncate64:Ir,__syscall_getcwd:kr,__syscall_getdents64:Tr,__syscall_ioctl:Fr,__syscall_lstat64:Or,__syscall_mkdirat:Pr,__syscall_newfstatat:Lr,__syscall_openat:Cr,__syscall_readlinkat:Dr,__syscall_rmdir:Rr,__syscall_stat64:Nr,__syscall_symlink:Mr,__syscall_unlinkat:jr,__syscall_utimensat:Br,_emscripten_get_now_is_monotonic:Ur,_localtime_js:Gr,_mmap_js:$r,_munmap_js:Kr,_tzset_js:Jr,emscripten_date_now:Xr,emscripten_get_now:Rt,emscripten_resize_heap:en,environ_get:nn,environ_sizes_get:sn,fd_close:on,fd_fdstat_get:ln,fd_read:_n,fd_seek:cn,fd_sync:un,fd_write:dn,memory:Le},g=lr(),pn=()=>(pn=g.__wasm_call_ctors)(),mn=o._sqlite3_status64=(e,t,r,i)=>(mn=o._sqlite3_status64=g.sqlite3_status64)(e,t,r,i),hn=o._sqlite3_status=(e,t,r,i)=>(hn=o._sqlite3_status=g.sqlite3_status)(e,t,r,i),gn=o._sqlite3_db_status=(e,t,r,i,n)=>(gn=o._sqlite3_db_status=g.sqlite3_db_status)(e,t,r,i,n),qn=o._sqlite3_msize=e=>(qn=o._sqlite3_msize=g.sqlite3_msize)(e),bn=o._sqlite3_vfs_find=e=>(bn=o._sqlite3_vfs_find=g.sqlite3_vfs_find)(e),yn=o._sqlite3_initialize=()=>(yn=o._sqlite3_initialize=g.sqlite3_initialize)(),vn=o._sqlite3_malloc=e=>(vn=o._sqlite3_malloc=g.sqlite3_malloc)(e),wn=o._sqlite3_free=e=>(wn=o._sqlite3_free=g.sqlite3_free)(e),En=o._sqlite3_vfs_register=(e,t)=>(En=o._sqlite3_vfs_register=g.sqlite3_vfs_register)(e,t),xn=o._sqlite3_vfs_unregister=e=>(xn=o._sqlite3_vfs_unregister=g.sqlite3_vfs_unregister)(e),Sn=o._sqlite3_malloc64=e=>(Sn=o._sqlite3_malloc64=g.sqlite3_malloc64)(e),An=o._sqlite3_realloc=(e,t)=>(An=o._sqlite3_realloc=g.sqlite3_realloc)(e,t),In=o._sqlite3_realloc64=(e,t)=>(In=o._sqlite3_realloc64=g.sqlite3_realloc64)(e,t),kn=o._sqlite3_value_text=e=>(kn=o._sqlite3_value_text=g.sqlite3_value_text)(e),Tn=o._sqlite3_randomness=(e,t)=>(Tn=o._sqlite3_randomness=g.sqlite3_randomness)(e,t),Fn=o._sqlite3_stricmp=(e,t)=>(Fn=o._sqlite3_stricmp=g.sqlite3_stricmp)(e,t),On=o._sqlite3_strnicmp=(e,t,r)=>(On=o._sqlite3_strnicmp=g.sqlite3_strnicmp)(e,t,r),Pn=o._sqlite3_uri_parameter=(e,t)=>(Pn=o._sqlite3_uri_parameter=g.sqlite3_uri_parameter)(e,t),Ln=o._sqlite3_uri_boolean=(e,t,r)=>(Ln=o._sqlite3_uri_boolean=g.sqlite3_uri_boolean)(e,t,r),Cn=o._sqlite3_serialize=(e,t,r,i)=>(Cn=o._sqlite3_serialize=g.sqlite3_serialize)(e,t,r,i),Dn=o._sqlite3_prepare_v2=(e,t,r,i,n)=>(Dn=o._sqlite3_prepare_v2=g.sqlite3_prepare_v2)(e,t,r,i,n),Rn=o._sqlite3_step=e=>(Rn=o._sqlite3_step=g.sqlite3_step)(e),Nn=o._sqlite3_column_int64=(e,t)=>(Nn=o._sqlite3_column_int64=g.sqlite3_column_int64)(e,t),Mn=o._sqlite3_reset=e=>(Mn=o._sqlite3_reset=g.sqlite3_reset)(e),jn=o._sqlite3_exec=(e,t,r,i,n)=>(jn=o._sqlite3_exec=g.sqlite3_exec)(e,t,r,i,n),Bn=o._sqlite3_column_int=(e,t)=>(Bn=o._sqlite3_column_int=g.sqlite3_column_int)(e,t),zn=o._sqlite3_finalize=e=>(zn=o._sqlite3_finalize=g.sqlite3_finalize)(e),Un=o._sqlite3_file_control=(e,t,r,i)=>(Un=o._sqlite3_file_control=g.sqlite3_file_control)(e,t,r,i),Wn=o._sqlite3_column_name=(e,t)=>(Wn=o._sqlite3_column_name=g.sqlite3_column_name)(e,t),Qn=o._sqlite3_column_text=(e,t)=>(Qn=o._sqlite3_column_text=g.sqlite3_column_text)(e,t),Hn=o._sqlite3_column_type=(e,t)=>(Hn=o._sqlite3_column_type=g.sqlite3_column_type)(e,t),Vn=o._sqlite3_errmsg=e=>(Vn=o._sqlite3_errmsg=g.sqlite3_errmsg)(e),Gn=o._sqlite3_deserialize=(e,t,r,i,n,s)=>(Gn=o._sqlite3_deserialize=g.sqlite3_deserialize)(e,t,r,i,n,s),$n=o._sqlite3_clear_bindings=e=>($n=o._sqlite3_clear_bindings=g.sqlite3_clear_bindings)(e),Kn=o._sqlite3_value_blob=e=>(Kn=o._sqlite3_value_blob=g.sqlite3_value_blob)(e),Jn=o._sqlite3_value_bytes=e=>(Jn=o._sqlite3_value_bytes=g.sqlite3_value_bytes)(e),Xn=o._sqlite3_value_double=e=>(Xn=o._sqlite3_value_double=g.sqlite3_value_double)(e),Yn=o._sqlite3_value_int=e=>(Yn=o._sqlite3_value_int=g.sqlite3_value_int)(e),Zn=o._sqlite3_value_int64=e=>(Zn=o._sqlite3_value_int64=g.sqlite3_value_int64)(e),es=o._sqlite3_value_subtype=e=>(es=o._sqlite3_value_subtype=g.sqlite3_value_subtype)(e),ts=o._sqlite3_value_pointer=(e,t)=>(ts=o._sqlite3_value_pointer=g.sqlite3_value_pointer)(e,t),rs=o._sqlite3_value_type=e=>(rs=o._sqlite3_value_type=g.sqlite3_value_type)(e),ns=o._sqlite3_value_nochange=e=>(ns=o._sqlite3_value_nochange=g.sqlite3_value_nochange)(e),ss=o._sqlite3_value_frombind=e=>(ss=o._sqlite3_value_frombind=g.sqlite3_value_frombind)(e),is=o._sqlite3_value_dup=e=>(is=o._sqlite3_value_dup=g.sqlite3_value_dup)(e),os=o._sqlite3_value_free=e=>(os=o._sqlite3_value_free=g.sqlite3_value_free)(e),ls=o._sqlite3_result_blob=(e,t,r,i)=>(ls=o._sqlite3_result_blob=g.sqlite3_result_blob)(e,t,r,i),as=o._sqlite3_result_error_toobig=e=>(as=o._sqlite3_result_error_toobig=g.sqlite3_result_error_toobig)(e),_s=o._sqlite3_result_error_nomem=e=>(_s=o._sqlite3_result_error_nomem=g.sqlite3_result_error_nomem)(e),cs=o._sqlite3_result_double=(e,t)=>(cs=o._sqlite3_result_double=g.sqlite3_result_double)(e,t),us=o._sqlite3_result_error=(e,t,r)=>(us=o._sqlite3_result_error=g.sqlite3_result_error)(e,t,r),fs=o._sqlite3_result_int=(e,t)=>(fs=o._sqlite3_result_int=g.sqlite3_result_int)(e,t),ds=o._sqlite3_result_int64=(e,t)=>(ds=o._sqlite3_result_int64=g.sqlite3_result_int64)(e,t),ps=o._sqlite3_result_null=e=>(ps=o._sqlite3_result_null=g.sqlite3_result_null)(e),ms=o._sqlite3_result_pointer=(e,t,r,i)=>(ms=o._sqlite3_result_pointer=g.sqlite3_result_pointer)(e,t,r,i),hs=o._sqlite3_result_subtype=(e,t)=>(hs=o._sqlite3_result_subtype=g.sqlite3_result_subtype)(e,t),gs=o._sqlite3_result_text=(e,t,r,i)=>(gs=o._sqlite3_result_text=g.sqlite3_result_text)(e,t,r,i),qs=o._sqlite3_result_zeroblob=(e,t)=>(qs=o._sqlite3_result_zeroblob=g.sqlite3_result_zeroblob)(e,t),bs=o._sqlite3_result_zeroblob64=(e,t)=>(bs=o._sqlite3_result_zeroblob64=g.sqlite3_result_zeroblob64)(e,t),ys=o._sqlite3_result_error_code=(e,t)=>(ys=o._sqlite3_result_error_code=g.sqlite3_result_error_code)(e,t),vs=o._sqlite3_user_data=e=>(vs=o._sqlite3_user_data=g.sqlite3_user_data)(e),ws=o._sqlite3_context_db_handle=e=>(ws=o._sqlite3_context_db_handle=g.sqlite3_context_db_handle)(e),Es=o._sqlite3_vtab_nochange=e=>(Es=o._sqlite3_vtab_nochange=g.sqlite3_vtab_nochange)(e),xs=o._sqlite3_vtab_in_first=(e,t)=>(xs=o._sqlite3_vtab_in_first=g.sqlite3_vtab_in_first)(e,t),Ss=o._sqlite3_vtab_in_next=(e,t)=>(Ss=o._sqlite3_vtab_in_next=g.sqlite3_vtab_in_next)(e,t),As=o._sqlite3_aggregate_context=(e,t)=>(As=o._sqlite3_aggregate_context=g.sqlite3_aggregate_context)(e,t),Is=o._sqlite3_get_auxdata=(e,t)=>(Is=o._sqlite3_get_auxdata=g.sqlite3_get_auxdata)(e,t),ks=o._sqlite3_set_auxdata=(e,t,r,i)=>(ks=o._sqlite3_set_auxdata=g.sqlite3_set_auxdata)(e,t,r,i),Ts=o._sqlite3_column_count=e=>(Ts=o._sqlite3_column_count=g.sqlite3_column_count)(e),Fs=o._sqlite3_data_count=e=>(Fs=o._sqlite3_data_count=g.sqlite3_data_count)(e),Os=o._sqlite3_column_blob=(e,t)=>(Os=o._sqlite3_column_blob=g.sqlite3_column_blob)(e,t),Ps=o._sqlite3_column_bytes=(e,t)=>(Ps=o._sqlite3_column_bytes=g.sqlite3_column_bytes)(e,t),Ls=o._sqlite3_column_double=(e,t)=>(Ls=o._sqlite3_column_double=g.sqlite3_column_double)(e,t),Cs=o._sqlite3_column_value=(e,t)=>(Cs=o._sqlite3_column_value=g.sqlite3_column_value)(e,t),Ds=o._sqlite3_column_decltype=(e,t)=>(Ds=o._sqlite3_column_decltype=g.sqlite3_column_decltype)(e,t),Rs=o._sqlite3_bind_blob=(e,t,r,i,n)=>(Rs=o._sqlite3_bind_blob=g.sqlite3_bind_blob)(e,t,r,i,n),Ns=o._sqlite3_bind_double=(e,t,r)=>(Ns=o._sqlite3_bind_double=g.sqlite3_bind_double)(e,t,r),Ms=o._sqlite3_bind_int=(e,t,r)=>(Ms=o._sqlite3_bind_int=g.sqlite3_bind_int)(e,t,r),js=o._sqlite3_bind_int64=(e,t,r)=>(js=o._sqlite3_bind_int64=g.sqlite3_bind_int64)(e,t,r),Bs=o._sqlite3_bind_null=(e,t)=>(Bs=o._sqlite3_bind_null=g.sqlite3_bind_null)(e,t),zs=o._sqlite3_bind_pointer=(e,t,r,i,n)=>(zs=o._sqlite3_bind_pointer=g.sqlite3_bind_pointer)(e,t,r,i,n),Us=o._sqlite3_bind_text=(e,t,r,i,n)=>(Us=o._sqlite3_bind_text=g.sqlite3_bind_text)(e,t,r,i,n),Ws=o._sqlite3_bind_parameter_count=e=>(Ws=o._sqlite3_bind_parameter_count=g.sqlite3_bind_parameter_count)(e),Qs=o._sqlite3_bind_parameter_name=(e,t)=>(Qs=o._sqlite3_bind_parameter_name=g.sqlite3_bind_parameter_name)(e,t),Hs=o._sqlite3_bind_parameter_index=(e,t)=>(Hs=o._sqlite3_bind_parameter_index=g.sqlite3_bind_parameter_index)(e,t),Vs=o._sqlite3_db_handle=e=>(Vs=o._sqlite3_db_handle=g.sqlite3_db_handle)(e),Gs=o._sqlite3_stmt_readonly=e=>(Gs=o._sqlite3_stmt_readonly=g.sqlite3_stmt_readonly)(e),$s=o._sqlite3_stmt_isexplain=e=>($s=o._sqlite3_stmt_isexplain=g.sqlite3_stmt_isexplain)(e),Ks=o._sqlite3_stmt_explain=(e,t)=>(Ks=o._sqlite3_stmt_explain=g.sqlite3_stmt_explain)(e,t),Js=o._sqlite3_stmt_busy=e=>(Js=o._sqlite3_stmt_busy=g.sqlite3_stmt_busy)(e),Xs=o._sqlite3_stmt_status=(e,t,r)=>(Xs=o._sqlite3_stmt_status=g.sqlite3_stmt_status)(e,t,r),Ys=o._sqlite3_sql=e=>(Ys=o._sqlite3_sql=g.sqlite3_sql)(e),Zs=o._sqlite3_expanded_sql=e=>(Zs=o._sqlite3_expanded_sql=g.sqlite3_expanded_sql)(e),ei=o._sqlite3_preupdate_old=(e,t,r)=>(ei=o._sqlite3_preupdate_old=g.sqlite3_preupdate_old)(e,t,r),ti=o._sqlite3_preupdate_count=e=>(ti=o._sqlite3_preupdate_count=g.sqlite3_preupdate_count)(e),ri=o._sqlite3_preupdate_depth=e=>(ri=o._sqlite3_preupdate_depth=g.sqlite3_preupdate_depth)(e),ni=o._sqlite3_preupdate_blobwrite=e=>(ni=o._sqlite3_preupdate_blobwrite=g.sqlite3_preupdate_blobwrite)(e),si=o._sqlite3_preupdate_new=(e,t,r)=>(si=o._sqlite3_preupdate_new=g.sqlite3_preupdate_new)(e,t,r),ii=o._sqlite3_value_numeric_type=e=>(ii=o._sqlite3_value_numeric_type=g.sqlite3_value_numeric_type)(e),oi=o._sqlite3_set_authorizer=(e,t,r)=>(oi=o._sqlite3_set_authorizer=g.sqlite3_set_authorizer)(e,t,r),li=o._sqlite3_strglob=(e,t)=>(li=o._sqlite3_strglob=g.sqlite3_strglob)(e,t),ai=o._sqlite3_strlike=(e,t,r)=>(ai=o._sqlite3_strlike=g.sqlite3_strlike)(e,t,r),_i=o._sqlite3_auto_extension=e=>(_i=o._sqlite3_auto_extension=g.sqlite3_auto_extension)(e),ci=o._sqlite3_cancel_auto_extension=e=>(ci=o._sqlite3_cancel_auto_extension=g.sqlite3_cancel_auto_extension)(e),ui=o._sqlite3_reset_auto_extension=()=>(ui=o._sqlite3_reset_auto_extension=g.sqlite3_reset_auto_extension)(),fi=o._sqlite3_prepare_v3=(e,t,r,i,n,s)=>(fi=o._sqlite3_prepare_v3=g.sqlite3_prepare_v3)(e,t,r,i,n,s),di=o._sqlite3_create_module=(e,t,r,i)=>(di=o._sqlite3_create_module=g.sqlite3_create_module)(e,t,r,i),pi=o._sqlite3_create_module_v2=(e,t,r,i,n)=>(pi=o._sqlite3_create_module_v2=g.sqlite3_create_module_v2)(e,t,r,i,n),mi=o._sqlite3_drop_modules=(e,t)=>(mi=o._sqlite3_drop_modules=g.sqlite3_drop_modules)(e,t),hi=o._sqlite3_declare_vtab=(e,t)=>(hi=o._sqlite3_declare_vtab=g.sqlite3_declare_vtab)(e,t),gi=o._sqlite3_vtab_on_conflict=e=>(gi=o._sqlite3_vtab_on_conflict=g.sqlite3_vtab_on_conflict)(e),qi=o._sqlite3_vtab_collation=(e,t)=>(qi=o._sqlite3_vtab_collation=g.sqlite3_vtab_collation)(e,t),bi=o._sqlite3_vtab_in=(e,t,r)=>(bi=o._sqlite3_vtab_in=g.sqlite3_vtab_in)(e,t,r),yi=o._sqlite3_vtab_rhs_value=(e,t,r)=>(yi=o._sqlite3_vtab_rhs_value=g.sqlite3_vtab_rhs_value)(e,t,r),vi=o._sqlite3_vtab_distinct=e=>(vi=o._sqlite3_vtab_distinct=g.sqlite3_vtab_distinct)(e),wi=o._sqlite3_keyword_name=(e,t,r)=>(wi=o._sqlite3_keyword_name=g.sqlite3_keyword_name)(e,t,r),Ei=o._sqlite3_keyword_count=()=>(Ei=o._sqlite3_keyword_count=g.sqlite3_keyword_count)(),xi=o._sqlite3_keyword_check=(e,t)=>(xi=o._sqlite3_keyword_check=g.sqlite3_keyword_check)(e,t),Si=o._sqlite3_complete=e=>(Si=o._sqlite3_complete=g.sqlite3_complete)(e),Ai=o._sqlite3_libversion=()=>(Ai=o._sqlite3_libversion=g.sqlite3_libversion)(),Ii=o._sqlite3_libversion_number=()=>(Ii=o._sqlite3_libversion_number=g.sqlite3_libversion_number)(),ki=o._sqlite3_shutdown=()=>(ki=o._sqlite3_shutdown=g.sqlite3_shutdown)(),Ti=o._sqlite3_last_insert_rowid=e=>(Ti=o._sqlite3_last_insert_rowid=g.sqlite3_last_insert_rowid)(e),Fi=o._sqlite3_set_last_insert_rowid=(e,t)=>(Fi=o._sqlite3_set_last_insert_rowid=g.sqlite3_set_last_insert_rowid)(e,t),Oi=o._sqlite3_changes64=e=>(Oi=o._sqlite3_changes64=g.sqlite3_changes64)(e),Pi=o._sqlite3_changes=e=>(Pi=o._sqlite3_changes=g.sqlite3_changes)(e),Li=o._sqlite3_total_changes64=e=>(Li=o._sqlite3_total_changes64=g.sqlite3_total_changes64)(e),Ci=o._sqlite3_total_changes=e=>(Ci=o._sqlite3_total_changes=g.sqlite3_total_changes)(e),Di=o._sqlite3_txn_state=(e,t)=>(Di=o._sqlite3_txn_state=g.sqlite3_txn_state)(e,t),Ri=o._sqlite3_close_v2=e=>(Ri=o._sqlite3_close_v2=g.sqlite3_close_v2)(e),Ni=o._sqlite3_busy_handler=(e,t,r)=>(Ni=o._sqlite3_busy_handler=g.sqlite3_busy_handler)(e,t,r),Mi=o._sqlite3_progress_handler=(e,t,r,i)=>(Mi=o._sqlite3_progress_handler=g.sqlite3_progress_handler)(e,t,r,i),ji=o._sqlite3_busy_timeout=(e,t)=>(ji=o._sqlite3_busy_timeout=g.sqlite3_busy_timeout)(e,t),Bi=o._sqlite3_interrupt=e=>(Bi=o._sqlite3_interrupt=g.sqlite3_interrupt)(e),zi=o._sqlite3_is_interrupted=e=>(zi=o._sqlite3_is_interrupted=g.sqlite3_is_interrupted)(e),Ui=o._sqlite3_create_function=(e,t,r,i,n,s,m,h)=>(Ui=o._sqlite3_create_function=g.sqlite3_create_function)(e,t,r,i,n,s,m,h),Wi=o._sqlite3_create_function_v2=(e,t,r,i,n,s,m,h,P)=>(Wi=o._sqlite3_create_function_v2=g.sqlite3_create_function_v2)(e,t,r,i,n,s,m,h,P),Qi=o._sqlite3_create_window_function=(e,t,r,i,n,s,m,h,P,D)=>(Qi=o._sqlite3_create_window_function=g.sqlite3_create_window_function)(e,t,r,i,n,s,m,h,P,D),Hi=o._sqlite3_overload_function=(e,t,r)=>(Hi=o._sqlite3_overload_function=g.sqlite3_overload_function)(e,t,r),Vi=o._sqlite3_trace_v2=(e,t,r,i)=>(Vi=o._sqlite3_trace_v2=g.sqlite3_trace_v2)(e,t,r,i),Gi=o._sqlite3_commit_hook=(e,t,r)=>(Gi=o._sqlite3_commit_hook=g.sqlite3_commit_hook)(e,t,r),$i=o._sqlite3_update_hook=(e,t,r)=>($i=o._sqlite3_update_hook=g.sqlite3_update_hook)(e,t,r),Ki=o._sqlite3_rollback_hook=(e,t,r)=>(Ki=o._sqlite3_rollback_hook=g.sqlite3_rollback_hook)(e,t,r),Ji=o._sqlite3_preupdate_hook=(e,t,r)=>(Ji=o._sqlite3_preupdate_hook=g.sqlite3_preupdate_hook)(e,t,r),Xi=o._sqlite3_error_offset=e=>(Xi=o._sqlite3_error_offset=g.sqlite3_error_offset)(e),Yi=o._sqlite3_errcode=e=>(Yi=o._sqlite3_errcode=g.sqlite3_errcode)(e),Zi=o._sqlite3_extended_errcode=e=>(Zi=o._sqlite3_extended_errcode=g.sqlite3_extended_errcode)(e),eo=o._sqlite3_errstr=e=>(eo=o._sqlite3_errstr=g.sqlite3_errstr)(e),to=o._sqlite3_limit=(e,t,r)=>(to=o._sqlite3_limit=g.sqlite3_limit)(e,t,r),ro=o._sqlite3_open=(e,t)=>(ro=o._sqlite3_open=g.sqlite3_open)(e,t),no=o._sqlite3_open_v2=(e,t,r,i)=>(no=o._sqlite3_open_v2=g.sqlite3_open_v2)(e,t,r,i),so=o._sqlite3_create_collation=(e,t,r,i,n)=>(so=o._sqlite3_create_collation=g.sqlite3_create_collation)(e,t,r,i,n),io=o._sqlite3_create_collation_v2=(e,t,r,i,n,s)=>(io=o._sqlite3_create_collation_v2=g.sqlite3_create_collation_v2)(e,t,r,i,n,s),oo=o._sqlite3_collation_needed=(e,t,r)=>(oo=o._sqlite3_collation_needed=g.sqlite3_collation_needed)(e,t,r),lo=o._sqlite3_get_autocommit=e=>(lo=o._sqlite3_get_autocommit=g.sqlite3_get_autocommit)(e),ao=o._sqlite3_table_column_metadata=(e,t,r,i,n,s,m,h,P)=>(ao=o._sqlite3_table_column_metadata=g.sqlite3_table_column_metadata)(e,t,r,i,n,s,m,h,P),_o=o._sqlite3_extended_result_codes=(e,t)=>(_o=o._sqlite3_extended_result_codes=g.sqlite3_extended_result_codes)(e,t),co=o._sqlite3_uri_key=(e,t)=>(co=o._sqlite3_uri_key=g.sqlite3_uri_key)(e,t),uo=o._sqlite3_uri_int64=(e,t,r)=>(uo=o._sqlite3_uri_int64=g.sqlite3_uri_int64)(e,t,r),fo=o._sqlite3_db_name=(e,t)=>(fo=o._sqlite3_db_name=g.sqlite3_db_name)(e,t),po=o._sqlite3_db_filename=(e,t)=>(po=o._sqlite3_db_filename=g.sqlite3_db_filename)(e,t),mo=o._sqlite3_db_readonly=(e,t)=>(mo=o._sqlite3_db_readonly=g.sqlite3_db_readonly)(e,t),ho=o._sqlite3_compileoption_used=e=>(ho=o._sqlite3_compileoption_used=g.sqlite3_compileoption_used)(e),go=o._sqlite3_compileoption_get=e=>(go=o._sqlite3_compileoption_get=g.sqlite3_compileoption_get)(e),qo=o._sqlite3session_diff=(e,t,r,i)=>(qo=o._sqlite3session_diff=g.sqlite3session_diff)(e,t,r,i),bo=o._sqlite3session_attach=(e,t)=>(bo=o._sqlite3session_attach=g.sqlite3session_attach)(e,t),yo=o._sqlite3session_create=(e,t,r)=>(yo=o._sqlite3session_create=g.sqlite3session_create)(e,t,r),vo=o._sqlite3session_delete=e=>(vo=o._sqlite3session_delete=g.sqlite3session_delete)(e),wo=o._sqlite3session_table_filter=(e,t,r)=>(wo=o._sqlite3session_table_filter=g.sqlite3session_table_filter)(e,t,r),Eo=o._sqlite3session_changeset=(e,t,r)=>(Eo=o._sqlite3session_changeset=g.sqlite3session_changeset)(e,t,r),xo=o._sqlite3session_changeset_strm=(e,t,r)=>(xo=o._sqlite3session_changeset_strm=g.sqlite3session_changeset_strm)(e,t,r),So=o._sqlite3session_patchset_strm=(e,t,r)=>(So=o._sqlite3session_patchset_strm=g.sqlite3session_patchset_strm)(e,t,r),Ao=o._sqlite3session_patchset=(e,t,r)=>(Ao=o._sqlite3session_patchset=g.sqlite3session_patchset)(e,t,r),Io=o._sqlite3session_enable=(e,t)=>(Io=o._sqlite3session_enable=g.sqlite3session_enable)(e,t),ko=o._sqlite3session_indirect=(e,t)=>(ko=o._sqlite3session_indirect=g.sqlite3session_indirect)(e,t),To=o._sqlite3session_isempty=e=>(To=o._sqlite3session_isempty=g.sqlite3session_isempty)(e),Fo=o._sqlite3session_memory_used=e=>(Fo=o._sqlite3session_memory_used=g.sqlite3session_memory_used)(e),Oo=o._sqlite3session_object_config=(e,t,r)=>(Oo=o._sqlite3session_object_config=g.sqlite3session_object_config)(e,t,r),Po=o._sqlite3session_changeset_size=e=>(Po=o._sqlite3session_changeset_size=g.sqlite3session_changeset_size)(e),Lo=o._sqlite3changeset_start=(e,t,r)=>(Lo=o._sqlite3changeset_start=g.sqlite3changeset_start)(e,t,r),Co=o._sqlite3changeset_start_v2=(e,t,r,i)=>(Co=o._sqlite3changeset_start_v2=g.sqlite3changeset_start_v2)(e,t,r,i),Do=o._sqlite3changeset_start_strm=(e,t,r)=>(Do=o._sqlite3changeset_start_strm=g.sqlite3changeset_start_strm)(e,t,r),Ro=o._sqlite3changeset_start_v2_strm=(e,t,r,i)=>(Ro=o._sqlite3changeset_start_v2_strm=g.sqlite3changeset_start_v2_strm)(e,t,r,i),No=o._sqlite3changeset_next=e=>(No=o._sqlite3changeset_next=g.sqlite3changeset_next)(e),Mo=o._sqlite3changeset_op=(e,t,r,i,n)=>(Mo=o._sqlite3changeset_op=g.sqlite3changeset_op)(e,t,r,i,n),jo=o._sqlite3changeset_pk=(e,t,r)=>(jo=o._sqlite3changeset_pk=g.sqlite3changeset_pk)(e,t,r),Bo=o._sqlite3changeset_old=(e,t,r)=>(Bo=o._sqlite3changeset_old=g.sqlite3changeset_old)(e,t,r),zo=o._sqlite3changeset_new=(e,t,r)=>(zo=o._sqlite3changeset_new=g.sqlite3changeset_new)(e,t,r),Uo=o._sqlite3changeset_conflict=(e,t,r)=>(Uo=o._sqlite3changeset_conflict=g.sqlite3changeset_conflict)(e,t,r),Wo=o._sqlite3changeset_fk_conflicts=(e,t)=>(Wo=o._sqlite3changeset_fk_conflicts=g.sqlite3changeset_fk_conflicts)(e,t),Qo=o._sqlite3changeset_finalize=e=>(Qo=o._sqlite3changeset_finalize=g.sqlite3changeset_finalize)(e),Ho=o._sqlite3changeset_invert=(e,t,r,i)=>(Ho=o._sqlite3changeset_invert=g.sqlite3changeset_invert)(e,t,r,i),Vo=o._sqlite3changeset_invert_strm=(e,t,r,i)=>(Vo=o._sqlite3changeset_invert_strm=g.sqlite3changeset_invert_strm)(e,t,r,i),Go=o._sqlite3changeset_apply_v2=(e,t,r,i,n,s,m,h,P)=>(Go=o._sqlite3changeset_apply_v2=g.sqlite3changeset_apply_v2)(e,t,r,i,n,s,m,h,P),$o=o._sqlite3changeset_apply=(e,t,r,i,n,s)=>($o=o._sqlite3changeset_apply=g.sqlite3changeset_apply)(e,t,r,i,n,s),Ko=o._sqlite3changeset_apply_v2_strm=(e,t,r,i,n,s,m,h,P)=>(Ko=o._sqlite3changeset_apply_v2_strm=g.sqlite3changeset_apply_v2_strm)(e,t,r,i,n,s,m,h,P),Jo=o._sqlite3changeset_apply_strm=(e,t,r,i,n,s)=>(Jo=o._sqlite3changeset_apply_strm=g.sqlite3changeset_apply_strm)(e,t,r,i,n,s),Xo=o._sqlite3changegroup_new=e=>(Xo=o._sqlite3changegroup_new=g.sqlite3changegroup_new)(e),Yo=o._sqlite3changegroup_add=(e,t,r)=>(Yo=o._sqlite3changegroup_add=g.sqlite3changegroup_add)(e,t,r),Zo=o._sqlite3changegroup_output=(e,t,r)=>(Zo=o._sqlite3changegroup_output=g.sqlite3changegroup_output)(e,t,r),el=o._sqlite3changegroup_add_strm=(e,t,r)=>(el=o._sqlite3changegroup_add_strm=g.sqlite3changegroup_add_strm)(e,t,r),tl=o._sqlite3changegroup_output_strm=(e,t,r)=>(tl=o._sqlite3changegroup_output_strm=g.sqlite3changegroup_output_strm)(e,t,r),rl=o._sqlite3changegroup_delete=e=>(rl=o._sqlite3changegroup_delete=g.sqlite3changegroup_delete)(e),nl=o._sqlite3changeset_concat=(e,t,r,i,n,s)=>(nl=o._sqlite3changeset_concat=g.sqlite3changeset_concat)(e,t,r,i,n,s),sl=o._sqlite3changeset_concat_strm=(e,t,r,i,n,s)=>(sl=o._sqlite3changeset_concat_strm=g.sqlite3changeset_concat_strm)(e,t,r,i,n,s),il=o._sqlite3session_config=(e,t)=>(il=o._sqlite3session_config=g.sqlite3session_config)(e,t),ol=o._sqlite3_sourceid=()=>(ol=o._sqlite3_sourceid=g.sqlite3_sourceid)(),ll=o._sqlite3__wasm_pstack_ptr=()=>(ll=o._sqlite3__wasm_pstack_ptr=g.sqlite3__wasm_pstack_ptr)(),al=o._sqlite3__wasm_pstack_restore=e=>(al=o._sqlite3__wasm_pstack_restore=g.sqlite3__wasm_pstack_restore)(e),_l=o._sqlite3__wasm_pstack_alloc=e=>(_l=o._sqlite3__wasm_pstack_alloc=g.sqlite3__wasm_pstack_alloc)(e),cl=o._sqlite3__wasm_pstack_remaining=()=>(cl=o._sqlite3__wasm_pstack_remaining=g.sqlite3__wasm_pstack_remaining)(),ul=o._sqlite3__wasm_pstack_quota=()=>(ul=o._sqlite3__wasm_pstack_quota=g.sqlite3__wasm_pstack_quota)(),fl=o._sqlite3__wasm_db_error=(e,t,r)=>(fl=o._sqlite3__wasm_db_error=g.sqlite3__wasm_db_error)(e,t,r),dl=o._sqlite3__wasm_test_struct=e=>(dl=o._sqlite3__wasm_test_struct=g.sqlite3__wasm_test_struct)(e),pl=o._sqlite3__wasm_enum_json=()=>(pl=o._sqlite3__wasm_enum_json=g.sqlite3__wasm_enum_json)(),ml=o._sqlite3__wasm_vfs_unlink=(e,t)=>(ml=o._sqlite3__wasm_vfs_unlink=g.sqlite3__wasm_vfs_unlink)(e,t),hl=o._sqlite3__wasm_db_vfs=(e,t)=>(hl=o._sqlite3__wasm_db_vfs=g.sqlite3__wasm_db_vfs)(e,t),gl=o._sqlite3__wasm_db_reset=e=>(gl=o._sqlite3__wasm_db_reset=g.sqlite3__wasm_db_reset)(e),ql=o._sqlite3__wasm_db_export_chunked=(e,t)=>(ql=o._sqlite3__wasm_db_export_chunked=g.sqlite3__wasm_db_export_chunked)(e,t),bl=o._sqlite3__wasm_db_serialize=(e,t,r,i,n)=>(bl=o._sqlite3__wasm_db_serialize=g.sqlite3__wasm_db_serialize)(e,t,r,i,n),yl=o._sqlite3__wasm_vfs_create_file=(e,t,r,i)=>(yl=o._sqlite3__wasm_vfs_create_file=g.sqlite3__wasm_vfs_create_file)(e,t,r,i),vl=o._sqlite3__wasm_posix_create_file=(e,t,r)=>(vl=o._sqlite3__wasm_posix_create_file=g.sqlite3__wasm_posix_create_file)(e,t,r),wl=o._sqlite3__wasm_kvvfsMakeKeyOnPstack=(e,t)=>(wl=o._sqlite3__wasm_kvvfsMakeKeyOnPstack=g.sqlite3__wasm_kvvfsMakeKeyOnPstack)(e,t),El=o._sqlite3__wasm_kvvfs_methods=()=>(El=o._sqlite3__wasm_kvvfs_methods=g.sqlite3__wasm_kvvfs_methods)(),xl=o._sqlite3__wasm_vtab_config=(e,t,r)=>(xl=o._sqlite3__wasm_vtab_config=g.sqlite3__wasm_vtab_config)(e,t,r),Sl=o._sqlite3__wasm_db_config_ip=(e,t,r,i)=>(Sl=o._sqlite3__wasm_db_config_ip=g.sqlite3__wasm_db_config_ip)(e,t,r,i),Al=o._sqlite3__wasm_db_config_pii=(e,t,r,i,n)=>(Al=o._sqlite3__wasm_db_config_pii=g.sqlite3__wasm_db_config_pii)(e,t,r,i,n),Il=o._sqlite3__wasm_db_config_s=(e,t,r)=>(Il=o._sqlite3__wasm_db_config_s=g.sqlite3__wasm_db_config_s)(e,t,r),kl=o._sqlite3__wasm_config_i=(e,t)=>(kl=o._sqlite3__wasm_config_i=g.sqlite3__wasm_config_i)(e,t),Tl=o._sqlite3__wasm_config_ii=(e,t,r)=>(Tl=o._sqlite3__wasm_config_ii=g.sqlite3__wasm_config_ii)(e,t,r),Fl=o._sqlite3__wasm_config_j=(e,t)=>(Fl=o._sqlite3__wasm_config_j=g.sqlite3__wasm_config_j)(e,t),Ol=o._sqlite3__wasm_qfmt_token=(e,t)=>(Ol=o._sqlite3__wasm_qfmt_token=g.sqlite3__wasm_qfmt_token)(e,t),Pl=o._sqlite3__wasm_init_wasmfs=e=>(Pl=o._sqlite3__wasm_init_wasmfs=g.sqlite3__wasm_init_wasmfs)(e),Ll=o._sqlite3__wasm_test_intptr=e=>(Ll=o._sqlite3__wasm_test_intptr=g.sqlite3__wasm_test_intptr)(e),Cl=o._sqlite3__wasm_test_voidptr=e=>(Cl=o._sqlite3__wasm_test_voidptr=g.sqlite3__wasm_test_voidptr)(e),Dl=o._sqlite3__wasm_test_int64_max=()=>(Dl=o._sqlite3__wasm_test_int64_max=g.sqlite3__wasm_test_int64_max)(),Rl=o._sqlite3__wasm_test_int64_min=()=>(Rl=o._sqlite3__wasm_test_int64_min=g.sqlite3__wasm_test_int64_min)(),Nl=o._sqlite3__wasm_test_int64_times2=e=>(Nl=o._sqlite3__wasm_test_int64_times2=g.sqlite3__wasm_test_int64_times2)(e),Ml=o._sqlite3__wasm_test_int64_minmax=(e,t)=>(Ml=o._sqlite3__wasm_test_int64_minmax=g.sqlite3__wasm_test_int64_minmax)(e,t),jl=o._sqlite3__wasm_test_int64ptr=e=>(jl=o._sqlite3__wasm_test_int64ptr=g.sqlite3__wasm_test_int64ptr)(e),Bl=o._sqlite3__wasm_test_stack_overflow=e=>(Bl=o._sqlite3__wasm_test_stack_overflow=g.sqlite3__wasm_test_stack_overflow)(e),zl=o._sqlite3__wasm_test_str_hello=e=>(zl=o._sqlite3__wasm_test_str_hello=g.sqlite3__wasm_test_str_hello)(e),Ul=o._sqlite3__wasm_SQLTester_strglob=(e,t)=>(Ul=o._sqlite3__wasm_SQLTester_strglob=g.sqlite3__wasm_SQLTester_strglob)(e,t),jt=o._malloc=e=>(jt=o._malloc=g.malloc)(e),Wl=o._free=e=>(Wl=o._free=g.free)(e),Ql=o._realloc=(e,t)=>(Ql=o._realloc=g.realloc)(e,t),Bt=(e,t)=>(Bt=g.emscripten_builtin_memalign)(e,t),Hl=()=>(Hl=g.stackSave)(),Vl=e=>(Vl=g.stackRestore)(e),Gl=e=>(Gl=g.stackAlloc)(e);o.wasmMemory=Le;var tt;Qe=function e(){tt||zt(),tt||(Qe=e)};function zt(){if(Me>0||(Yt(),Me>0))return;function e(){tt||(tt=!0,o.calledRun=!0,!wt&&(Zt(),Se(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),er()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return zt(),o.postRun||(o.postRun=[]),o.postRun.push(function(e){"use strict";"use strict";if(globalThis.sqlite3ApiBootstrap=function t(r=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;let i=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:(()=>typeof e<"u"&&e.HEAPU64?!0:!!globalThis.BigInt64Array)(),debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},r||{});Object.assign(i,{allocExportName:i.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:i.useStdAlloc?"free":"sqlite3_free",reallocExportName:i.useStdAlloc?"realloc":"sqlite3_realloc"},i),["exports","memory","wasmfsOpfsDir"].forEach(a=>{typeof i[a]=="function"&&(i[a]=i[a]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;let n=Object.create(null),s=Object.create(null),m=a=>n.sqlite3_js_rc_str&&n.sqlite3_js_rc_str(a)||"Unknown result code #"+a,h=a=>typeof a=="number"&&a===(a|0);class P extends Error{constructor(..._){let c;if(_.length)if(h(_[0]))if(c=_[0],_.length===1)super(m(_[0]));else{let q=m(c);typeof _[1]=="object"?super(q,_[1]):(_[0]=q+":",super(_.join(" ")))}else _.length===2&&typeof _[1]=="object"?super(..._):super(_.join(" "));this.resultCode=c||n.SQLITE_ERROR,this.name="SQLite3Error"}}P.toss=(...a)=>{throw new P(...a)};let D=P.toss;i.wasmfsOpfsDir&&!/^\/[^/]+$/.test(i.wasmfsOpfsDir)&&D("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");let W=a=>typeof a!="bigint"&&a===(a|0)&&a<=2147483647&&a>=-2147483648,z=function a(_){return a._max||(a._max=BigInt("0x7fffffffffffffff"),a._min=~a._max),_>=a._min&&_<=a._max},Q=a=>a>=-0x7fffffffn-1n&&a<=0x7fffffffn,A=function a(_){return a._min||(a._min=Number.MIN_SAFE_INTEGER,a._max=Number.MAX_SAFE_INTEGER),_>=a._min&&_<=a._max},k=a=>a&&a.constructor&&W(a.constructor.BYTES_PER_ELEMENT)?a:!1,F=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,E=a=>a.buffer instanceof F,b=(a,_,c)=>E(a)?a.slice(_,c):a.subarray(_,c),O=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),R=a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),N=a=>O(a)||D("Value is not of a supported TypedArray type."),w=new TextDecoder("utf-8"),U=function(a,_,c){return w.decode(b(a,_,c))},u=function(a){return R(a)?U(a instanceof ArrayBuffer?new Uint8Array(a):a):Array.isArray(a)?a.join(""):(s.isPtr(a)&&(a=s.cstrToJs(a)),a)};class d extends Error{constructor(..._){_.length===2&&typeof _[1]=="object"?super(..._):_.length?super(_.join(" ")):super("Allocation failed."),this.resultCode=n.SQLITE_NOMEM,this.name="WasmAllocError"}}d.toss=(...a)=>{throw new d(...a)},Object.assign(n,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(a,_,c,q,B,$,ie,Z,oe)=>{},sqlite3_create_function:(a,_,c,q,B,$,ie,Z)=>{},sqlite3_create_window_function:(a,_,c,q,B,$,ie,Z,oe,ce)=>{},sqlite3_prepare_v3:(a,_,c,q,B,$)=>{},sqlite3_prepare_v2:(a,_,c,q,B)=>{},sqlite3_exec:(a,_,c,q,B)=>{},sqlite3_randomness:(a,_)=>{}});let x={affirmBindableTypedArray:N,flexibleString:u,bigIntFits32:Q,bigIntFits64:z,bigIntFitsDouble:A,isBindableTypedArray:O,isInt32:W,isSQLableTypedArray:R,isTypedArray:k,typedArrayToString:U,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:E,toss:function(...a){throw new Error(a.join(" "))},toss3:D,typedArrayPart:b,affirmDbHeader:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));let _="SQLite format 3";_.length>a.byteLength&&D("Input does not contain an SQLite3 database header.");for(let c=0;c<_.length;++c)_.charCodeAt(c)!==a[c]&&D("Input does not contain an SQLite3 database header.")},affirmIsDb:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));let _=a.byteLength;(_<512||_%512!==0)&&D("Byte array size",_,"is invalid for an SQLite3 db."),x.affirmDbHeader(a)}};Object.assign(s,{ptrSizeof:i.wasmPtrSizeof||4,ptrIR:i.wasmPtrIR||"i32",bigIntEnabled:!!i.bigIntEnabled,exports:i.exports||D("Missing API config.exports (WASM module exports)."),memory:i.memory||i.exports.memory||D("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),s.allocFromTypedArray=function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a)),N(a);let _=s.alloc(a.byteLength||1);return s.heapForSize(a.constructor).set(a.byteLength?a:[0],_),_};{let a=i.allocExportName,_=i.deallocExportName,c=i.reallocExportName;for(let q of[a,_,c])s.exports[q]instanceof Function||D("Missing required exports[",q,"] function.");s.alloc=function q(B){return q.impl(B)||d.toss("Failed to allocate",B," bytes.")},s.alloc.impl=s.exports[a],s.realloc=function q(B,$){let ie=q.impl(B,$);return $?ie||d.toss("Failed to reallocate",$," bytes."):0},s.realloc.impl=s.exports[c],s.dealloc=s.exports[_]}s.compileOptionUsed=function a(_){if(arguments.length){if(Array.isArray(_)){let c={};return _.forEach(q=>{c[q]=n.sqlite3_compileoption_used(q)}),c}else if(typeof _=="object")return Object.keys(_).forEach(c=>{_[c]=n.sqlite3_compileoption_used(c)}),_}else{if(a._result)return a._result;a._opt||(a._rx=/^([^=]+)=(.+)/,a._rxInt=/^-?\d+$/,a._opt=function(ie,Z){let oe=a._rx.exec(ie);Z[0]=oe?oe[1]:ie,Z[1]=oe?a._rxInt.test(oe[2])?+oe[2]:oe[2]:!0});let c={},q=[0,0],B=0,$;for(;$=n.sqlite3_compileoption_get(B++);)a._opt($,q),c[q[0]]=q[1];return a._result=c}return typeof _=="string"?!!n.sqlite3_compileoption_used(_):!1},s.pstack=Object.assign(Object.create(null),{restore:s.exports.sqlite3__wasm_pstack_restore,alloc:function(a){return typeof a=="string"&&!(a=s.sizeofIR(a))&&d.toss("Invalid value for pstack.alloc(",arguments[0],")"),s.exports.sqlite3__wasm_pstack_alloc(a)||d.toss("Could not allocate",a,"bytes from the pstack.")},allocChunks:function(a,_){typeof _=="string"&&!(_=s.sizeofIR(_))&&d.toss("Invalid size value for allocChunks(",arguments[1],")");let c=s.pstack.alloc(a*_),q=[],B=0,$=0;for(;B<a;++B,$+=_)q.push(c+$);return q},allocPtr:(a=1,_=!0)=>a===1?s.pstack.alloc(_?8:s.ptrSizeof):s.pstack.allocChunks(a,_?8:s.ptrSizeof),call:function(a){let _=s.pstack.pointer;try{return a(p)}finally{s.pstack.restore(_)}}}),Object.defineProperties(s.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:s.exports.sqlite3__wasm_pstack_remaining}}),n.sqlite3_randomness=(...a)=>{if(a.length===1&&x.isTypedArray(a[0])&&a[0].BYTES_PER_ELEMENT===1){let _=a[0];if(_.byteLength===0)return s.exports.sqlite3_randomness(0,0),_;let c=s.pstack.pointer;try{let q=_.byteLength,B=0,$=s.exports.sqlite3_randomness,ie=s.heap8u(),Z=q<512?q:512,oe=s.pstack.alloc(Z);do{let ce=q>Z?Z:q;$(ce,oe),_.set(b(ie,oe,oe+ce),B),q-=ce,B+=ce}while(q>0)}catch(q){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",q)}finally{s.pstack.restore(c)}return _}s.exports.sqlite3_randomness(...a)};let L;if(n.sqlite3_wasmfs_opfs_dir=function(){if(L!==void 0)return L;let a=i.wasmfsOpfsDir;if(!a||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return L="";try{return a&&s.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],a)===0?L=a:L=""}catch{return L=""}},n.sqlite3_wasmfs_filename_is_persistent=function(a){let _=n.sqlite3_wasmfs_opfs_dir();return _&&a?a.startsWith(_+"/"):!1},n.sqlite3_js_db_uses_vfs=function(a,_,c=0){try{let q=n.sqlite3_vfs_find(_);return q?a?q===n.sqlite3_js_db_vfs(a,c)?q:!1:q===n.sqlite3_vfs_find(0)?q:!1:!1}catch{return!1}},n.sqlite3_js_vfs_list=function(){let a=[],_=n.sqlite3_vfs_find(0);for(;_;){let c=new n.sqlite3_vfs(_);a.push(s.cstrToJs(c.$zName)),_=c.$pNext,c.dispose()}return a},n.sqlite3_js_db_export=function(a,_=0){a=s.xWrap.testConvertArg("sqlite3*",a),a||D("Invalid sqlite3* argument."),s.bigIntEnabled||D("BigInt64 support is not enabled.");let c=s.scopedAllocPush(),q;try{let B=s.scopedAlloc(8+s.ptrSizeof),$=B+8,ie=_?s.isPtr(_)?_:s.scopedAllocCString(""+_):0,Z=s.exports.sqlite3__wasm_db_serialize(a,ie,$,B,0);Z&&D("Database serialization failed with code",p.capi.sqlite3_js_rc_str(Z)),q=s.peekPtr($);let oe=s.peek(B,"i64");return Z=oe?s.heap8u().slice(q,q+Number(oe)):new Uint8Array,Z}finally{q&&s.exports.sqlite3_free(q),s.scopedAllocPop(c)}},n.sqlite3_js_db_vfs=(a,_=0)=>x.sqlite3__wasm_db_vfs(a,_),n.sqlite3_js_aggregate_context=(a,_)=>n.sqlite3_aggregate_context(a,_)||(_?d.toss("Cannot allocate",_,"bytes for sqlite3_aggregate_context()"):0),n.sqlite3_js_posix_create_file=function(a,_,c){let q;_&&s.isPtr(_)?q=_:_ instanceof ArrayBuffer||_ instanceof Uint8Array?(q=s.allocFromTypedArray(_),(arguments.length<3||!x.isInt32(c)||c<0)&&(c=_.byteLength)):P.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!x.isInt32(c)||c<0)&&P.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");let B=x.sqlite3__wasm_posix_create_file(a,q,c);B&&P.toss("Creation of file failed with sqlite3 result code",n.sqlite3_js_rc_str(B))}finally{s.dealloc(q)}},n.sqlite3_js_vfs_create_file=function(a,_,c,q){i.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let B;c?(s.isPtr(c)?B=c:c instanceof ArrayBuffer&&(c=new Uint8Array(c)),c instanceof Uint8Array?(B=s.allocFromTypedArray(c),(arguments.length<4||!x.isInt32(q)||q<0)&&(q=c.byteLength)):P.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):B=0,(!x.isInt32(q)||q<0)&&(s.dealloc(B),P.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{let $=x.sqlite3__wasm_vfs_create_file(a,_,B,q);$&&P.toss("Creation of file failed with sqlite3 result code",n.sqlite3_js_rc_str($))}finally{s.dealloc(B)}},n.sqlite3_js_sql_to_string=a=>{if(typeof a=="string")return a;let _=u(v);return _===v?void 0:_},x.isUIThread()){let a=function(_){let c=Object.create(null);return c.prefix="kvvfs-"+_,c.stores=[],(_==="session"||_==="")&&c.stores.push(globalThis.sessionStorage),(_==="local"||_==="")&&c.stores.push(globalThis.localStorage),c};n.sqlite3_js_kvvfs_clear=function(_=""){let c=0,q=a(_);return q.stores.forEach(B=>{let $=[],ie;for(ie=0;ie<B.length;++ie){let Z=B.key(ie);Z.startsWith(q.prefix)&&$.push(Z)}$.forEach(Z=>B.removeItem(Z)),c+=$.length}),c},n.sqlite3_js_kvvfs_size=function(_=""){let c=0,q=a(_);return q.stores.forEach(B=>{let $;for($=0;$<B.length;++$){let ie=B.key($);ie.startsWith(q.prefix)&&(c+=ie.length,c+=B.getItem(ie).length)}}),c*2}}n.sqlite3_db_config=function(a,_,...c){switch(this.s||(this.s=s.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=s.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=s.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),_){case n.SQLITE_DBCONFIG_ENABLE_FKEY:case n.SQLITE_DBCONFIG_ENABLE_TRIGGER:case n.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case n.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case n.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case n.SQLITE_DBCONFIG_ENABLE_QPSG:case n.SQLITE_DBCONFIG_TRIGGER_EQP:case n.SQLITE_DBCONFIG_RESET_DATABASE:case n.SQLITE_DBCONFIG_DEFENSIVE:case n.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case n.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case n.SQLITE_DBCONFIG_DQS_DML:case n.SQLITE_DBCONFIG_DQS_DDL:case n.SQLITE_DBCONFIG_ENABLE_VIEW:case n.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case n.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case n.SQLITE_DBCONFIG_STMT_SCANSTATUS:case n.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(a,_,c[0],c[1]||0);case n.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(a,_,c[0],c[1],c[2]);case n.SQLITE_DBCONFIG_MAINDBNAME:return this.s(a,_,c[0]);default:return n.SQLITE_MISUSE}}.bind(Object.create(null)),n.sqlite3_value_to_js=function(a,_=!0){let c,q=n.sqlite3_value_type(a);switch(q){case n.SQLITE_INTEGER:s.bigIntEnabled?(c=n.sqlite3_value_int64(a),x.bigIntFitsDouble(c)&&(c=Number(c))):c=n.sqlite3_value_double(a);break;case n.SQLITE_FLOAT:c=n.sqlite3_value_double(a);break;case n.SQLITE_TEXT:c=n.sqlite3_value_text(a);break;case n.SQLITE_BLOB:{let B=n.sqlite3_value_bytes(a),$=n.sqlite3_value_blob(a);B&&!$&&p.WasmAllocError.toss("Cannot allocate memory for blob argument of",B,"byte(s)"),c=B?s.heap8u().slice($,$+Number(B)):null;break}case n.SQLITE_NULL:c=null;break;default:_&&D(n.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",q),c=void 0}return c},n.sqlite3_values_to_js=function(a,_,c=!0){let q,B=[];for(q=0;q<a;++q)B.push(n.sqlite3_value_to_js(s.peekPtr(_+s.ptrSizeof*q),c));return B},n.sqlite3_result_error_js=function(a,_){_ instanceof d?n.sqlite3_result_error_nomem(a):n.sqlite3_result_error(a,""+_,-1)},n.sqlite3_result_js=function(a,_){if(_ instanceof Error){n.sqlite3_result_error_js(a,_);return}try{switch(typeof _){case"undefined":break;case"boolean":n.sqlite3_result_int(a,_?1:0);break;case"bigint":x.bigIntFits32(_)?n.sqlite3_result_int(a,Number(_)):x.bigIntFitsDouble(_)?n.sqlite3_result_double(a,Number(_)):s.bigIntEnabled?x.bigIntFits64(_)?n.sqlite3_result_int64(a,_):D("BigInt value",_.toString(),"is too BigInt for int64."):D("BigInt value",_.toString(),"is too BigInt.");break;case"number":{let c;x.isInt32(_)?c=n.sqlite3_result_int:s.bigIntEnabled&&Number.isInteger(_)&&x.bigIntFits64(BigInt(_))?c=n.sqlite3_result_int64:c=n.sqlite3_result_double,c(a,_);break}case"string":{let[c,q]=s.allocCString(_,!0);n.sqlite3_result_text(a,c,q,n.SQLITE_WASM_DEALLOC);break}case"object":if(_===null){n.sqlite3_result_null(a);break}else if(x.isBindableTypedArray(_)){let c=s.allocFromTypedArray(_);n.sqlite3_result_blob(a,c,_.byteLength,n.SQLITE_WASM_DEALLOC);break}default:D("Don't not how to handle this UDF result value:",typeof _,_)}}catch(c){n.sqlite3_result_error_js(a,c)}},n.sqlite3_column_js=function(a,_,c=!0){let q=n.sqlite3_column_value(a,_);return q===0?void 0:n.sqlite3_value_to_js(q,c)};let C=function(a,_,c){c=n[c],this.ptr?s.pokePtr(this.ptr,0):this.ptr=s.allocPtr();let q=c(a,_,this.ptr);if(q)return P.toss(q,arguments[2]+"() failed with code "+q);let B=s.peekPtr(this.ptr);return B?n.sqlite3_value_to_js(B,!0):void 0}.bind(Object.create(null));n.sqlite3_preupdate_new_js=(a,_)=>C(a,_,"sqlite3_preupdate_new"),n.sqlite3_preupdate_old_js=(a,_)=>C(a,_,"sqlite3_preupdate_old"),n.sqlite3changeset_new_js=(a,_)=>C(a,_,"sqlite3changeset_new"),n.sqlite3changeset_old_js=(a,_)=>C(a,_,"sqlite3changeset_old");let p={WasmAllocError:d,SQLite3Error:P,capi:n,util:x,wasm:s,config:i,version:Object.create(null),client:void 0,asyncPostInit:async function a(){if(a.isReady instanceof Promise)return a.isReady;let _=t.initializersAsync;delete t.initializersAsync;let c=async()=>(p.__isUnderTest||(delete p.util,delete p.StructBinder),p),q=$=>{throw i.error("an async sqlite3 initializer failed:",$),$};if(!_||!_.length)return a.isReady=c().catch(q);_=_.map($=>$ instanceof Function?async ie=>$(p):$),_.push(c);let B=Promise.resolve(p);for(;_.length;)B=B.then(_.shift());return a.isReady=B.catch(q)},scriptInfo:void 0};try{t.initializers.forEach(a=>{a(p)})}catch(a){throw console.error("sqlite3 bootstrap initializer threw:",a),a}return delete t.initializers,t.sqlite3=p,p},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){"use strict";t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);let r=(...u)=>{throw new Error(u.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});let i=t.pointerIR||"i32",n=t.ptrSizeof=i==="i32"?4:i==="i64"?8:r("Unhandled ptrSizeof:",i),s=Object.create(null);s.heapSize=0,s.memory=null,s.freeFuncIndexes=[],s.scopedAlloc=[],s.utf8Decoder=new TextDecoder,s.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=u=>{switch(u){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return n;default:return(""+u).endsWith("*")?n:void 0}};let m=function(){if(!s.memory)s.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(s.heapSize===s.memory.buffer.byteLength)return s;let u=s.memory.buffer;return s.HEAP8=new Int8Array(u),s.HEAP8U=new Uint8Array(u),s.HEAP16=new Int16Array(u),s.HEAP16U=new Uint16Array(u),s.HEAP32=new Int32Array(u),s.HEAP32U=new Uint32Array(u),t.bigIntEnabled&&(s.HEAP64=new BigInt64Array(u),s.HEAP64U=new BigUint64Array(u)),s.HEAP32F=new Float32Array(u),s.HEAP64F=new Float64Array(u),s.heapSize=u.byteLength,s};t.heap8=()=>m().HEAP8,t.heap8u=()=>m().HEAP8U,t.heap16=()=>m().HEAP16,t.heap16u=()=>m().HEAP16U,t.heap32=()=>m().HEAP32,t.heap32u=()=>m().HEAP32U,t.heapForSize=function(u,d=!0){let x,L=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:m();switch(u){case Int8Array:return L.HEAP8;case Uint8Array:return L.HEAP8U;case Int16Array:return L.HEAP16;case Uint16Array:return L.HEAP16U;case Int32Array:return L.HEAP32;case Uint32Array:return L.HEAP32U;case 8:return d?L.HEAP8U:L.HEAP8;case 16:return d?L.HEAP16U:L.HEAP16;case 32:return d?L.HEAP32U:L.HEAP32;case 64:if(L.HEAP64)return d?L.HEAP64U:L.HEAP64;break;default:if(t.bigIntEnabled){if(u===globalThis.BigUint64Array)return L.HEAP64U;if(u===globalThis.BigInt64Array)return L.HEAP64;break}}r("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(u){let d=t.functionTable();return u<d.length?d.get(u):void 0},t.jsFuncToWasm=function u(d,x){if(u._||(u._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(p,a,_){_<128?p[a](_):p[a](_%128|128,_>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(p){let a=u._.rxJSig.exec(p);return a?a[2]:p.substr(1)},letterType:p=>u._.sigTypes[p]||r("Invalid signature letter:",p),pushSigType:(p,a)=>p.push(u._.typeCodes[u._.letterType(a)])}),typeof d=="string"){let p=x;x=d,d=p}let L=u._.sigParams(x),C=[1,96];u._.uleb128Encode(C,"push",L.length);for(let p of L)u._.pushSigType(C,p);return x[0]==="v"?C.push(0):(C.push(1),u._.pushSigType(C,x[0])),u._.uleb128Encode(C,"unshift",C.length),C.unshift(0,97,115,109,1,0,0,0,1),C.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(C)),{e:{f:d}}).exports.f};let h=function(d,x,L){if(L&&!s.scopedAlloc.length&&r("No scopedAllocPush() scope is active."),typeof d=="string"){let _=x;x=d,d=_}(typeof x!="string"||!(d instanceof Function))&&r("Invalid arguments: expecting (function,signature) or (signature,function).");let C=t.functionTable(),p=C.length,a;for(;s.freeFuncIndexes.length&&(a=s.freeFuncIndexes.pop(),C.get(a));){a=null;continue}a||(a=p,C.grow(1));try{return C.set(a,d),L&&s.scopedAlloc[s.scopedAlloc.length-1].push(a),a}catch(_){if(!(_ instanceof TypeError))throw a===p&&s.freeFuncIndexes.push(p),_}try{let _=t.jsFuncToWasm(d,x);C.set(a,_),L&&s.scopedAlloc[s.scopedAlloc.length-1].push(a)}catch(_){throw a===p&&s.freeFuncIndexes.push(p),_}return a};t.installFunction=(u,d)=>h(u,d,!1),t.scopedInstallFunction=(u,d)=>h(u,d,!0),t.uninstallFunction=function(u){if(!u&&u!==0)return;let d=s.freeFuncIndexes,x=t.functionTable();d.push(u);let L=x.get(u);return x.set(u,null),L},t.peek=function(d,x="i8"){x.endsWith("*")&&(x=i);let L=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:m(),C=Array.isArray(d)?[]:void 0,p;do{switch(C&&(d=arguments[0].shift()),x){case"i1":case"i8":p=L.HEAP8[d>>0];break;case"i16":p=L.HEAP16[d>>1];break;case"i32":p=L.HEAP32[d>>2];break;case"float":case"f32":p=L.HEAP32F[d>>2];break;case"double":case"f64":p=Number(L.HEAP64F[d>>3]);break;case"i64":if(t.bigIntEnabled){p=BigInt(L.HEAP64[d>>3]);break}default:r("Invalid type for peek():",x)}C&&C.push(p)}while(C&&arguments[0].length);return C||p},t.poke=function(u,d,x="i8"){x.endsWith("*")&&(x=i);let L=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:m();for(let C of Array.isArray(u)?u:[u])switch(x){case"i1":case"i8":L.HEAP8[C>>0]=d;continue;case"i16":L.HEAP16[C>>1]=d;continue;case"i32":L.HEAP32[C>>2]=d;continue;case"float":case"f32":L.HEAP32F[C>>2]=d;continue;case"double":case"f64":L.HEAP64F[C>>3]=d;continue;case"i64":if(L.HEAP64){L.HEAP64[C>>3]=BigInt(d);continue}default:r("Invalid type for poke(): "+x)}return this},t.peekPtr=(...u)=>t.peek(u.length===1?u[0]:u,i),t.pokePtr=(u,d=0)=>t.poke(u,d,i),t.peek8=(...u)=>t.peek(u.length===1?u[0]:u,"i8"),t.poke8=(u,d)=>t.poke(u,d,"i8"),t.peek16=(...u)=>t.peek(u.length===1?u[0]:u,"i16"),t.poke16=(u,d)=>t.poke(u,d,"i16"),t.peek32=(...u)=>t.peek(u.length===1?u[0]:u,"i32"),t.poke32=(u,d)=>t.poke(u,d,"i32"),t.peek64=(...u)=>t.peek(u.length===1?u[0]:u,"i64"),t.poke64=(u,d)=>t.poke(u,d,"i64"),t.peek32f=(...u)=>t.peek(u.length===1?u[0]:u,"f32"),t.poke32f=(u,d)=>t.poke(u,d,"f32"),t.peek64f=(...u)=>t.peek(u.length===1?u[0]:u,"f64"),t.poke64f=(u,d)=>t.poke(u,d,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=u=>typeof u=="number"&&u===(u|0)&&u>=0,t.isPtr=t.isPtr32,t.cstrlen=function(u){if(!u||!t.isPtr(u))return null;let d=m().HEAP8U,x=u;for(;d[x]!==0;++x);return x-u};let P=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,D=function(u,d,x){return s.utf8Decoder.decode(u.buffer instanceof P?u.slice(d,x):u.subarray(d,x))};t.cstrToJs=function(u){let d=t.cstrlen(u);return d?D(m().HEAP8U,u,u+d):d===null?d:""},t.jstrlen=function(u){if(typeof u!="string")return null;let d=u.length,x=0;for(let L=0;L<d;++L){let C=u.charCodeAt(L);C>=55296&&C<=57343&&(C=65536+((C&1023)<<10)|u.charCodeAt(++L)&1023),C<=127?++x:C<=2047?x+=2:C<=65535?x+=3:x+=4}return x},t.jstrcpy=function(u,d,x=0,L=-1,C=!0){if((!d||!(d instanceof Int8Array)&&!(d instanceof Uint8Array))&&r("jstrcpy() target must be an Int8Array or Uint8Array."),L<0&&(L=d.length-x),!(L>0)||!(x>=0))return 0;let p=0,a=u.length,_=x,c=x+L-(C?1:0);for(;p<a&&x<c;++p){let q=u.charCodeAt(p);if(q>=55296&&q<=57343&&(q=65536+((q&1023)<<10)|u.charCodeAt(++p)&1023),q<=127){if(x>=c)break;d[x++]=q}else if(q<=2047){if(x+1>=c)break;d[x++]=192|q>>6,d[x++]=128|q&63}else if(q<=65535){if(x+2>=c)break;d[x++]=224|q>>12,d[x++]=128|q>>6&63,d[x++]=128|q&63}else{if(x+3>=c)break;d[x++]=240|q>>18,d[x++]=128|q>>12&63,d[x++]=128|q>>6&63,d[x++]=128|q&63}}return C&&(d[x++]=0),x-_},t.cstrncpy=function(u,d,x){if((!u||!d)&&r("cstrncpy() does not accept NULL strings."),x<0)x=t.cstrlen(strPtr)+1;else if(!(x>0))return 0;let L=t.heap8u(),C=0,p;for(;C<x&&(p=L[d+C]);++C)L[u+C]=p;return C<x&&(L[u+C++]=0),C},t.jstrToUintArray=(u,d=!1)=>s.utf8Encoder.encode(d?u+"\0":u);let W=(u,d)=>{(!(u.alloc instanceof Function)||!(u.dealloc instanceof Function))&&r("Object is missing alloc() and/or dealloc() function(s)","required by",d+"().")},z=function(u,d,x,L){if(W(t,L),typeof u!="string")return null;{let C=s.utf8Encoder.encode(u),p=x(C.length+1),a=m().HEAP8U;return a.set(C,p),a[p+C.length]=0,d?[p,C.length]:p}};t.allocCString=(u,d=!1)=>z(u,d,t.alloc,"allocCString()"),t.scopedAllocPush=function(){W(t,"scopedAllocPush");let u=[];return s.scopedAlloc.push(u),u},t.scopedAllocPop=function(u){W(t,"scopedAllocPop");let d=arguments.length?s.scopedAlloc.indexOf(u):s.scopedAlloc.length-1;d<0&&r("Invalid state object for scopedAllocPop()."),arguments.length===0&&(u=s.scopedAlloc[d]),s.scopedAlloc.splice(d,1);for(let x;x=u.pop();)t.functionEntry(x)?t.uninstallFunction(x):t.dealloc(x)},t.scopedAlloc=function(u){s.scopedAlloc.length||r("No scopedAllocPush() scope is active.");let d=t.alloc(u);return s.scopedAlloc[s.scopedAlloc.length-1].push(d),d},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>s.scopedAlloc.length,set:()=>r("The 'active' property is read-only.")}),t.scopedAllocCString=(u,d=!1)=>z(u,d,t.scopedAlloc,"scopedAllocCString()");let Q=function(u,d){let x=t[u?"scopedAlloc":"alloc"]((d.length+1)*t.ptrSizeof),L=0;return d.forEach(C=>{t.pokePtr(x+t.ptrSizeof*L++,t[u?"scopedAllocCString":"allocCString"](""+C))}),t.pokePtr(x+t.ptrSizeof*L,0),x};t.scopedAllocMainArgv=u=>Q(!0,u),t.allocMainArgv=u=>Q(!1,u),t.cArgvToJs=(u,d)=>{let x=[];for(let L=0;L<u;++L){let C=t.peekPtr(d+t.ptrSizeof*L);x.push(C?t.cstrToJs(C):null)}return x},t.scopedAllocCall=function(u){t.scopedAllocPush();try{return u()}finally{t.scopedAllocPop()}};let A=function(u,d,x){W(t,x);let L=d?"i64":i,C=t[x](u*(d?8:n));if(t.poke(C,0,L),u===1)return C;let p=[C];for(let a=1;a<u;++a)C+=d?8:n,p[a]=C,t.poke(C,0,L);return p};t.allocPtr=(u=1,d=!0)=>A(u,d,"alloc"),t.scopedAllocPtr=(u=1,d=!0)=>A(u,d,"scopedAlloc"),t.xGet=function(u){return t.exports[u]||r("Cannot find exported symbol:",u)};let k=(u,d)=>r(u+"() requires",d,"argument(s).");t.xCall=function(u,...d){let x=u instanceof Function?u:t.xGet(u);return x instanceof Function||r("Exported symbol",u,"is not a function."),x.length!==d.length&&k(x===u?x.name:u,x.length),arguments.length===2&&Array.isArray(arguments[1])?x.apply(null,arguments[1]):x.apply(null,d)},s.xWrap=Object.create(null),s.xWrap.convert=Object.create(null),s.xWrap.convert.arg=new Map,s.xWrap.convert.result=new Map;let F=s.xWrap.convert.arg,E=s.xWrap.convert.result;t.bigIntEnabled&&F.set("i64",u=>BigInt(u));let b=i==="i32"?u=>u|0:u=>BigInt(u)|BigInt(0);F.set("i32",b).set("i16",u=>(u|0)&65535).set("i8",u=>(u|0)&255).set("f32",u=>Number(u).valueOf()).set("float",F.get("f32")).set("f64",F.get("f32")).set("double",F.get("f64")).set("int",F.get("i32")).set("null",u=>u).set(null,F.get("null")).set("**",b).set("*",b),E.set("*",b).set("pointer",b).set("number",u=>Number(u)).set("void",u=>{}).set("null",u=>u).set(null,E.get("null"));{let u=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&u.push("i64");let d=F.get(i);for(let x of u)F.set(x+"*",d),E.set(x+"*",d),E.set(x,F.get(x)||r("Missing arg converter:",x))}let O=function(u){return typeof u=="string"?t.scopedAllocCString(u):u?b(u):null};F.set("string",O).set("utf8",O).set("pointer",O),E.set("string",u=>t.cstrToJs(u)).set("utf8",E.get("string")).set("string:dealloc",u=>{try{return u?t.cstrToJs(u):null}finally{t.dealloc(u)}}).set("utf8:dealloc",E.get("string:dealloc")).set("json",u=>JSON.parse(t.cstrToJs(u))).set("json:dealloc",u=>{try{return u?JSON.parse(t.cstrToJs(u)):null}finally{t.dealloc(u)}});let R=class{constructor(u){this.name=u.name||"unnamed adapter"}convertArg(u,d,x){r("AbstractArgAdapter must be subclassed.")}};F.FuncPtrAdapter=class Oe extends R{constructor(d){super(d),F.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",d),this.name=d.name||"unnamed",this.signature=d.signature,d.contextKey instanceof Function&&(this.contextKey=d.contextKey,d.bindScope||(d.bindScope="context")),this.bindScope=d.bindScope||r("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Oe.bindScopes.indexOf(d.bindScope)<0&&r("Invalid options.bindScope ("+d.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Oe.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=d.callProxy instanceof Function?d.callProxy:void 0}contextKey(d,x){return this}contextMap(d){let x=this.__cmap||(this.__cmap=new Map),L=x.get(d);return L===void 0&&x.set(d,L=[]),L}convertArg(d,x,L){let C=this.singleton;if(!C&&this.isContext&&(C=this.contextMap(this.contextKey(x,L))),C&&C[0]===d)return C[1];if(d instanceof Function){this.callProxy&&(d=this.callProxy(d));let p=h(d,this.signature,this.isTransient);if(Oe.debugFuncInstall&&Oe.debugOut("FuncPtrAdapter installed",this,this.contextKey(x,L),"@"+p,d),C){if(C[1]){Oe.debugFuncInstall&&Oe.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(x,L),"@"+C[1],d);try{s.scopedAlloc[s.scopedAlloc.length-1].push(C[1])}catch{}}C[0]=d,C[1]=p}return p}else if(t.isPtr(d)||d===null||d===void 0){if(C&&C[1]&&C[1]!==d){Oe.debugFuncInstall&&Oe.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(x,L),"@"+C[1],d);try{s.scopedAlloc[s.scopedAlloc.length-1].push(C[1])}catch{}C[0]=C[1]=d|0}return d||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},F.FuncPtrAdapter.warnOnUse=!1,F.FuncPtrAdapter.debugFuncInstall=!1,F.FuncPtrAdapter.debugOut=console.debug.bind(console),F.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];let N=u=>F.get(u)||r("Argument adapter not found:",u),w=u=>E.get(u)||r("Result adapter not found:",u);s.xWrap.convertArg=(u,...d)=>N(u)(...d),s.xWrap.convertArgNoCheck=(u,...d)=>F.get(u)(...d),s.xWrap.convertResult=(u,d)=>u===null?d:u?w(u)(d):void 0,s.xWrap.convertResultNoCheck=(u,d)=>u===null?d:u?E.get(u)(d):void 0,t.xWrap=function(u,d,...x){arguments.length===3&&Array.isArray(arguments[2])&&(x=arguments[2]),t.isPtr(u)&&(u=t.functionEntry(u)||r("Function pointer not found in WASM function table."));let L=u instanceof Function,C=L?u:t.xGet(u);if(L&&(u=C.name||"unnamed function"),x.length!==C.length&&k(u,C.length),d===null&&C.length===0)return C;d!=null&&w(d);for(let a of x)a instanceof R?F.set(a,(..._)=>a.convertArg(..._)):N(a);let p=s.xWrap;return C.length===0?(...a)=>a.length?k(u,C.length):p.convertResult(d,C.call(null)):function(...a){a.length!==C.length&&k(u,C.length);let _=t.scopedAllocPush();try{let c=0;for(;c<a.length;++c)a[c]=p.convertArgNoCheck(x[c],a[c],a,c);return p.convertResultNoCheck(d,C.apply(null,a))}finally{t.scopedAllocPop(_)}}};let U=function(u,d,x,L,C,p){if(typeof x=="string"){if(d===1)return p.get(x);if(d===2){if(L)L instanceof Function||r(C,"requires a function argument.");else return delete p.get(x),u;return p.set(x,L),u}}r("Invalid arguments to",C)};return t.xWrap.resultAdapter=function u(d,x){return U(u,arguments.length,d,x,"resultAdapter()",E)},t.xWrap.argAdapter=function u(d,x){return U(u,arguments.length,d,x,"argAdapter()",F)},t.xWrap.FuncPtrAdapter=F.FuncPtrAdapter,t.xCallWrapped=function(u,d,x,...L){return Array.isArray(arguments[3])&&(L=arguments[3]),t.xWrap(u,d,x||[]).apply(null,L||[])},t.xWrap.testConvertArg=s.xWrap.convertArg,t.xWrap.testConvertResult=s.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=function(t){let r=()=>fetch(t.uri,{credentials:"same-origin"}),i=this,n=function(m){if(t.wasmUtilTarget){let h=(...D)=>{throw new Error(D.join(" "))},P=t.wasmUtilTarget;if(P.module=m.module,P.instance=m.instance,P.instance.exports.memory||(P.memory=t.imports&&t.imports.env&&t.imports.env.memory||h("Missing 'memory' object!")),!P.alloc&&m.instance.exports.malloc){let D=m.instance.exports;P.alloc=function(W){return D.malloc(W)||h("Allocation of",W,"bytes failed.")},P.dealloc=function(W){D.free(W)}}i(P)}return t.onload&&t.onload(m,t),m};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(r(),t.imports||{}).then(n)}:function(){return r().then(h=>h.arrayBuffer()).then(h=>WebAssembly.instantiate(h,t.imports||{})).then(n)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(r){let i=(...f)=>{throw new Error(f.join(" "))};!(r.heap instanceof WebAssembly.Memory)&&!(r.heap instanceof Function)&&i("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(f){r[f]instanceof Function||i("Config option '"+f+"' must be a function.")});let n=t,s=r.heap instanceof Function?r.heap:()=>new Uint8Array(r.heap.buffer),m=r.alloc,h=r.dealloc,P=r.log||console.log.bind(console),D=r.memberPrefix||"",W=r.memberSuffix||"",z=r.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!r.bigIntEnabled,Q=globalThis.BigInt,A=globalThis.BigInt64Array,k=r.ptrSizeof||4,F=r.ptrIR||"i32";n.debugFlags||(n.__makeDebugFlags=function(f=null){f&&f.__flags&&(f=f.__flags);let y=function S(T){return arguments.length===0?S.__flags:(T<0?(delete S.__flags.getter,delete S.__flags.setter,delete S.__flags.alloc,delete S.__flags.dealloc):(S.__flags.getter=(1&T)!==0,S.__flags.setter=(2&T)!==0,S.__flags.alloc=(4&T)!==0,S.__flags.dealloc=(8&T)!==0),S._flags)};return Object.defineProperty(y,"__flags",{iterable:!1,writable:!1,value:Object.create(f)}),f||y(0),y},n.debugFlags=n.__makeDebugFlags());let E=function(){let f=new ArrayBuffer(2);return new DataView(f).setInt16(0,256,!0),new Int16Array(f)[0]===256}(),b=f=>f[1]==="(",O=f=>f==="p"||f==="P",R=f=>f==="P",N=f=>b(f)?"p":f[0],w=function(f){switch(N(f)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return F;case"j":return"i64";case"f":return"float";case"d":return"double"}i("Unhandled signature IR:",f)},U=A?()=>!0:()=>i("BigInt64Array is not available."),u=function(f){switch(N(f)){case"p":case"P":case"s":{switch(k){case 4:return"getInt32";case 8:return U()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return U()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}i("Unhandled DataView getter for signature:",f)},d=function(f){switch(N(f)){case"p":case"P":case"s":{switch(k){case 4:return"setInt32";case 8:return U()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return U()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}i("Unhandled DataView setter for signature:",f)},x=function(f){switch(N(f)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return U()&&Q;case"p":case"P":case"s":switch(k){case 4:return Number;case 8:return U()&&Q}break}i("Unhandled DataView set wrapper for signature:",f)},L=(f,y)=>f+"::"+y,C=function(f,y){return()=>i(L(f,y),"is read-only.")},p=new WeakMap,a="(pointer-is-external)",_=function(f,y,S){if(S||(S=p.get(y)),S){if(p.delete(y),Array.isArray(y.ondispose)){let T;for(;T=y.ondispose.shift();)try{T instanceof Function?T.call(y):T instanceof re?T.dispose():typeof T=="number"&&h(T)}catch(G){console.warn("ondispose() for",f.structName,"@",S,"threw. NOT propagating it.",G)}}else if(y.ondispose instanceof Function)try{y.ondispose()}catch(T){console.warn("ondispose() for",f.structName,"@",S,"threw. NOT propagating it.",T)}delete y.ondispose,f.debugFlags.__flags.dealloc&&P("debug.dealloc:",y[a]?"EXTERNAL":"",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+S),y[a]||h(S)}},c=f=>({configurable:!1,writable:!1,iterable:!1,value:f}),q=function(f,y,S){let T=!S;S?Object.defineProperty(y,a,c(S)):(S=m(f.structInfo.sizeof),S||i("Allocation of",f.structName,"structure failed."));try{f.debugFlags.__flags.alloc&&P("debug.alloc:",T?"":"EXTERNAL",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+S),T&&s().fill(0,S,S+f.structInfo.sizeof),p.set(y,S)}catch(G){throw _(f,y,S),G}},B=function(){let f=this.pointer;return f?new Uint8Array(s().slice(f,f+this.structInfo.sizeof)):null},ie=c(f=>D+f+W),Z=function(f,y,S=!0){let T=f.members[y];if(!T&&(D||W)){for(let G of Object.values(f.members))if(G.key===y){T=G;break}!T&&S&&i(L(f.name,y),"is not a mapped struct member.")}return T},oe=function f(y,S,T=!1){f._||(f._=Y=>Y.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));let G=Z(y.structInfo,S,!0);return T?f._(G.signature):G.signature},ce={configurable:!1,enumerable:!1,get:function(){return p.get(this)},set:()=>i("Cannot assign the 'pointer' property of a struct.")},se=c(function(){let f=[];for(let y of Object.keys(this.structInfo.members))f.push(this.memberKey(y));return f}),_e=new TextDecoder("utf-8"),pe=new TextEncoder,ye=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ge=function(f,y,S){return _e.decode(f.buffer instanceof ye?f.slice(y,S):f.subarray(y,S))},I=function(f,y,S=!1){let T=Z(f.structInfo,y,S);return T&&T.signature.length===1&&T.signature[0]==="s"?T:!1},j=function(f){f.signature!=="s"&&i("Invalid member type signature for C-string value:",JSON.stringify(f))},M=function(y,S){let T=Z(y.structInfo,S,!0);j(T);let G=y[T.key];if(!G)return null;let Y=G,ne=s();for(;ne[Y]!==0;++Y);return G===Y?"":ge(ne,G,Y)},K=function(f,...y){f.ondispose?Array.isArray(f.ondispose)||(f.ondispose=[f.ondispose]):f.ondispose=[],f.ondispose.push(...y)},H=function(f){let y=pe.encode(f),S=m(y.length+1);S||i("Allocation error while duplicating string:",f);let T=s();return T.set(y,S),T[S+y.length]=0,S},ee=function(f,y,S){let T=Z(f.structInfo,y,!0);j(T);let G=H(S);return f[T.key]=G,K(f,G),f},re=function(y,S){arguments[2]!==c&&i("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:c(y),structInfo:c(S)})};re.prototype=Object.create(null,{dispose:c(function(){_(this.constructor,this)}),lookupMember:c(function(f,y=!0){return Z(this.structInfo,f,y)}),memberToJsString:c(function(f){return M(this,f)}),memberIsString:c(function(f,y=!0){return I(this,f,y)}),memberKey:ie,memberKeys:se,memberSignature:c(function(f,y=!1){return oe(this,f,y)}),memoryDump:c(B),pointer:ce,setMemberCString:c(function(f,y){return ee(this,f,y)})}),Object.assign(re.prototype,{addOnDispose:function(...f){return K(this,...f),this}}),Object.defineProperties(re,{allocCString:c(H),isA:c(f=>f instanceof re),hasExternalPointer:c(f=>f instanceof re&&!!f[a]),memberKey:ie});let J=f=>Number.isFinite(f)||f instanceof(Q||Number),fe=function f(y,S,T){if(!f._){f._={getters:{},setters:{},sw:{}};let ve=["i","c","C","p","P","s","f","d","v()"];z&&ve.push("j"),ve.forEach(function(Ie){f._.getters[Ie]=u(Ie),f._.setters[Ie]=d(Ie),f._.sw[Ie]=x(Ie)});let $l=/^[ipPsjfdcC]$/,Kl=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;f.sigCheck=function(Ie,Jl,Ut,qt){Object.prototype.hasOwnProperty.call(Ie,Ut)&&i(Ie.structName,"already has a property named",Ut+"."),$l.test(qt)||Kl.test(qt)||i("Malformed signature for",L(Ie.structName,Jl)+":",qt)}}let G=y.memberKey(S);f.sigCheck(y.prototype,S,G,T.signature),T.key=G,T.name=S;let Y=N(T.signature),ne=L(y.prototype.structName,G),le=y.prototype.debugFlags.__flags,Fe=Object.create(null);Fe.configurable=!1,Fe.enumerable=!1,Fe.get=function(){le.getter&&P("debug.getter:",f._.getters[Y],"for",w(Y),ne,"@",this.pointer,"+",T.offset,"sz",T.sizeof);let ve=new DataView(s().buffer,this.pointer+T.offset,T.sizeof)[f._.getters[Y]](0,E);return le.getter&&P("debug.getter:",ne,"result =",ve),ve},T.readOnly?Fe.set=C(y.prototype.structName,G):Fe.set=function(ve){if(le.setter&&P("debug.setter:",f._.setters[Y],"for",w(Y),ne,"@",this.pointer,"+",T.offset,"sz",T.sizeof,ve),this.pointer||i("Cannot set struct property on disposed instance."),ve===null)ve=0;else for(;!J(ve);){if(R(T.signature)&&ve instanceof re){ve=ve.pointer||0,le.setter&&P("debug.setter:",ne,"resolved to",ve);break}i("Invalid value for pointer-type",ne+".")}new DataView(s().buffer,this.pointer+T.offset,T.sizeof)[f._.setters[Y]](0,f._.sw[Y](ve),E)},Object.defineProperty(y.prototype,G,Fe)},V=function f(y,S){arguments.length===1?(S=y,y=S.name):S.name||(S.name=y),y||i("Struct name is required.");let T=!1;Object.keys(S.members).forEach(ne=>{let le=S.members[ne];le.sizeof?le.sizeof===1?le.signature==="c"||le.signature==="C"||i("Unexpected sizeof==1 member",L(S.name,ne),"with signature",le.signature):(le.sizeof%4!==0&&(console.warn("Invalid struct member description =",le,"from",S),i(y,"member",ne,"sizeof is not aligned. sizeof="+le.sizeof)),le.offset%4!==0&&(console.warn("Invalid struct member description =",le,"from",S),i(y,"member",ne,"offset is not aligned. offset="+le.offset))):i(y,"member",ne,"is missing sizeof."),(!T||T.offset<le.offset)&&(T=le)}),T?S.sizeof<T.offset+T.sizeof&&i("Invalid struct config:",y,"max member offset ("+T.offset+") ","extends past end of struct (sizeof="+S.sizeof+")."):i("No member property descriptions found.");let G=c(n.__makeDebugFlags(f.debugFlags)),Y=function ne(le){this instanceof ne?arguments.length?((le!==(le|0)||le<=0)&&i("Invalid pointer value for",y,"constructor."),q(ne,this,le)):q(ne,this):i("The",y,"constructor may only be called via 'new'.")};return Object.defineProperties(Y,{debugFlags:G,isA:c(ne=>ne instanceof Y),memberKey:ie,memberKeys:se,methodInfoForKey:c(function(ne){}),structInfo:c(S),structName:c(y)}),Y.prototype=new re(y,S,c),Object.defineProperties(Y.prototype,{debugFlags:G,constructor:c(Y)}),Object.keys(S.members).forEach(ne=>fe(Y,ne,S.members[ne])),Y};return V.StructType=re,V.config=r,V.allocCString=H,V.debugFlags||(V.debugFlags=n.__makeDebugFlags(n.debugFlags)),V},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){"use strict";let r=(...E)=>{throw new Error(E.join(" "))},i=t.SQLite3Error.toss,n=t.capi,s=t.wasm,m=t.util;if(globalThis.WhWasmUtilInstaller(s),delete globalThis.WhWasmUtilInstaller,s.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(E,b)=>E[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:E=>E[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new s.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:E=>{let b;return(O,R,N,w)=>{try{let U=s.cArgvToJs(R,N);return b||(b=s.cArgvToJs(R,w)),E(U,b)|0}catch(U){return U.resultCode||n.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:E=>E[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new s.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(E,b)=>E[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(E,b)=>E[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],s.exports.sqlite3_progress_handler&&s.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new s.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(E,b)=>E[0]}),"*"]]),s.exports.sqlite3_stmt_explain&&s.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),s.exports.sqlite3_set_authorizer&&s.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(E,b)=>E[0],callProxy:E=>(b,O,R,N,w,U)=>{try{return R=R&&s.cstrToJs(R),N=N&&s.cstrToJs(N),w=w&&s.cstrToJs(w),U=U&&s.cstrToJs(U),E(b,O,R,N,w,U)||0}catch(u){return u.resultCode||n.SQLITE_ERROR}}}),"*"]]),s.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:E=>E[0],callProxy:E=>(b,O,R,N,w)=>{E(b,O,s.cstrToJs(R),s.cstrToJs(N),w)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],s.bigIntEnabled&&s.exports.sqlite3_declare_vtab&&s.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),s.bigIntEnabled&&s.exports.sqlite3_preupdate_hook&&s.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:E=>E[0],callProxy:E=>(b,O,R,N,w,U,u)=>{E(b,O,R,s.cstrToJs(N),s.cstrToJs(w),U,u)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),s.bigIntEnabled&&s.exports.sqlite3changegroup_add&&s.exports.sqlite3session_create&&s.exports.sqlite3_preupdate_hook){let E={signature:"i(ps)",callProxy:b=>(O,R)=>{try{return b(O,s.cstrToJs(R))|0}catch(N){return N.resultCode||n.SQLITE_ERROR}}};s.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...E}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...E}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...E}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...E}),new s.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new s.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new s.xWrap.FuncPtrAdapter({name:"xFilter",...E,contextKey:(b,O)=>b[0]}),"*"]])}s.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:s.heap8u,alloc:s.alloc,dealloc:s.dealloc,bigIntEnabled:s.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{let E=s.xWrap.argAdapter("string");s.xWrap.argAdapter("string:flexible",w=>E(m.flexibleString(w))),s.xWrap.argAdapter("string:static",function(w){return s.isPtr(w)?w:(w=""+w,this[w]||(this[w]=s.allocCString(w)))}.bind(Object.create(null)));let b=s.xWrap.argAdapter("*"),O=function(){};s.xWrap.argAdapter("sqlite3_filename",b)("sqlite3_context*",b)("sqlite3_value*",b)("void*",b)("sqlite3_changegroup*",b)("sqlite3_changeset_iter*",b)("sqlite3_session*",b)("sqlite3_stmt*",w=>b(w instanceof(t?.oo1?.Stmt||O)?w.pointer:w))("sqlite3*",w=>b(w instanceof(t?.oo1?.DB||O)?w.pointer:w))("sqlite3_vfs*",w=>typeof w=="string"?n.sqlite3_vfs_find(w)||t.SQLite3Error.toss(n.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",w):b(w instanceof(n.sqlite3_vfs||O)?w.pointer:w)),s.exports.sqlite3_declare_vtab&&s.xWrap.argAdapter("sqlite3_index_info*",w=>b(w instanceof(n.sqlite3_index_info||O)?w.pointer:w))("sqlite3_module*",w=>b(w instanceof(n.sqlite3_module||O)?w.pointer:w));let R=s.xWrap.resultAdapter("*");s.xWrap.resultAdapter("sqlite3*",R)("sqlite3_context*",R)("sqlite3_stmt*",R)("sqlite3_value*",R)("sqlite3_vfs*",R)("void*",R),s.exports.sqlite3_step.length===0&&(s.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(let w of s.bindingSignatures)n[w[0]]=s.xWrap.apply(null,w);for(let w of s.bindingSignatures.wasmInternal)m[w[0]]=s.xWrap.apply(null,w);let N=function(w){return()=>r(w+"() is unavailable due to lack","of BigInt support in this build.")};for(let w of s.bindingSignatures.int64)n[w[0]]=s.bigIntEnabled?s.xWrap.apply(null,w):N(w[0]);if(delete s.bindingSignatures,s.exports.sqlite3__wasm_db_error){let w=s.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");m.sqlite3__wasm_db_error=function(U,u,d){return u instanceof t.WasmAllocError?(u=n.SQLITE_NOMEM,d=0):u instanceof Error&&(d=d||""+u,u=u.resultCode||n.SQLITE_ERROR),U?w(U,u,d):u}}else m.sqlite3__wasm_db_error=function(w,U,u){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),U}}{let E=s.xCall("sqlite3__wasm_enum_json");E||r("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),s.ctype=JSON.parse(s.cstrToJs(E));let b=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];s.bigIntEnabled&&b.push("serialize","session","vtab");for(let N of b)for(let w of Object.entries(s.ctype[N]))n[w[0]]=w[1];s.functionEntry(n.SQLITE_WASM_DEALLOC)||r("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+n.SQLITE_WASM_DEALLOC+").");let O=Object.create(null);for(let N of["resultCodes"])for(let w of Object.entries(s.ctype[N]))O[w[1]]=w[0];n.sqlite3_js_rc_str=N=>O[N];let R=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!m.isUIThread(),sqlite3_index_info:!s.bigIntEnabled,sqlite3_index_constraint:!s.bigIntEnabled,sqlite3_index_orderby:!s.bigIntEnabled,sqlite3_index_constraint_usage:!s.bigIntEnabled});for(let N of s.ctype.structs)R[N.name]||(n[N.name]=t.StructBinder(N));if(n.sqlite3_index_info){for(let N of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])n.sqlite3_index_info[N]=n[N],delete n[N];n.sqlite3_vtab_config=s.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}let h=(E,b,O)=>m.sqlite3__wasm_db_error(E,n.SQLITE_MISUSE,b+"() requires "+O+" argument"+(O===1?"":"s")+"."),P=E=>m.sqlite3__wasm_db_error(E,n.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),D=E=>s.xWrap.argAdapter("sqlite3*")(E),W=E=>s.isPtr(E)?s.cstrToJs(E):E,z=function(E,b){E=D(E);let O=this.dbMap.get(E);if(b)!O&&b>0&&this.dbMap.set(E,O=Object.create(null));else return this.dbMap.delete(E),O;return O}.bind(Object.assign(Object.create(null),{dbMap:new Map}));z.addCollation=function(E,b){let O=z(E,1);O.collation||(O.collation=new Set),O.collation.add(W(b).toLowerCase())},z._addUDF=function(E,b,O,R){b=W(b).toLowerCase();let N=R.get(b);N||R.set(b,N=new Set),N.add(O<0?-1:O)},z.addFunction=function(E,b,O){let R=z(E,1);R.udf||(R.udf=new Map),this._addUDF(E,b,O,R.udf)},s.exports.sqlite3_create_window_function&&(z.addWindowFunc=function(E,b,O){let R=z(E,1);R.wudf||(R.wudf=new Map),this._addUDF(E,b,O,R.wudf)}),z.cleanup=function(E){E=D(E);let b=[E];for(let N of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){let w=s.exports[N];if(w){b.length=w.length;try{n[N](...b)}catch(U){t.config.warn("close-time call of",N+"(",b,") threw:",U)}}}let O=z(E,0);if(!O)return;if(O.collation){for(let N of O.collation)try{n.sqlite3_create_collation_v2(E,N,n.SQLITE_UTF8,0,0,0)}catch{}delete O.collation}let R;for(R=0;R<2;++R){let N=R?O.wudf:O.udf;if(!N)continue;let w=R?n.sqlite3_create_window_function:n.sqlite3_create_function_v2;for(let U of N){let u=U[0],d=U[1],x=[E,u,0,n.SQLITE_UTF8,0,0,0,0,0];R&&x.push(0);for(let L of d)try{x[2]=L,w.apply(null,x)}catch{}d.clear()}N.clear()}delete O.udf,delete O.wudf};{let E=s.xWrap("sqlite3_close_v2","int","sqlite3*");n.sqlite3_close_v2=function(b){if(arguments.length!==1)return h(b,"sqlite3_close_v2",1);if(b)try{z.cleanup(b)}catch{}return E(b)}}if(n.sqlite3session_create){let E=s.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);n.sqlite3session_delete=function(b){if(arguments.length!==1)return h(pDb,"sqlite3session_delete",1);b&&n.sqlite3session_table_filter(b,0,0),E(b)}}{let E=(O,R)=>"argv["+R+"]:"+O[0]+":"+s.cstrToJs(O[1]).toLowerCase(),b=s.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new s.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:E}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:E})]);n.sqlite3_create_collation_v2=function(O,R,N,w,U,u){if(arguments.length!==6)return h(O,"sqlite3_create_collation_v2",6);if(!(N&15))N|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(N&15))return P(O);try{let d=b(O,R,N,w,U,u);return d===0&&U instanceof Function&&z.addCollation(O,R),d}catch(d){return m.sqlite3__wasm_db_error(O,d)}},n.sqlite3_create_collation=(O,R,N,w,U)=>arguments.length===5?n.sqlite3_create_collation_v2(O,R,N,w,U,0):h(O,"sqlite3_create_collation",5)}{let E=function(N,w){return N[0]+":"+(N[2]<0?-1:N[2])+":"+w+":"+s.cstrToJs(N[1]).toLowerCase()},b=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:E,callProxy:N=>(w,U,u)=>{try{N(w,...n.sqlite3_values_to_js(U,u))}catch(d){n.sqlite3_result_error_js(w,d)}}},xFinalAndValue:{signature:"v(p)",contextKey:E,callProxy:N=>w=>{try{n.sqlite3_result_js(w,N(w))}catch(U){n.sqlite3_result_error_js(w,U)}}},xFunc:{signature:"v(pip)",contextKey:E,callProxy:N=>(w,U,u)=>{try{n.sqlite3_result_js(w,N(w,...n.sqlite3_values_to_js(U,u)))}catch(d){n.sqlite3_result_error_js(w,d)}}},xDestroy:{signature:"v(p)",contextKey:E,callProxy:N=>w=>{try{N(w)}catch(U){console.error("UDF xDestroy method threw:",U)}}}}),O=s.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xFunc",...b.xFunc}),new s.xWrap.FuncPtrAdapter({name:"xStep",...b.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...b.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...b.xDestroy})]),R=s.exports.sqlite3_create_window_function?s.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new s.xWrap.FuncPtrAdapter({name:"xStep",...b.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xFinal",...b.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xValue",...b.xFinalAndValue}),new s.xWrap.FuncPtrAdapter({name:"xInverse",...b.xInverseAndStep}),new s.xWrap.FuncPtrAdapter({name:"xDestroy",...b.xDestroy})]):void 0;n.sqlite3_create_function_v2=function N(w,U,u,d,x,L,C,p,a){if(N.length!==arguments.length)return h(w,"sqlite3_create_function_v2",N.length);if(!(d&15))d|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(d&15))return P(w);try{let _=O(w,U,u,d,x,L,C,p,a);return _===0&&(L instanceof Function||C instanceof Function||p instanceof Function||a instanceof Function)&&z.addFunction(w,U,u),_}catch(_){return console.error("sqlite3_create_function_v2() setup threw:",_),m.sqlite3__wasm_db_error(w,_,"Creation of UDF threw: "+_)}},n.sqlite3_create_function=function N(w,U,u,d,x,L,C,p){return N.length===arguments.length?n.sqlite3_create_function_v2(w,U,u,d,x,L,C,p,0):h(w,"sqlite3_create_function",N.length)},R?n.sqlite3_create_window_function=function N(w,U,u,d,x,L,C,p,a,_){if(N.length!==arguments.length)return h(w,"sqlite3_create_window_function",N.length);if(!(d&15))d|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(d&15))return P(w);try{let c=R(w,U,u,d,x,L,C,p,a,_);return c===0&&(L instanceof Function||C instanceof Function||p instanceof Function||a instanceof Function||_ instanceof Function)&&z.addWindowFunc(w,U,u),c}catch(c){return console.error("sqlite3_create_window_function() setup threw:",c),m.sqlite3__wasm_db_error(w,c,"Creation of UDF threw: "+c)}}:delete n.sqlite3_create_window_function,n.sqlite3_create_function_v2.udfSetResult=n.sqlite3_create_function.udfSetResult=n.sqlite3_result_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfSetResult=n.sqlite3_result_js),n.sqlite3_create_function_v2.udfConvertArgs=n.sqlite3_create_function.udfConvertArgs=n.sqlite3_values_to_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfConvertArgs=n.sqlite3_values_to_js),n.sqlite3_create_function_v2.udfSetError=n.sqlite3_create_function.udfSetError=n.sqlite3_result_error_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfSetError=n.sqlite3_result_error_js)}{let E=(O,R)=>(typeof O=="string"?R=-1:m.isSQLableTypedArray(O)?(R=O.byteLength,O=m.typedArrayToString(O instanceof ArrayBuffer?new Uint8Array(O):O)):Array.isArray(O)&&(O=O.join(""),R=-1),[O,R]),b={basic:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:s.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};n.sqlite3_prepare_v3=function O(R,N,w,U,u,d){if(O.length!==arguments.length)return h(R,"sqlite3_prepare_v3",O.length);let[x,L]=E(N,w);switch(typeof x){case"string":return b.basic(R,x,L,U,u,null);case"number":return b.full(R,x,L,U,u,d);default:return m.sqlite3__wasm_db_error(R,n.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},n.sqlite3_prepare_v2=function O(R,N,w,U,u){return O.length===arguments.length?n.sqlite3_prepare_v3(R,N,w,0,U,u):h(R,"sqlite3_prepare_v2",O.length)}}{let E=s.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),b=s.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);n.sqlite3_bind_text=function O(R,N,w,U,u){if(O.length!==arguments.length)return h(n.sqlite3_db_handle(R),"sqlite3_bind_text",O.length);if(s.isPtr(w)||w===null)return E(R,N,w,U,u);w instanceof ArrayBuffer?w=new Uint8Array(w):Array.isArray(pMem)&&(w=pMem.join(""));let d,x;try{if(m.isSQLableTypedArray(w))d=s.allocFromTypedArray(w),x=w.byteLength;else if(typeof w=="string")[d,x]=s.allocCString(w);else return m.sqlite3__wasm_db_error(n.sqlite3_db_handle(R),n.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return E(R,N,d,x,n.SQLITE_WASM_DEALLOC)}catch(L){return s.dealloc(d),m.sqlite3__wasm_db_error(n.sqlite3_db_handle(R),L)}},n.sqlite3_bind_blob=function O(R,N,w,U,u){if(O.length!==arguments.length)return h(n.sqlite3_db_handle(R),"sqlite3_bind_blob",O.length);if(s.isPtr(w)||w===null)return b(R,N,w,U,u);w instanceof ArrayBuffer?w=new Uint8Array(w):Array.isArray(w)&&(w=w.join(""));let d,x;try{if(m.isBindableTypedArray(w))d=s.allocFromTypedArray(w),x=U>=0?U:w.byteLength;else if(typeof w=="string")[d,x]=s.allocCString(w);else return m.sqlite3__wasm_db_error(n.sqlite3_db_handle(R),n.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return b(R,N,d,x,n.SQLITE_WASM_DEALLOC)}catch(L){return s.dealloc(d),m.sqlite3__wasm_db_error(n.sqlite3_db_handle(R),L)}}}n.sqlite3_config=function(E,...b){if(arguments.length<2)return n.SQLITE_MISUSE;switch(E){case n.SQLITE_CONFIG_COVERING_INDEX_SCAN:case n.SQLITE_CONFIG_MEMSTATUS:case n.SQLITE_CONFIG_SMALL_MALLOC:case n.SQLITE_CONFIG_SORTERREF_SIZE:case n.SQLITE_CONFIG_STMTJRNL_SPILL:case n.SQLITE_CONFIG_URI:return s.exports.sqlite3__wasm_config_i(E,b[0]);case n.SQLITE_CONFIG_LOOKASIDE:return s.exports.sqlite3__wasm_config_ii(E,b[0],b[1]);case n.SQLITE_CONFIG_MEMDB_MAXSIZE:return s.exports.sqlite3__wasm_config_j(E,b[0]);case n.SQLITE_CONFIG_GETMALLOC:case n.SQLITE_CONFIG_GETMUTEX:case n.SQLITE_CONFIG_GETPCACHE2:case n.SQLITE_CONFIG_GETPCACHE:case n.SQLITE_CONFIG_HEAP:case n.SQLITE_CONFIG_LOG:case n.SQLITE_CONFIG_MALLOC:case n.SQLITE_CONFIG_MMAP_SIZE:case n.SQLITE_CONFIG_MULTITHREAD:case n.SQLITE_CONFIG_MUTEX:case n.SQLITE_CONFIG_PAGECACHE:case n.SQLITE_CONFIG_PCACHE2:case n.SQLITE_CONFIG_PCACHE:case n.SQLITE_CONFIG_PCACHE_HDRSZ:case n.SQLITE_CONFIG_PMASZ:case n.SQLITE_CONFIG_SERIALIZED:case n.SQLITE_CONFIG_SINGLETHREAD:case n.SQLITE_CONFIG_SQLLOG:case n.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return n.SQLITE_NOTFOUND}};{let E=new Set;n.sqlite3_auto_extension=function(b){if(b instanceof Function)b=s.installFunction("i(ppp)",b);else if(arguments.length!==1||!s.isPtr(b))return n.SQLITE_MISUSE;let O=s.exports.sqlite3_auto_extension(b);return b!==arguments[0]&&(O===0?E.add(b):s.uninstallFunction(b)),O},n.sqlite3_cancel_auto_extension=function(b){return!b||arguments.length!==1||!s.isPtr(b)?0:s.exports.sqlite3_cancel_auto_extension(b)},n.sqlite3_reset_auto_extension=function(){s.exports.sqlite3_reset_auto_extension();for(let b of E)s.uninstallFunction(b);E.clear()}}let Q=n.sqlite3_vfs_find("kvvfs");if(Q)if(m.isUIThread()){let E=new n.sqlite3_kvvfs_methods(s.exports.sqlite3__wasm_kvvfs_methods());delete n.sqlite3_kvvfs_methods;let b=s.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,O=s.pstack,R=w=>s.peek(w)===115?sessionStorage:localStorage,N={xRead:(w,U,u,d)=>{let x=O.pointer,L=s.scopedAllocPush();try{let C=b(w,U);if(!C)return-3;let p=s.cstrToJs(C),a=R(w).getItem(p);if(!a)return-1;let _=a.length;if(d<=0)return _;if(d===1)return s.poke(u,0),_;let c=s.scopedAllocCString(a);return d>_+1&&(d=_+1),s.heap8u().copyWithin(u,c,c+d-1),s.poke(u+d-1,0),d-1}catch(C){return console.error("kvstorageRead()",C),-2}finally{O.restore(x),s.scopedAllocPop(L)}},xWrite:(w,U,u)=>{let d=O.pointer;try{let x=b(w,U);if(!x)return 1;let L=s.cstrToJs(x);return R(w).setItem(L,s.cstrToJs(u)),0}catch(x){return console.error("kvstorageWrite()",x),n.SQLITE_IOERR}finally{O.restore(d)}},xDelete:(w,U)=>{let u=O.pointer;try{let d=b(w,U);return d?(R(w).removeItem(s.cstrToJs(d)),0):1}catch(d){return console.error("kvstorageDelete()",d),n.SQLITE_IOERR}finally{O.restore(u)}}};for(let w of Object.keys(N))E[E.memberKey(w)]=s.installFunction(E.memberSignature(w),N[w])}else n.sqlite3_vfs_unregister(Q);s.xWrap.FuncPtrAdapter.warnOnUse=!0;let A=t.StructBinder,k=function E(b,O,R,N=E.installMethodArgcCheck){if(b instanceof A.StructType?!(R instanceof Function)&&!s.isPtr(R)&&r("Usage errror: expecting a Function or WASM pointer to one."):r("Usage error: target object is-not-a StructType."),arguments.length===1)return(d,x)=>E(b,d,x,N);E.argcProxy||(E.argcProxy=function(d,x,L,C){return function(...p){return L.length!==arguments.length&&r("Argument mismatch for",d.structInfo.name+"::"+x+": Native signature is:",C),L.apply(this,p)}},E.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((d,x)=>{if(typeof d=="number")try{s.uninstallFunction(d)}catch{}}),delete this.ondispose.__removeFuncList)});let w=b.memberSignature(O);w.length<2&&r("Member",O,"does not have a function pointer signature:",w);let U=b.memberKey(O),u=N&&!s.isPtr(R)?E.argcProxy(b,U,R,w):R;if(s.isPtr(u))u&&!s.functionEntry(u)&&r("Pointer",u,"is not a WASM function table entry."),b[U]=u;else{let d=s.installFunction(u,b.memberSignature(O,!0));b[U]=d,(!b.ondispose||!b.ondispose.__removeFuncList)&&(b.addOnDispose("ondispose.__removeFuncList handler",E.removeFuncList),b.ondispose.__removeFuncList=[]),b.ondispose.__removeFuncList.push(U,d)}return(d,x)=>E(b,d,x,N)};k.installMethodArgcCheck=!1;let F=function(E,b,O=k.installMethodArgcCheck){let R=new Map;for(let N of Object.keys(b)){let w=b[N],U=R.get(w);if(U){let u=E.memberKey(N);E[u]=E[E.memberKey(U)]}else k(E,N,w,O),R.set(w,N)}return E};A.StructType.prototype.installMethod=function(b,O,R=k.installMethodArgcCheck){return arguments.length<3&&b&&typeof b=="object"?F(this,...arguments):k(this,...arguments)},A.StructType.prototype.installMethods=function(E,b=k.installMethodArgcCheck){return F(this,E,b)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.47.0",libVersionNumber:3047e3,sourceId:"2024-10-21 16:30:22 03a9703e27c44437c39363d0baf82db4ebc94538a0f28411c85dda156f82alt1",downloadVersion:347e4}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let r=(...p)=>{throw new Error(p.join(" "))},i=(...p)=>{throw new t.SQLite3Error(...p)},n=t.capi,s=t.wasm,m=t.util,h=new WeakMap,P=new WeakMap,D=(p,a,_)=>{let c=Object.getOwnPropertyDescriptor(p,a);return c?c.value:_},W=function(p,a){return a&&(p instanceof k&&(p=p.pointer),i(a,"sqlite3 result code",a+":",p?n.sqlite3_errmsg(p):n.sqlite3_errstr(a))),arguments[0]},z=s.installFunction("i(ippp)",function(p,a,_,c){n.SQLITE_TRACE_STMT===p&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+a+":",s.cstrToJs(c))}.bind({counter:0})),Q=Object.create(null),A=function p(...a){if(!p._name2vfs){p._name2vfs=Object.create(null);let se=typeof importScripts=="function"?_e=>i("The VFS for",_e,"is only available in the main window thread."):!1;p._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:se||(()=>"local")},p._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:se||(()=>"session")}}let _=p.normalizeArgs(...a),c=_.filename,q=_.vfs,B=_.flags;(typeof c!="string"&&typeof c!="number"||typeof B!="string"||q&&typeof q!="string"&&typeof q!="number")&&(t.config.error("Invalid DB ctor args",_,arguments),i("Invalid arguments for DB constructor."));let $=typeof c=="number"?s.cstrToJs(c):c,ie=p._name2vfs[$];ie&&(q=ie.vfs,c=$=ie.filename($));let Z,oe=0;B.indexOf("c")>=0&&(oe|=n.SQLITE_OPEN_CREATE|n.SQLITE_OPEN_READWRITE),B.indexOf("w")>=0&&(oe|=n.SQLITE_OPEN_READWRITE),oe===0&&(oe|=n.SQLITE_OPEN_READONLY),oe|=n.SQLITE_OPEN_EXRESCODE;let ce=s.pstack.pointer;try{let se=s.pstack.allocPtr(),_e=n.sqlite3_open_v2(c,se,oe,q||0);Z=s.peekPtr(se),W(Z,_e),n.sqlite3_extended_result_codes(Z,1),B.indexOf("t")>=0&&n.sqlite3_trace_v2(Z,n.SQLITE_TRACE_STMT,z,Z)}catch(se){throw Z&&n.sqlite3_close_v2(Z),se}finally{s.pstack.restore(ce)}this.filename=$,h.set(this,Z),P.set(this,Object.create(null));try{let se=n.sqlite3_js_db_vfs(Z)||i("Internal error: cannot get VFS for new db handle."),_e=Q[se];_e&&(_e instanceof Function?_e(this,t):W(Z,n.sqlite3_exec(Z,_e,0,0,0)))}catch(se){throw this.close(),se}};A.setVfsPostOpenCallback=function(p,a){a instanceof Function||i("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),Q[p]=a},A.normalizeArgs=function(p=":memory:",a="c",_=null){let c={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(c,arguments[0]),c.flags===void 0&&(c.flags="c"),c.vfs===void 0&&(c.vfs=null),c.filename===void 0&&(c.filename=":memory:")):(c.filename=p,c.flags=a,c.vfs=_),c};let k=function(...p){A.apply(this,p)};k.dbCtorHelper=A;let F={null:1,number:2,string:3,boolean:4,blob:5};F.undefined==F.null,s.bigIntEnabled&&(F.bigint=F.number);let E=function(){F!==arguments[2]&&i(n.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],h.set(this,arguments[1]),this.parameterCount=n.sqlite3_bind_parameter_count(this.pointer)},b=function(p){return p.pointer||i("DB has been closed."),p},O=function(p,a){return(a!==(a|0)||a<0||a>=p.columnCount)&&i("Column index",a,"is out of range."),p},R=function(p,a){let _=Object.create(null);switch(_.opt=Object.create(null),a.length){case 1:typeof a[0]=="string"||m.isSQLableTypedArray(a[0])||Array.isArray(a[0])?_.sql=a[0]:a[0]&&typeof a[0]=="object"&&(_.opt=a[0],_.sql=_.opt.sql);break;case 2:_.sql=a[0],_.opt=a[1];break;default:i("Invalid argument count for exec().")}_.sql=m.flexibleString(_.sql),typeof _.sql!="string"&&i("Missing SQL argument or unsupported SQL value type.");let c=_.opt;switch(c.returnValue){case"resultRows":c.resultRows||(c.resultRows=[]),_.returnVal=()=>c.resultRows;break;case"saveSql":c.saveSql||(c.saveSql=[]),_.returnVal=()=>c.saveSql;break;case void 0:case"this":_.returnVal=()=>p;break;default:i("Invalid returnValue value:",c.returnValue)}if(!c.callback&&!c.returnValue&&c.rowMode!==void 0&&(c.resultRows||(c.resultRows=[]),_.returnVal=()=>c.resultRows),c.callback||c.resultRows)switch(c.rowMode===void 0?"array":c.rowMode){case"object":_.cbArg=(q,B)=>{B.columnNames||(B.columnNames=q.getColumnNames([]));let $=q.get([]),ie=Object.create(null);for(let Z in B.columnNames)ie[B.columnNames[Z]]=$[Z];return ie};break;case"array":_.cbArg=q=>q.get([]);break;case"stmt":Array.isArray(c.resultRows)&&i("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),_.cbArg=q=>q;break;default:if(m.isInt32(c.rowMode)){_.cbArg=q=>q.get(c.rowMode);break}else if(typeof c.rowMode=="string"&&c.rowMode.length>1&&c.rowMode[0]==="$"){let q=c.rowMode.substr(1);_.cbArg=B=>{let $=B.get(Object.create(null))[q];return $===void 0?i(n.SQLITE_NOTFOUND,"exec(): unknown result column:",q):$};break}i("Invalid rowMode:",c.rowMode)}return _},N=(p,a,_,...c)=>{let q=p.prepare(a);try{let B=q.bind(_).step()?q.get(...c):void 0;return q.reset(),B}finally{q.finalize()}},w=(p,a,_,c)=>p.exec({sql:a,bind:_,rowMode:c,returnValue:"resultRows"});k.checkRc=(p,a)=>W(p,a),k.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return b(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}let p=this.pointer;if(Object.keys(P.get(this)).forEach((a,_)=>{if(_&&_.pointer)try{_.finalize()}catch{}}),h.delete(this),P.delete(this),n.sqlite3_close_v2(p),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(p=!1,a=!1){let _=b(this).pointer;return p?a?n.sqlite3_total_changes64(_):n.sqlite3_total_changes(_):a?n.sqlite3_changes64(_):n.sqlite3_changes(_)},dbFilename:function(p="main"){return n.sqlite3_db_filename(b(this).pointer,p)},dbName:function(p=0){return n.sqlite3_db_name(b(this).pointer,p)},dbVfsName:function(p=0){let a,_=n.sqlite3_js_db_vfs(b(this).pointer,p);if(_){let c=new n.sqlite3_vfs(_);try{a=s.cstrToJs(c.$zName)}finally{c.dispose()}}return a},prepare:function(p){b(this);let a=s.pstack.pointer,_,c;try{_=s.pstack.alloc(8),k.checkRc(this,n.sqlite3_prepare_v2(this.pointer,p,-1,_,null)),c=s.peekPtr(_)}finally{s.pstack.restore(a)}c||i("Cannot prepare empty SQL.");let q=new E(this,c,F);return P.get(this)[c]=q,q},exec:function(){b(this);let p=R(this,arguments);if(!p.sql)return i("exec() requires an SQL string.");let a=p.opt,_=a.callback,c=Array.isArray(a.resultRows)?a.resultRows:void 0,q,B=a.bind,$=!!(p.cbArg||a.columnNames||c),ie=s.scopedAllocPush(),Z=Array.isArray(a.saveSql)?a.saveSql:void 0;try{let oe=m.isSQLableTypedArray(p.sql),ce=oe?p.sql.byteLength:s.jstrlen(p.sql),se=s.scopedAlloc(2*s.ptrSizeof+(ce+1)),_e=se+s.ptrSizeof,pe=_e+s.ptrSizeof,ye=pe+ce;for(oe?s.heap8().set(p.sql,pe):s.jstrcpy(p.sql,s.heap8(),pe,ce,!1),s.poke(pe+ce,0);pe&&s.peek(pe,"i8");){s.pokePtr([se,_e],0),k.checkRc(this,n.sqlite3_prepare_v3(this.pointer,pe,ce,0,se,_e));let ge=s.peekPtr(se);if(pe=s.peekPtr(_e),ce=ye-pe,!!ge){if(Z&&Z.push(n.sqlite3_sql(ge).trim()),q=new E(this,ge,F),B&&q.parameterCount&&(q.bind(B),B=null),$&&q.columnCount){let I=Array.isArray(a.columnNames)?0:1;if($=!1,p.cbArg||c){let j=Object.create(null);for(;q.step();q._lockedByExec=!1){I++===0&&q.getColumnNames(j.columnNames=a.columnNames||[]),q._lockedByExec=!0;let M=p.cbArg(q,j);if(c&&c.push(M),_&&_.call(a,M,q)===!1)break}q._lockedByExec=!1}I===0&&q.getColumnNames(a.columnNames)}else q.step();q.reset().finalize(),q=null}}}finally{s.scopedAllocPop(ie),q&&(delete q._lockedByExec,q.finalize())}return p.returnVal()},createFunction:function(a,_,c){let q=j=>j instanceof Function;switch(arguments.length){case 1:c=a,a=c.name,_=c.xFunc||0;break;case 2:q(_)||(c=_,_=c.xFunc||0);break;case 3:break;default:break}c||(c={}),typeof a!="string"&&i("Invalid arguments: missing function name.");let B=c.xStep||0,$=c.xFinal||0,ie=c.xValue||0,Z=c.xInverse||0,oe;q(_)?(oe=!1,(q(B)||q($))&&i("Ambiguous arguments: scalar or aggregate?"),B=$=null):q(B)?(q($)||i("Missing xFinal() callback for aggregate or window UDF."),_=null):q($)?i("Missing xStep() callback for aggregate or window UDF."):i("Missing function-type properties."),oe===!1?(q(ie)||q(Z))&&i("xValue and xInverse are not permitted for non-window UDFs."):q(ie)?(q(Z)||i("xInverse must be provided if xValue is."),oe=!0):q(Z)&&i("xValue must be provided if xInverse is.");let ce=c.pApp;ce!=null&&(typeof ce!="number"||!m.isInt32(ce))&&i("Invalid value for pApp property. Must be a legal WASM pointer value.");let se=c.xDestroy||0;se&&!q(se)&&i("xDestroy property must be a function.");let _e=0;D(c,"deterministic")&&(_e|=n.SQLITE_DETERMINISTIC),D(c,"directOnly")&&(_e|=n.SQLITE_DIRECTONLY),D(c,"innocuous")&&(_e|=n.SQLITE_INNOCUOUS),a=a.toLowerCase();let pe=_||B,ye=D(c,"arity"),ge=typeof ye=="number"?ye:pe.length?pe.length-1:0,I;return oe?I=n.sqlite3_create_window_function(this.pointer,a,ge,n.SQLITE_UTF8|_e,ce||0,B,$,ie,Z,se):I=n.sqlite3_create_function_v2(this.pointer,a,ge,n.SQLITE_UTF8|_e,ce||0,_,B,$,se),k.checkRc(this,I),this},selectValue:function(p,a,_){return N(this,p,a,0,_)},selectValues:function(p,a,_){let c=this.prepare(p),q=[];try{for(c.bind(a);c.step();)q.push(c.get(0,_));c.reset()}finally{c.finalize()}return q},selectArray:function(p,a){return N(this,p,a,[])},selectObject:function(p,a){return N(this,p,a,{})},selectArrays:function(p,a){return w(this,p,a,"array")},selectObjects:function(p,a){return w(this,p,a,"object")},openStatementCount:function(){return this.pointer?Object.keys(P.get(this)).length:0},transaction:function(p){let a="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&i(n.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),a+=" "+arguments[0],p=arguments[1]),b(this).exec(a);try{let _=p(this);return this.exec("COMMIT"),_}catch(_){throw this.exec("ROLLBACK"),_}},savepoint:function(p){b(this).exec("SAVEPOINT oo1");try{let a=p(this);return this.exec("RELEASE oo1"),a}catch(a){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),a}},checkRc:function(p){return W(this,p)}};let U=function(p){return p.pointer||i("Stmt has been closed."),p},u=function(p){let a=F[p==null?"null":typeof p];switch(a){case F.boolean:case F.null:case F.number:case F.string:return a;case F.bigint:if(s.bigIntEnabled)return a;default:return m.isBindableTypedArray(p)?F.blob:void 0}},d=function(p){return u(p)||i("Unsupported bind() argument type:",typeof p)},x=function(p,a){let _=typeof a=="number"?a:n.sqlite3_bind_parameter_index(p.pointer,a);return _===0||!m.isInt32(_)?i("Invalid bind() parameter name: "+a):(_<1||_>p.parameterCount)&&i("Bind index",a,"is out of range."),_},L=function(p,a){return p._lockedByExec&&i("Operation is illegal when statement is locked:",a),p},C=function p(a,_,c,q){L(U(a),"bind()"),p._||(p._tooBigInt=$=>i("BigInt value is too big to store without precision loss:",$),p._={string:function($,ie,Z,oe){let[ce,se]=s.allocCString(Z,!0);return(oe?n.sqlite3_bind_blob:n.sqlite3_bind_text)($.pointer,ie,ce,se,n.SQLITE_WASM_DEALLOC)}}),d(q),_=x(a,_);let B=0;switch(q==null?F.null:c){case F.null:B=n.sqlite3_bind_null(a.pointer,_);break;case F.string:B=p._.string(a,_,q,!1);break;case F.number:{let $;m.isInt32(q)?$=n.sqlite3_bind_int:typeof q=="bigint"?m.bigIntFits64(q)?s.bigIntEnabled?$=n.sqlite3_bind_int64:m.bigIntFitsDouble(q)?(q=Number(q),$=n.sqlite3_bind_double):p._tooBigInt(q):p._tooBigInt(q):(q=Number(q),s.bigIntEnabled&&Number.isInteger(q)?$=n.sqlite3_bind_int64:$=n.sqlite3_bind_double),B=$(a.pointer,_,q);break}case F.boolean:B=n.sqlite3_bind_int(a.pointer,_,q?1:0);break;case F.blob:{if(typeof q=="string"){B=p._.string(a,_,q,!0);break}else q instanceof ArrayBuffer?q=new Uint8Array(q):m.isBindableTypedArray(q)||i("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");let $=s.alloc(q.byteLength||1);s.heap8().set(q.byteLength?q:[0],$),B=n.sqlite3_bind_blob(a.pointer,_,$,q.byteLength,n.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",q),i("Unsupported bind() argument type: "+typeof q)}return B&&k.checkRc(a.db.pointer,B),a._mayGet=!1,a};E.prototype={finalize:function(){if(this.pointer){L(this,"finalize()");let p=n.sqlite3_finalize(this.pointer);return delete P.get(this.db)[this.pointer],h.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,p}},clearBindings:function(){return L(U(this),"clearBindings()"),n.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(p){L(this,"reset()"),p&&this.clearBindings();let a=n.sqlite3_reset(U(this).pointer);return this._mayGet=!1,W(this.db,a),this},bind:function(){U(this);let p,a;switch(arguments.length){case 1:p=1,a=arguments[0];break;case 2:p=arguments[0],a=arguments[1];break;default:i("Invalid bind() arguments.")}return a===void 0?this:(this.parameterCount||i("This statement has no bindable parameters."),this._mayGet=!1,a===null?C(this,p,F.null,a):Array.isArray(a)?(arguments.length!==1&&i("When binding an array, an index argument is not permitted."),a.forEach((_,c)=>C(this,c+1,d(_),_)),this):(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),typeof a=="object"&&!m.isBindableTypedArray(a)?(arguments.length!==1&&i("When binding an object, an index argument is not permitted."),Object.keys(a).forEach(_=>C(this,_,d(a[_]),a[_])),this):C(this,p,d(a),a)))},bindAsBlob:function(p,a){U(this),arguments.length===1&&(a=p,p=1);let _=d(a);return F.string!==_&&F.blob!==_&&F.null!==_&&i("Invalid value type for bindAsBlob()"),C(this,p,F.blob,a)},step:function(){L(this,"step()");let p=n.sqlite3_step(U(this).pointer);switch(p){case n.SQLITE_DONE:return this._mayGet=!1;case n.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",p,n.sqlite3_js_rc_str(p),"SQL =",n.sqlite3_sql(this.pointer)),k.checkRc(this.db.pointer,p)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{let p=this.step();return this.reset(),p}finally{try{this.finalize()}catch{}}},get:function(p,a){if(U(this)._mayGet||i("Stmt.step() has not (recently) returned true."),Array.isArray(p)){let _=0,c=this.columnCount;for(;_<c;)p[_]=this.get(_++);return p}else if(p&&typeof p=="object"){let _=0,c=this.columnCount;for(;_<c;)p[n.sqlite3_column_name(this.pointer,_)]=this.get(_++);return p}switch(O(this,p),a===void 0?n.sqlite3_column_type(this.pointer,p):a){case n.SQLITE_NULL:return null;case n.SQLITE_INTEGER:if(s.bigIntEnabled){let _=n.sqlite3_column_int64(this.pointer,p);return _>=Number.MIN_SAFE_INTEGER&&_<=Number.MAX_SAFE_INTEGER?Number(_).valueOf():_}else{let _=n.sqlite3_column_double(this.pointer,p);return(_>Number.MAX_SAFE_INTEGER||_<Number.MIN_SAFE_INTEGER)&&i("Integer is out of range for JS integer range: "+_),m.isInt32(_)?_|0:_}case n.SQLITE_FLOAT:return n.sqlite3_column_double(this.pointer,p);case n.SQLITE_TEXT:return n.sqlite3_column_text(this.pointer,p);case n.SQLITE_BLOB:{let _=n.sqlite3_column_bytes(this.pointer,p),c=n.sqlite3_column_blob(this.pointer,p),q=new Uint8Array(_);return _&&q.set(s.heap8u().slice(c,c+_),0),_&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(q.buffer),q}default:i("Don't know how to translate","type of result column #"+p+".")}i("Not reached.")},getInt:function(p){return this.get(p,n.SQLITE_INTEGER)},getFloat:function(p){return this.get(p,n.SQLITE_FLOAT)},getString:function(p){return this.get(p,n.SQLITE_TEXT)},getBlob:function(p){return this.get(p,n.SQLITE_BLOB)},getJSON:function(p){let a=this.get(p,n.SQLITE_STRING);return a===null?a:JSON.parse(a)},getColumnName:function(p){return n.sqlite3_column_name(O(U(this),p).pointer,p)},getColumnNames:function(p=[]){O(U(this),0);let a=this.columnCount;for(let _=0;_<a;++_)p.push(n.sqlite3_column_name(this.pointer,_));return p},getParamIndex:function(p){return U(this).parameterCount?n.sqlite3_bind_parameter_index(this.pointer,p):void 0},getParamName:function(p){return U(this).parameterCount?n.sqlite3_bind_parameter_name(this.pointer,p):void 0},isBusy:function(){return n.sqlite3_stmt_busy(U(this))!==0},isReadOnly:function(){return n.sqlite3_stmt_readonly(U(this))!==0}};{let p={enumerable:!0,get:function(){return h.get(this)},set:()=>i("The pointer property is read-only.")};Object.defineProperty(E.prototype,"pointer",p),Object.defineProperty(k.prototype,"pointer",p)}if(Object.defineProperty(E.prototype,"columnCount",{enumerable:!1,get:function(){return n.sqlite3_column_count(this.pointer)},set:()=>i("The columnCount property is read-only.")}),t.oo1={DB:k,Stmt:E},m.isUIThread()){t.oo1.JsStorageDb=function(a="session"){let _=A.normalizeArgs(...arguments);a=_.filename,a!=="session"&&a!=="local"&&i("JsStorageDb db name must be one of 'session' or 'local'."),_.vfs="kvvfs",A.call(this,_)};let p=t.oo1.JsStorageDb;p.prototype=Object.create(k.prototype),p.clearStorage=n.sqlite3_js_kvvfs_clear,p.prototype.clearStorage=function(){return p.clearStorage(b(this).filename)},p.storageSize=n.sqlite3_js_kvvfs_size,p.prototype.storageSize=function(){return p.storageSize(b(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let r=t.util;t.initWorker1API=function(){"use strict";let i=(...A)=>{throw new Error(A.join(" "))};globalThis.WorkerGlobalScope instanceof Function||i("initWorker1API() must be run from a Worker thread.");let n=this.sqlite3||i("Missing this.sqlite3 object."),s=n.oo1.DB,m=function(A){let k=h.idMap.get(A);return k||(k="db#"+ ++h.idSeq+"@"+A.pointer,h.idMap.set(A,k),k)},h={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(A){let k=new s(A);return this.dbs[m(k)]=k,this.dbList.indexOf(k)<0&&this.dbList.push(k),k},close:function(A,k){if(A){delete this.dbs[m(A)];let F=A.filename,E=r.sqlite3__wasm_db_vfs(A.pointer,0);A.close();let b=this.dbList.indexOf(A);b>=0&&this.dbList.splice(b,1),k&&F&&E&&r.sqlite3__wasm_vfs_unlink(E,F)}},post:function(A,k){k&&k.length?(globalThis.postMessage(A,Array.from(k)),k.length=0):globalThis.postMessage(A)},dbs:Object.create(null),getDb:function(A,k=!0){return this.dbs[A]||(k?i("Unknown (or closed) DB ID:",A):void 0)}},P=function(A=h.dbList[0]){return A&&A.pointer?A:i("DB is not opened.")},D=function(A,k=!0){let F=h.getDb(A.dbId,!1)||h.dbList[0];return k?P(F):F},W=function(){return h.dbList[0]&&m(h.dbList[0])},z=A=>A===""||A[0]===":",Q={open:function(A){let k=Object.create(null),F=A.args||Object.create(null);F.simulateError&&i("Throwing because of simulateError flag.");let E=Object.create(null);k.vfs=F.vfs,k.filename=F.filename||"";let b=h.open(k);return E.filename=b.filename,E.persistent=!!n.capi.sqlite3_js_db_uses_vfs(b.pointer,"opfs"),E.dbId=m(b),E.vfs=b.dbVfsName(),E},close:function(A){let k=D(A,!1),F={filename:k&&k.filename};if(k){let E=A.args&&typeof A.args=="object"?!!A.args.unlink:!1;h.close(k,E)}return F},exec:function(A){let k=typeof A.args=="string"?{sql:A.args}:A.args||Object.create(null);k.rowMode==="stmt"?i("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):k.sql||i("'exec' requires input SQL.");let F=D(A);(k.callback||Array.isArray(k.resultRows))&&(F._blobXfer=h.xfer);let E=k.callback,b=0,O=!!k.columnNames;typeof E=="string"&&(O||(k.columnNames=[]),k.callback=function(R,N){h.post({type:E,columnNames:k.columnNames,rowNumber:++b,row:R},h.xfer)});try{let R=k.countChanges?F.changes(!0,k.countChanges===64):void 0;F.exec(k),R!==void 0&&(k.changeCount=F.changes(!0,k.countChanges===64)-R),k.callback instanceof Function&&(k.callback=E,h.post({type:E,columnNames:k.columnNames,rowNumber:null,row:void 0}))}finally{delete F._blobXfer,k.callback&&(k.callback=E)}return k},"config-get":function(){let A=Object.create(null),k=n.config;return["bigIntEnabled"].forEach(function(F){Object.getOwnPropertyDescriptor(k,F)&&(A[F]=k[F])}),A.version=n.version,A.vfsList=n.capi.sqlite3_js_vfs_list(),A},export:function(A){let k=D(A),F={byteArray:n.capi.sqlite3_js_db_export(k.pointer),filename:k.filename,mimetype:"application/x-sqlite3"};return h.xfer.push(F.byteArray.buffer),F},toss:function(A){i("Testing worker exception")}};globalThis.onmessage=async function(A){A=A.data;let k,F=A.dbId,E=A.type,b=performance.now();try{Q.hasOwnProperty(E)&&Q[E]instanceof Function?k=await Q[E](A):i("Unknown db worker message type:",A.type)}catch(O){E="error",k={operation:A.type,message:O.message,errorClass:O.name,input:A},O.stack&&(k.stack=typeof O.stack=="string"?O.stack.split(/\n\s*/):O.stack)}F||(F=k.dbId||W()),h.post({type:E,dbId:F,messageId:A.messageId,workerReceivedTime:b,workerRespondTime:performance.now(),departureTime:A.departureTime,result:k},h.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let r=t.wasm,i=t.capi,n=t.util.toss3,s=Object.create(null);t.vfs=s,i.sqlite3_vfs.prototype.registerVfs=function(m=!1){this instanceof t.capi.sqlite3_vfs||n("Expecting a sqlite3_vfs-type argument.");let h=i.sqlite3_vfs_register(this,m?1:0);return h&&n("sqlite3_vfs_register(",this,") failed with rc",h),this.pointer!==i.sqlite3_vfs_find(this.$zName)&&n("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},s.installVfs=function(m){let h=0,P=["io","vfs"];for(let D of P){let W=m[D];W&&(++h,W.struct.installMethods(W.methods,!!W.applyArgcCheck),D==="vfs"&&(!W.struct.$zName&&typeof W.name=="string"&&W.struct.addOnDispose(W.struct.$zName=r.allocCString(W.name)),W.struct.registerVfs(!!W.asDefault)))}return h||n("Misuse: installVfs() options object requires at least","one of:",P),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;let r=t.wasm,i=t.capi,n=t.util.toss3,s=Object.create(null);t.vtab=s;let m=i.sqlite3_index_info;m.prototype.nthConstraint=function(D,W=!1){if(D<0||D>=this.$nConstraint)return!1;let z=this.$aConstraint+m.sqlite3_index_constraint.structInfo.sizeof*D;return W?z:new m.sqlite3_index_constraint(z)},m.prototype.nthConstraintUsage=function(D,W=!1){if(D<0||D>=this.$nConstraint)return!1;let z=this.$aConstraintUsage+m.sqlite3_index_constraint_usage.structInfo.sizeof*D;return W?z:new m.sqlite3_index_constraint_usage(z)},m.prototype.nthOrderBy=function(D,W=!1){if(D<0||D>=this.$nOrderBy)return!1;let z=this.$aOrderBy+m.sqlite3_index_orderby.structInfo.sizeof*D;return W?z:new m.sqlite3_index_orderby(z)};let h=function(D,W){return function(z,Q=!1){if(arguments.length===0&&(z=new W),z instanceof W)return this.set(z.pointer,z),z;r.isPtr(z)||t.SQLite3Error.toss("Invalid argument to",D+"()");let A=this.get(z);return Q&&this.delete(z),A}.bind(new Map)},P=function(D,W){let z=h(D,W);return Object.assign(Object.create(null),{StructType:W,create:Q=>{let A=z();return r.pokePtr(Q,A.pointer),A},get:Q=>z(Q),unget:Q=>z(Q,!0),dispose:Q=>{let A=z(Q,!0);A&&A.dispose()}})};s.xVtab=P("xVtab",i.sqlite3_vtab),s.xCursor=P("xCursor",i.sqlite3_vtab_cursor),s.xIndexInfo=D=>new i.sqlite3_index_info(D),s.xError=function D(W,z,Q){if(D.errorReporter instanceof Function)try{D.errorReporter("sqlite3_module::"+W+"(): "+z.message)}catch{}let A;return z instanceof t.WasmAllocError?A=i.SQLITE_NOMEM:arguments.length>2?A=Q:z instanceof t.SQLite3Error&&(A=z.resultCode),A||i.SQLITE_ERROR},s.xError.errorReporter=console.error.bind(console),s.xRowid=(D,W)=>r.poke(D,W,"i64"),s.setupModule=function(D){let W=!1,z=this instanceof i.sqlite3_module?this:D.struct||(W=new i.sqlite3_module);try{let Q=D.methods||n("Missing 'methods' object.");for(let A of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){let k=A[0],F=A[1];Q[k]===!0?Q[k]=Q[F]:Q[F]===!0&&(Q[F]=Q[k])}if(D.catchExceptions){let A=function(E,b){return["xConnect","xCreate"].indexOf(E)>=0?function(O,R,N,w,U,u){try{return b(...arguments)||0}catch(d){return d instanceof t.WasmAllocError||(r.dealloc(r.peekPtr(u)),r.pokePtr(u,r.allocCString(d.message))),s.xError(E,d)}}:function(...O){try{return b(...O)||0}catch(R){return s.xError(E,R)}}},k=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],F=Object.create(null);for(let E of k){let b=Q[E];if(b instanceof Function)E==="xConnect"&&Q.xCreate===b?F[E]=Q.xCreate:E==="xCreate"&&Q.xConnect===b?F[E]=Q.xConnect:F[E]=A(E,b);else continue}z.installMethods(F,!1)}else z.installMethods(Q,!!D.applyArgcCheck);if(z.$iVersion===0){let A;typeof D.iVersion=="number"?A=D.iVersion:z.$xShadowName?A=3:z.$xSavePoint||z.$xRelease||z.$xRollbackTo?A=2:A=1,z.$iVersion=A}}catch(Q){throw W&&W.dispose(),Q}return z},i.sqlite3_module.prototype.setupModule=function(D){return s.setupModule.call(this,D)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){let r=function i(n){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!n||typeof n!="object")&&(n=Object.create(null));let s=new URL(globalThis.location.href).searchParams;return s.has("opfs-disable")?Promise.resolve(t):(n.verbose===void 0&&(n.verbose=s.has("opfs-verbose")?+s.get("opfs-verbose")||2:1),n.sanityChecks===void 0&&(n.sanityChecks=s.has("opfs-sanity-check")),n.proxyUri===void 0&&(n.proxyUri=i.defaultProxyUri),typeof n.proxyUri=="function"&&(n.proxyUri=n.proxyUri()),new Promise(function(h,P){let D=[t.config.error,t.config.warn,t.config.log],W=(I,...j)=>{n.verbose>I&&D[I]("OPFS syncer:",...j)},z=(...I)=>W(2,...I),Q=(...I)=>W(1,...I),A=(...I)=>W(0,...I),k=t.util.toss,F=t.capi,E=t.util,b=t.wasm,O=F.sqlite3_vfs,R=F.sqlite3_file,N=F.sqlite3_io_methods,w=Object.create(null),U=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;w.metrics={dump:function(){let I,j=0,M=0,K=0;for(I in c.opIds){let H=q[I];j+=H.count,M+=H.time,K+=H.wait,H.avgTime=H.count&&H.time?H.time/H.count:0,H.avgWait=H.count&&H.wait?H.wait/H.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",q,`
Total of`,j,"op(s) for",M,"ms (incl. "+K+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",q.s11n),p.postMessage({type:"opfs-async-metrics"})},reset:function(){let I,j=K=>K.count=K.time=K.wait=0;for(I in c.opIds)j(q[I]=Object.create(null));let M=q.s11n=Object.create(null);M=M.serialize=Object.create(null),M.count=M.time=0,M=q.s11n.deserialize=Object.create(null),M.count=M.time=0}};let u=new N,d=new O().addOnDispose(()=>u.dispose()),x,L=I=>(x=!0,d.dispose(),P(I)),C=()=>(x=!1,h(t)),p=new Worker(n.proxyUri);setTimeout(()=>{x===void 0&&L(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),p._originalOnError=p.onerror,p.onerror=function(I){A("Error initializing OPFS asyncer:",I),L(new Error("Loading OPFS async Worker failed for unknown reasons."))};let a=F.sqlite3_vfs_find(null),_=a?new O(a):null;u.$iVersion=1,d.$iVersion=2,d.$szOsFile=F.sqlite3_file.structInfo.sizeof,d.$mxPathname=1024,d.$zName=b.allocCString("opfs"),d.$xDlOpen=d.$xDlError=d.$xDlSym=d.$xDlClose=null,d.addOnDispose("$zName",d.$zName,"cleanup default VFS wrapper",()=>_?_.dispose():null);let c=Object.create(null);c.verbose=n.verbose,c.littleEndian=(()=>{let I=new ArrayBuffer(2);return new DataView(I).setInt16(0,256,!0),new Int16Array(I)[0]===256})(),c.asyncIdleWaitTime=150,c.asyncS11nExceptions=1,c.fileBufferSize=1024*64,c.sabS11nOffset=c.fileBufferSize,c.sabS11nSize=d.$mxPathname*2,c.sabIO=new SharedArrayBuffer(c.fileBufferSize+c.sabS11nSize),c.opIds=Object.create(null);let q=Object.create(null);{let I=0;c.opIds.whichOp=I++,c.opIds.rc=I++,c.opIds.xAccess=I++,c.opIds.xClose=I++,c.opIds.xDelete=I++,c.opIds.xDeleteNoWait=I++,c.opIds.xFileSize=I++,c.opIds.xLock=I++,c.opIds.xOpen=I++,c.opIds.xRead=I++,c.opIds.xSleep=I++,c.opIds.xSync=I++,c.opIds.xTruncate=I++,c.opIds.xUnlock=I++,c.opIds.xWrite=I++,c.opIds.mkdir=I++,c.opIds["opfs-async-metrics"]=I++,c.opIds["opfs-async-shutdown"]=I++,c.opIds.retry=I++,c.sabOP=new SharedArrayBuffer(I*4),w.metrics.reset()}c.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(I=>{(c.sq3Codes[I]=F[I])===void 0&&k("Maintenance required: not found:",I)}),c.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});let B=(I,...j)=>{let M=c.opIds[I]||k("Invalid op ID:",I);c.s11n.serialize(...j),Atomics.store(c.sabOPView,c.opIds.rc,-1),Atomics.store(c.sabOPView,c.opIds.whichOp,M),Atomics.notify(c.sabOPView,c.opIds.whichOp);let K=performance.now();for(;Atomics.wait(c.sabOPView,c.opIds.rc,-1)!=="not-equal";);let H=Atomics.load(c.sabOPView,c.opIds.rc);if(q[I].wait+=performance.now()-K,H&&c.asyncS11nExceptions){let ee=c.s11n.deserialize();ee&&A(I+"() async error:",...ee)}return H};w.debug={asyncShutdown:()=>{Q("Shutting down OPFS async listener. The OPFS VFS will no longer work."),B("opfs-async-shutdown")},asyncRestart:()=>{Q("Attempting to restart OPFS VFS async listener. Might work, might not."),p.postMessage({type:"opfs-async-restart"})}};let $=()=>{if(c.s11n)return c.s11n;let I=new TextDecoder,j=new TextEncoder("utf-8"),M=new Uint8Array(c.sabIO,c.sabS11nOffset,c.sabS11nSize),K=new DataView(c.sabIO,c.sabS11nOffset,c.sabS11nSize);c.s11n=Object.create(null);let H=Object.create(null);H.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},H.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},H.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},H.string={id:4};let ee=J=>H[typeof J]||k("Maintenance required: this value type cannot be serialized.",J),re=J=>{switch(J){case H.number.id:return H.number;case H.bigint.id:return H.bigint;case H.boolean.id:return H.boolean;case H.string.id:return H.string;default:k("Invalid type ID:",J)}};return c.s11n.deserialize=function(J=!1){++q.s11n.deserialize.count;let fe=performance.now(),V=M[0],f=V?[]:null;if(V){let y=[],S=1,T,G,Y;for(T=0;T<V;++T,++S)y.push(re(M[S]));for(T=0;T<V;++T){let ne=y[T];ne.getter?(Y=K[ne.getter](S,c.littleEndian),S+=ne.size):(G=K.getInt32(S,c.littleEndian),S+=4,Y=I.decode(M.slice(S,S+G)),S+=G),f.push(Y)}}return J&&(M[0]=0),q.s11n.deserialize.time+=performance.now()-fe,f},c.s11n.serialize=function(...J){let fe=performance.now();if(++q.s11n.serialize.count,J.length){let V=[],f=0,y=1;for(M[0]=J.length&255;f<J.length;++f,++y)V.push(ee(J[f])),M[y]=V[f].id;for(f=0;f<J.length;++f){let S=V[f];if(S.setter)K[S.setter](y,J[f],c.littleEndian),y+=S.size;else{let T=j.encode(J[f]);K.setInt32(y,T.byteLength,c.littleEndian),y+=4,M.set(T,y),y+=T.byteLength}}}else M[0]=0;q.s11n.serialize.time+=performance.now()-fe},c.s11n},ie=function I(j=16){I._chars||(I._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",I._n=I._chars.length);let M=[],K=0;for(;K<j;++K){let H=Math.random()*(I._n*64)%I._n|0;M[K]=I._chars[H]}return M.join("")},Z=Object.create(null),oe=Object.create(null);oe.op=void 0,oe.start=void 0;let ce=I=>{oe.start=performance.now(),oe.op=I,++q[I].count},se=()=>q[oe.op].time+=performance.now()-oe.start,_e={xCheckReservedLock:function(I,j){return b.poke(j,0,"i32"),0},xClose:function(I){ce("xClose");let j=0,M=Z[I];return M&&(delete Z[I],j=B("xClose",I),M.sq3File&&M.sq3File.dispose()),se(),j},xDeviceCharacteristics:function(I){return F.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(I,j,M){return F.SQLITE_NOTFOUND},xFileSize:function(I,j){ce("xFileSize");let M=B("xFileSize",I);if(M==0)try{let K=c.s11n.deserialize()[0];b.poke(j,K,"i64")}catch(K){A("Unexpected error reading xFileSize() result:",K),M=c.sq3Codes.SQLITE_IOERR}return se(),M},xLock:function(I,j){ce("xLock");let M=Z[I],K=0;return M.lockType?M.lockType=j:(K=B("xLock",I,j),K===0&&(M.lockType=j)),se(),K},xRead:function(I,j,M,K){ce("xRead");let H=Z[I],ee;try{ee=B("xRead",I,M,Number(K)),(ee===0||F.SQLITE_IOERR_SHORT_READ===ee)&&b.heap8u().set(H.sabView.subarray(0,M),j)}catch(re){A("xRead(",arguments,") failed:",re,H),ee=F.SQLITE_IOERR_READ}return se(),ee},xSync:function(I,j){ce("xSync"),++q.xSync.count;let M=B("xSync",I,j);return se(),M},xTruncate:function(I,j){ce("xTruncate");let M=B("xTruncate",I,Number(j));return se(),M},xUnlock:function(I,j){ce("xUnlock");let M=Z[I],K=0;return F.SQLITE_LOCK_NONE===j&&M.lockType&&(K=B("xUnlock",I,j)),K===0&&(M.lockType=j),se(),K},xWrite:function(I,j,M,K){ce("xWrite");let H=Z[I],ee;try{H.sabView.set(b.heap8u().subarray(j,j+M)),ee=B("xWrite",I,M,Number(K))}catch(re){A("xWrite(",arguments,") failed:",re,H),ee=F.SQLITE_IOERR_WRITE}return se(),ee}},pe={xAccess:function(I,j,M,K){ce("xAccess");let H=B("xAccess",b.cstrToJs(j));return b.poke(K,H?0:1,"i32"),se(),0},xCurrentTime:function(I,j){return b.poke(j,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(I,j){return b.poke(j,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(I,j,M){ce("xDelete");let K=B("xDelete",b.cstrToJs(j),M,!1);return se(),K},xFullPathname:function(I,j,M,K){return b.cstrncpy(K,j,M)<M?0:F.SQLITE_CANTOPEN},xGetLastError:function(I,j,M){return Q("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(j,M,K,H,ee){ce("xOpen");let re=0;M===0?M=ie():b.isPtr(M)&&(F.sqlite3_uri_boolean(M,"opfs-unlock-asap",0)&&(re|=c.opfsFlags.OPFS_UNLOCK_ASAP),F.sqlite3_uri_boolean(M,"delete-before-open",0)&&(re|=c.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),M=b.cstrToJs(M));let J=Object.create(null);J.fid=K,J.filename=M,J.sab=new SharedArrayBuffer(c.fileBufferSize),J.flags=H,J.readOnly=!(t.SQLITE_OPEN_CREATE&H)&&!!(H&F.SQLITE_OPEN_READONLY);let fe=B("xOpen",K,M,H,re);return fe||(J.readOnly&&b.poke(ee,F.SQLITE_OPEN_READONLY,"i32"),Z[K]=J,J.sabView=c.sabFileBufView,J.sq3File=new R(K),J.sq3File.$pMethods=u.pointer,J.lockType=F.SQLITE_LOCK_NONE),se(),fe}};_&&(d.$xRandomness=_.$xRandomness,d.$xSleep=_.$xSleep),d.$xRandomness||(pe.xRandomness=function(I,j,M){let K=b.heap8u(),H=0;for(;H<j;++H)K[M+H]=Math.random()*255e3&255;return H}),d.$xSleep||(pe.xSleep=function(I,j){return Atomics.wait(c.sabOPView,c.opIds.xSleep,0,j),0}),w.getResolvedPath=function(I,j){let M=new URL(I,"file://irrelevant").pathname;return j?M.split("/").filter(K=>!!K):M},w.getDirForFilename=async function(j,M=!1){let K=w.getResolvedPath(j,!0),H=K.pop(),ee=w.rootDirectory;for(let re of K)re&&(ee=await ee.getDirectoryHandle(re,{create:!!M}));return[ee,H]},w.mkdir=async function(I){try{return await w.getDirForFilename(I+"/filepart",!0),!0}catch{return!1}},w.entryExists=async function(I){try{let[j,M]=await w.getDirForFilename(I);return await j.getFileHandle(M),!0}catch{return!1}},w.randomFilename=ie,w.treeList=async function(){let I=async function M(K,H){H.name=K.name,H.dirs=[],H.files=[];for await(let ee of K.values())if(ee.kind==="directory"){let re=Object.create(null);H.dirs.push(re),await M(ee,re)}else H.files.push(ee.name)},j=Object.create(null);return await I(w.rootDirectory,j),j},w.rmfr=async function(){let I=w.rootDirectory,j={recurse:!0};for await(let M of I.values())I.removeEntry(M.name,j)},w.unlink=async function(I,j=!1,M=!1){try{let[K,H]=await w.getDirForFilename(I,!1);return await K.removeEntry(H,{recursive:j}),!0}catch(K){if(M)throw new Error("unlink(",arguments[0],") failed: "+K.message,{cause:K});return!1}},w.traverse=async function(I){let j={recursive:!0,directory:w.rootDirectory};typeof I=="function"&&(I={callback:I}),I=Object.assign(j,I||{}),async function K(H,ee){for await(let re of H.values()){if(I.callback(re,H,ee)===!1)return!1;if(I.recursive&&re.kind==="directory"&&await K(re,ee+1)===!1)break}}(I.directory,0)};let ye=async function(I,j){let[M,K]=await w.getDirForFilename(I,!0),ee=await(await M.getFileHandle(K,{create:!0})).createSyncAccessHandle(),re=0,J,fe=!1,V=!1;try{for(ee.truncate(0);(J=await j())!==void 0;)J instanceof ArrayBuffer&&(J=new Uint8Array(J)),re===0&&J.byteLength>=15&&(E.affirmDbHeader(J),fe=!0),ee.write(J,{at:re}),re+=J.byteLength;if((re<512||re%512!==0)&&k("Input size",re,"is not correct for an SQLite database."),!fe){let f=new Uint8Array(20);ee.read(f,{at:0}),E.affirmDbHeader(f)}return ee.write(new Uint8Array([1,1]),{at:18}),re}catch(f){throw await ee.close(),ee=void 0,await M.removeEntry(K).catch(()=>{}),f}finally{ee&&await ee.close()}};if(w.importDb=async function(I,j){if(j instanceof Function)return ye(I,j);j instanceof ArrayBuffer&&(j=new Uint8Array(j)),E.affirmIsDb(j);let M=j.byteLength,[K,H]=await w.getDirForFilename(I,!0),ee,re,J=0;try{return ee=await(await K.getFileHandle(H,{create:!0})).createSyncAccessHandle(),ee.truncate(0),J=ee.write(j,{at:0}),J!=M&&k("Expected to write "+M+" bytes but wrote "+J+"."),ee.write(new Uint8Array([1,1]),{at:18}),J}catch(fe){throw ee&&(await ee.close(),ee=void 0),await K.removeEntry(H).catch(()=>{}),fe}finally{ee&&await ee.close()}},t.oo1){let I=function(...j){let M=t.oo1.DB.dbCtorHelper.normalizeArgs(...j);M.vfs=d.$zName,t.oo1.DB.dbCtorHelper.call(this,M)};I.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=I,I.importDb=w.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(d.pointer,function(j,M){M.capi.sqlite3_busy_timeout(j,1e4)})}let ge=function(){let I=b.scopedAllocPush(),j=new R;try{let M=j.pointer,K=F.SQLITE_OPEN_CREATE|F.SQLITE_OPEN_READWRITE|F.SQLITE_OPEN_MAIN_DB,H=b.scopedAlloc(8),ee="/sanity/check/file"+ie(8),re=b.scopedAllocCString(ee),J;if(c.s11n.serialize("This is \xE4 string."),J=c.s11n.deserialize(),z("deserialize() says:",J),J[0]!=="This is \xE4 string."&&k("String d13n error."),pe.xAccess(d.pointer,re,0,H),J=b.peek(H,"i32"),z("xAccess(",ee,") exists ?=",J),J=pe.xOpen(d.pointer,re,M,K,H),z("open rc =",J,"state.sabOPView[xOpen] =",c.sabOPView[c.opIds.xOpen]),J!==0){A("open failed with code",J);return}pe.xAccess(d.pointer,re,0,H),J=b.peek(H,"i32"),J||k("xAccess() failed to detect file."),J=_e.xSync(j.pointer,0),J&&k("sync failed w/ rc",J),J=_e.xTruncate(j.pointer,1024),J&&k("truncate failed w/ rc",J),b.poke(H,0,"i64"),J=_e.xFileSize(j.pointer,H),J&&k("xFileSize failed w/ rc",J),z("xFileSize says:",b.peek(H,"i64")),J=_e.xWrite(j.pointer,re,10,1),J&&k("xWrite() failed!");let fe=b.scopedAlloc(16);J=_e.xRead(j.pointer,fe,6,2),b.poke(fe+6,0);let V=b.cstrToJs(fe);z("xRead() got:",V),V!=="sanity"&&k("Unexpected xRead() value."),pe.xSleep&&(z("xSleep()ing before close()ing..."),pe.xSleep(d.pointer,2e3),z("waking up from xSleep()")),J=_e.xClose(M),z("xClose rc =",J,"sabOPView =",c.sabOPView),z("Deleting file:",ee),pe.xDelete(d.pointer,re,4660),pe.xAccess(d.pointer,re,0,H),J=b.peek(H,"i32"),J&&k("Expecting 0 from xAccess(",ee,") after xDelete()."),Q("End of OPFS sanity checks.")}finally{j.dispose(),b.scopedAllocPop(I)}};p.onmessage=function({data:I}){switch(I.type){case"opfs-unavailable":L(new Error(I.payload.join(" ")));break;case"opfs-async-loaded":p.postMessage({type:"opfs-async-init",args:c});break;case"opfs-async-inited":{if(x===!0)break;try{t.vfs.installVfs({io:{struct:u,methods:_e},vfs:{struct:d,methods:pe}}),c.sabOPView=new Int32Array(c.sabOP),c.sabFileBufView=new Uint8Array(c.sabIO,0,c.fileBufferSize),c.sabS11nView=new Uint8Array(c.sabIO,c.sabS11nOffset,c.sabS11nSize),$(),n.sanityChecks&&(Q("Running sanity checks because of opfs-sanity-check URL arg..."),ge()),U()?navigator.storage.getDirectory().then(j=>{p.onerror=p._originalOnError,delete p._originalOnError,t.opfs=w,w.rootDirectory=j,z("End of OPFS sqlite3_vfs setup.",d),C()}).catch(L):C()}catch(j){A(j),L(j)}break}default:{let j="Unexpected message from the OPFS async worker: "+JSON.stringify(I);A(j),L(new Error(j));break}}}}))};r.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async i=>{try{let n=r.defaultProxyUri;return i.scriptInfo.sqlite3Dir&&(r.defaultProxyUri=i.scriptInfo.sqlite3Dir+n),r().catch(s=>{i.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",s.message)})}catch(n){return i.config.error("installOpfsVfs() exception:",n),Promise.reject(n)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){var se,_e,pe,ye,ge,I,j,M,K,H,ee,re,nt,fe;"use strict";let r=t.util.toss,i=t.util.toss3,n=Object.create(null),s=t.capi,m=t.util,h=t.wasm,P=4096,D=512,W=4,z=8,Q=D+W,A=D,k=Q,F=P,E=s.SQLITE_OPEN_MAIN_DB|s.SQLITE_OPEN_MAIN_JOURNAL|s.SQLITE_OPEN_SUPER_JOURNAL|s.SQLITE_OPEN_WAL,b=".opaque",O=()=>Math.random().toString(36).slice(2),R=new TextDecoder,N=new TextEncoder,w=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),U=[t.config.error,t.config.warn,t.config.log],u=t.config.log,d=t.config.warn,x=t.config.error,L=new Map,C=V=>L.get(V),p=(V,f)=>{f?L.set(V,f):L.delete(V)},a=new Map,_=V=>a.get(V),c=(V,f)=>{f?a.set(V,f):a.delete(V)},q={xCheckReservedLock:function(V,f){let y=_(V);return y.log("xCheckReservedLock"),y.storeErr(),h.poke32(f,1),0},xClose:function(V){let f=_(V);f.storeErr();let y=f.getOFileForS3File(V);if(y)try{f.log(`xClose ${y.path}`),f.mapS3FileToOFile(V,!1),y.sah.flush(),y.flags&s.SQLITE_OPEN_DELETEONCLOSE&&f.deletePath(y.path)}catch(S){return f.storeErr(S,s.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(V){return s.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(V,f,y){return s.SQLITE_NOTFOUND},xFileSize:function(V,f){let y=_(V);y.log("xFileSize");let T=y.getOFileForS3File(V).sah.getSize()-F;return h.poke64(f,BigInt(T)),0},xLock:function(V,f){let y=_(V);y.log(`xLock ${f}`),y.storeErr();let S=y.getOFileForS3File(V);return S.lockType=f,0},xRead:function(V,f,y,S){let T=_(V);T.storeErr();let G=T.getOFileForS3File(V);T.log(`xRead ${G.path} ${y} @ ${S}`);try{let Y=G.sah.read(h.heap8u().subarray(f,f+y),{at:F+Number(S)});return Y<y?(h.heap8u().fill(0,f+Y,f+y),s.SQLITE_IOERR_SHORT_READ):0}catch(Y){return T.storeErr(Y,s.SQLITE_IOERR)}},xSectorSize:function(V){return P},xSync:function(V,f){let y=_(V);y.log(`xSync ${f}`),y.storeErr();let S=y.getOFileForS3File(V);try{return S.sah.flush(),0}catch(T){return y.storeErr(T,s.SQLITE_IOERR)}},xTruncate:function(V,f){let y=_(V);y.log(`xTruncate ${f}`),y.storeErr();let S=y.getOFileForS3File(V);try{return S.sah.truncate(F+Number(f)),0}catch(T){return y.storeErr(T,s.SQLITE_IOERR)}},xUnlock:function(V,f){let y=_(V);y.log("xUnlock");let S=y.getOFileForS3File(V);return S.lockType=f,0},xWrite:function(V,f,y,S){let T=_(V);T.storeErr();let G=T.getOFileForS3File(V);T.log(`xWrite ${G.path} ${y} ${S}`);try{let Y=G.sah.write(h.heap8u().subarray(f,f+y),{at:F+Number(S)});return y===Y?0:r("Unknown write() failure.")}catch(Y){return T.storeErr(Y,s.SQLITE_IOERR)}}},B=new s.sqlite3_io_methods;B.$iVersion=1,t.vfs.installVfs({io:{struct:B,methods:q}});let $={xAccess:function(V,f,y,S){let T=C(V);T.storeErr();try{let G=T.getPath(f);h.poke32(S,T.hasFilename(G)?1:0)}catch{h.poke32(S,0)}return 0},xCurrentTime:function(V,f){return h.poke(f,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(V,f){return h.poke(f,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(V,f,y){let S=C(V);S.log(`xDelete ${h.cstrToJs(f)}`),S.storeErr();try{return S.deletePath(S.getPath(f)),0}catch(T){return S.storeErr(T),s.SQLITE_IOERR_DELETE}},xFullPathname:function(V,f,y,S){return h.cstrncpy(S,f,y)<y?0:s.SQLITE_CANTOPEN},xGetLastError:function(V,f,y){let S=C(V),T=S.popErr();if(S.log(`xGetLastError ${f} e =`,T),T){let G=h.scopedAllocPush();try{let[Y,ne]=h.scopedAllocCString(T.message,!0);h.cstrncpy(y,Y,f),ne>f&&h.poke8(y+f-1,0)}catch{return s.SQLITE_NOMEM}finally{h.scopedAllocPop(G)}}return T?T.sqlite3Rc||s.SQLITE_IOERR:0},xOpen:function(f,y,S,T,G){let Y=C(f);try{Y.log(`xOpen ${h.cstrToJs(y)} ${T}`);let ne=y&&h.peek8(y)?Y.getPath(y):O(),le=Y.getSAHForPath(ne);!le&&T&s.SQLITE_OPEN_CREATE&&(Y.getFileCount()<Y.getCapacity()?(le=Y.nextAvailableSAH(),Y.setAssociatedPath(le,ne,T)):r("SAH pool is full. Cannot create file",ne)),le||r("file not found:",ne);let Fe={path:ne,flags:T,sah:le};Y.mapS3FileToOFile(S,Fe),Fe.lockType=s.SQLITE_LOCK_NONE;let ve=new s.sqlite3_file(S);return ve.$pMethods=B.pointer,ve.dispose(),h.poke32(G,T),0}catch(ne){return Y.storeErr(ne),s.SQLITE_CANTOPEN}}},ie=function(V){t.capi.sqlite3_vfs_find(V)&&i("VFS name is already registered:",V);let f=new s.sqlite3_vfs,y=s.sqlite3_vfs_find(null),S=y?new s.sqlite3_vfs(y):null;return f.$iVersion=2,f.$szOsFile=s.sqlite3_file.structInfo.sizeof,f.$mxPathname=D,f.addOnDispose(f.$zName=h.allocCString(V),()=>p(f.pointer,0)),S&&(f.$xRandomness=S.$xRandomness,f.$xSleep=S.$xSleep,S.dispose()),!f.$xRandomness&&!$.xRandomness&&($.xRandomness=function(T,G,Y){let ne=h.heap8u(),le=0;for(;le<G;++le)ne[Y+le]=Math.random()*255e3&255;return le}),!f.$xSleep&&!$.xSleep&&($.xSleep=(T,G)=>0),t.vfs.installVfs({vfs:{struct:f,methods:$}}),f};class Z{constructor(f=Object.create(null)){we(this,re);Wt(this,"vfsDir");we(this,se,void 0);we(this,_e,void 0);we(this,pe,void 0);we(this,ye,new Map);we(this,ge,new Map);we(this,I,new Set);we(this,j,new Map);we(this,M,new Uint8Array(Q));we(this,K,void 0);we(this,H,void 0);we(this,ee,void 0);xe(this,ee,f.verbosity??w.verbosity),this.vfsName=f.name||w.name,xe(this,H,ie(this.vfsName)),p(X(this,H).pointer,this),this.vfsDir=f.directory||"."+this.vfsName,xe(this,K,new DataView(X(this,M).buffer,X(this,M).byteOffset)),this.isReady=this.reset(!!(f.clearOnInit??w.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(f.initialCapacity||w.initialCapacity)})}log(...f){rt(this,re,nt).call(this,2,...f)}warn(...f){rt(this,re,nt).call(this,1,...f)}error(...f){rt(this,re,nt).call(this,0,...f)}getVfs(){return X(this,H)}getCapacity(){return X(this,ye).size}getFileCount(){return X(this,ge).size}getFileNames(){let f=[],y=X(this,ge).keys();for(let S of y)f.push(S);return f}async addCapacity(f){for(let y=0;y<f;++y){let S=O(),G=await(await X(this,_e).getFileHandle(S,{create:!0})).createSyncAccessHandle();X(this,ye).set(G,S),this.setAssociatedPath(G,"",0)}return this.getCapacity()}async reduceCapacity(f){let y=0;for(let S of Array.from(X(this,I))){if(y===f||this.getFileCount()===this.getCapacity())break;let T=X(this,ye).get(S);S.close(),await X(this,_e).removeEntry(T),X(this,ye).delete(S),X(this,I).delete(S),++y}return y}releaseAccessHandles(){for(let f of X(this,ye).keys())f.close();X(this,ye).clear(),X(this,ge).clear(),X(this,I).clear()}async acquireAccessHandles(f){let y=[];for await(let[S,T]of X(this,_e))T.kind==="file"&&y.push([S,T]);return Promise.all(y.map(async([S,T])=>{try{let G=await T.createSyncAccessHandle();if(X(this,ye).set(G,S),f)G.truncate(F),this.setAssociatedPath(G,"",0);else{let Y=this.getAssociatedPath(G);Y?X(this,ge).set(Y,G):X(this,I).add(G)}}catch(G){throw this.storeErr(G),this.releaseAccessHandles(),G}}))}getAssociatedPath(f){f.read(X(this,M),{at:0});let y=X(this,K).getUint32(A);if(X(this,M)[0]&&(y&s.SQLITE_OPEN_DELETEONCLOSE||!(y&E)))return d(`Removing file with unexpected flags ${y.toString(16)}`,X(this,M)),this.setAssociatedPath(f,"",0),"";let S=new Uint32Array(z/4);f.read(S,{at:k});let T=this.computeDigest(X(this,M));if(S.every((G,Y)=>G===T[Y])){let G=X(this,M).findIndex(Y=>Y===0);return G===0&&f.truncate(F),G?R.decode(X(this,M).subarray(0,G)):""}else return d("Disassociating file with bad digest."),this.setAssociatedPath(f,"",0),""}setAssociatedPath(f,y,S){let T=N.encodeInto(y,X(this,M));D<=T.written+1&&r("Path too long:",y),X(this,M).fill(0,T.written,D),X(this,K).setUint32(A,S);let G=this.computeDigest(X(this,M));f.write(X(this,M),{at:0}),f.write(G,{at:k}),f.flush(),y?(X(this,ge).set(y,f),X(this,I).delete(f)):(f.truncate(F),X(this,I).add(f))}computeDigest(f){let y=3735928559,S=1103547991;for(let T of f)y=31*y+T*307,S=31*S+T*307;return new Uint32Array([y>>>0,S>>>0])}async reset(f){await this.isReady;let y=await navigator.storage.getDirectory(),S,T;for(let G of this.vfsDir.split("/"))G&&(S=y,y=await y.getDirectoryHandle(G,{create:!0}));return xe(this,se,y),xe(this,pe,S),xe(this,_e,await X(this,se).getDirectoryHandle(b,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(f)}getPath(f){return h.isPtr(f)&&(f=h.cstrToJs(f)),(f instanceof URL?f:new URL(f,"file://localhost/")).pathname}deletePath(f){let y=X(this,ge).get(f);return y&&(X(this,ge).delete(f),this.setAssociatedPath(y,"",0)),!!y}storeErr(f,y){return f&&(f.sqlite3Rc=y||s.SQLITE_IOERR,this.error(f)),this.$error=f,y}popErr(){let f=this.$error;return this.$error=void 0,f}nextAvailableSAH(){let[f]=X(this,I).keys();return f}getOFileForS3File(f){return X(this,j).get(f)}mapS3FileToOFile(f,y){y?(X(this,j).set(f,y),c(f,this)):(X(this,j).delete(f),c(f,!1))}hasFilename(f){return X(this,ge).has(f)}getSAHForPath(f){return X(this,ge).get(f)}async removeVfs(){if(!X(this,H).pointer||!X(this,_e))return!1;s.sqlite3_vfs_unregister(X(this,H).pointer),X(this,H).dispose(),delete n[this.vfsName];try{this.releaseAccessHandles(),await X(this,se).removeEntry(b,{recursive:!0}),xe(this,_e,void 0),await X(this,pe).removeEntry(X(this,se).name,{recursive:!0}),xe(this,se,xe(this,pe,void 0))}catch(f){t.config.error(this.vfsName,"removeVfs() failed:",f)}return!0}exportFile(f){let y=X(this,ge).get(f)||r("File not found:",f),S=y.getSize()-F,T=new Uint8Array(S>0?S:0);if(S>0){let G=y.read(T,{at:F});G!=S&&r("Expected to read "+S+" bytes but read "+G+".")}return T}async importDbChunked(f,y){let S=X(this,ge).get(f)||this.nextAvailableSAH()||r("No available handles to import to.");S.truncate(0);let T=0,G,Y=!1,ne=!1;try{for(;(G=await y())!==void 0;)G instanceof ArrayBuffer&&(G=new Uint8Array(G)),T===0&&G.byteLength>=15&&(m.affirmDbHeader(G),Y=!0),S.write(G,{at:F+T}),T+=G.byteLength;if((T<512||T%512!==0)&&r("Input size",T,"is not correct for an SQLite database."),!Y){let le=new Uint8Array(20);S.read(le,{at:0}),m.affirmDbHeader(le)}S.write(new Uint8Array([1,1]),{at:F+18})}catch(le){throw this.setAssociatedPath(S,"",0),le}return this.setAssociatedPath(S,f,s.SQLITE_OPEN_MAIN_DB),T}importDb(f,y){if(y instanceof ArrayBuffer)y=new Uint8Array(y);else if(y instanceof Function)return this.importDbChunked(f,y);let S=X(this,ge).get(f)||this.nextAvailableSAH()||r("No available handles to import to."),T=y.byteLength;(T<512||T%512!=0)&&r("Byte array size is invalid for an SQLite db.");let G="SQLite format 3";for(let ne=0;ne<G.length;++ne)G.charCodeAt(ne)!==y[ne]&&r("Input does not contain an SQLite database header.");let Y=S.write(y,{at:F});return Y!=T?(this.setAssociatedPath(S,"",0),r("Expected to write "+T+" bytes but wrote "+Y+".")):(S.write(new Uint8Array([1,1]),{at:F+18}),this.setAssociatedPath(S,f,s.SQLITE_OPEN_MAIN_DB)),Y}}se=new WeakMap,_e=new WeakMap,pe=new WeakMap,ye=new WeakMap,ge=new WeakMap,I=new WeakMap,j=new WeakMap,M=new WeakMap,K=new WeakMap,H=new WeakMap,ee=new WeakMap,re=new WeakSet,nt=function(f,...y){X(this,ee)>f&&U[f](this.vfsName+":",...y)};class oe{constructor(f){we(this,fe,void 0);xe(this,fe,f),this.vfsName=f.vfsName}async addCapacity(f){return X(this,fe).addCapacity(f)}async reduceCapacity(f){return X(this,fe).reduceCapacity(f)}getCapacity(){return X(this,fe).getCapacity(X(this,fe))}getFileCount(){return X(this,fe).getFileCount()}getFileNames(){return X(this,fe).getFileNames()}async reserveMinimumCapacity(f){let y=X(this,fe).getCapacity();return y<f?X(this,fe).addCapacity(f-y):y}exportFile(f){return X(this,fe).exportFile(f)}importDb(f,y){return X(this,fe).importDb(f,y)}async wipeFiles(){return X(this,fe).reset(!0)}unlink(f){return X(this,fe).deletePath(f)}async removeVfs(){return X(this,fe).removeVfs()}}fe=new WeakMap;let ce=async()=>{let V=await navigator.storage.getDirectory(),f=".opfs-sahpool-sync-check-"+O(),T=(await(await V.getFileHandle(f,{create:!0})).createSyncAccessHandle()).close();return await T,await V.removeEntry(f),T?.then&&r("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(V=Object.create(null)){V=Object.assign(Object.create(null),w,V||{});let f=V.name;if(V.$testThrowPhase1)throw V.$testThrowPhase1;if(n[f])try{return await n[f]}catch(y){if(V.forceReinitIfPreviouslyFailed)delete n[f];else throw y}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?n[f]=Promise.reject(new Error("Missing required OPFS APIs.")):n[f]=ce().then(async function(){if(V.$testThrowPhase2)throw V.$testThrowPhase2;let y=new Z(V);return y.isReady.then(async()=>{let S=new oe(y);if(t.oo1){let T=t.oo1,G=y.getVfs(),Y=function(...ne){let le=T.DB.dbCtorHelper.normalizeArgs(...ne);le.vfs=G.$zName,T.DB.dbCtorHelper.call(this,le)};Y.prototype=Object.create(T.DB.prototype),S.OpfsSAHPoolDb=Y}return y.log("VFS initialized."),S}).catch(async S=>{throw await y.removeVfs().catch(()=>{}),S})}).catch(y=>n[f]=Promise.reject(y))}}),typeof e<"u"){let t=Object.assign(Object.create(null),{exports:typeof g>"u"?e.asm:g,memory:e.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let r;try{r=globalThis.sqlite3ApiBootstrap()}catch(i){throw console.error("sqlite3ApiBootstrap() error:",i),i}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}e.sqlite3=r}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),ue.ready}})();typeof exports=="object"&&typeof module=="object"?module.exports=$e:typeof define=="function"&&define.amd&&define([],()=>$e);(function(){let he=$e;if(!he)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");let ue=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(ue.debugModule=ue.urlParams.has("sqlite3.debugModule")?(...o)=>console.warn("sqlite3.debugModule:",...o):()=>{},ue.urlParams.has("sqlite3.dir"))ue.sqlite3Dir=ue.urlParams.get("sqlite3.dir")+"/";else if(ue.moduleScript){let o=ue.moduleScript.src.split("/");o.pop(),ue.sqlite3Dir=o.join("/")+"/"}if(globalThis.sqlite3InitModule=function o(...Se){return he(...Se).then(ke=>{let Ne=ke.sqlite3;Ne.scriptInfo=ue,o.__isUnderTest&&(Ne.__isUnderTest=!0);let Ke=Ne.asyncPostInit;return delete Ne.asyncPostInit,Ke()}).catch(ke=>{throw console.error("Exception loading sqlite3 module:",ke),ke})},globalThis.sqlite3InitModule.ready=he.ready,globalThis.sqlite3InitModuleState.moduleScript){let o=globalThis.sqlite3InitModuleState,Se=o.moduleScript.src.split("/");Se.pop(),o.scriptDir=Se.join("/")+"/"}return ue.debugModule("sqlite3InitModuleState =",ue),typeof exports=="object"&&typeof module=="object"?module.exports=$e:typeof exports=="object"&&(exports.sqlite3InitModule=$e),globalThis.sqlite3InitModule})();})();
